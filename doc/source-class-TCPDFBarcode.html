<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />
	<meta name="robots" content="noindex" />

	<title>File IO/PHPExcel/PHPExcel/Shared/PDF/barcodes.php</title>

	<script type="text/javascript" src="resources/combined.js?1049052095"></script>
	<script type="text/javascript" src="elementlist.js?4103893714"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?3505392360" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li><a href="package-co.html">co<span></span></a>
						<ul>
				<li><a href="package-co.org.html">org<span></span></a>
						<ul>
				<li><a href="package-co.org.lavado.html">lavado<span></span></a>
						<ul>
				<li><a href="package-co.org.lavado.app.html">app<span></span></a>
						<ul>
				<li><a href="package-co.org.lavado.app.sistema.html">sistema</a>
						</li>
							</ul></li>
				<li><a href="package-co.org.lavado.interfaces.html">interfaces</a>
						</li>
				<li><a href="package-co.org.lavado.io.html">io<span></span></a>
						<ul>
				<li><a href="package-co.org.lavado.io.print.html">print</a>
						</li>
							</ul></li></ul></li></ul></li></ul></li>
				<li class="active"><a href="package-com.html">com<span></span></a>
						<ul>
				<li class="active"><a href="package-com.tecnick.html">tecnick<span></span></a>
						<ul>
				<li class="active"><a href="package-com.tecnick.tcpdf.html">tcpdf</a>
						</li>
							</ul></li></ul></li>
				<li><a href="package-JAMA.html">JAMA</a>
						</li>
				<li><a href="package-Math.html">Math<span></span></a>
						<ul>
				<li><a href="package-Math.Stats.html">Stats</a>
						</li>
							</ul></li>
				<li><a href="package-None.html">None</a>
						</li>
				<li><a href="package-PHP.html">PHP</a>
						</li>
				<li><a href="package-PHPExcel.html">PHPExcel<span></span></a>
						<ul>
				<li><a href="package-PHPExcel.CachedObjectStorage.html">CachedObjectStorage</a>
						</li>
				<li><a href="package-PHPExcel.Calculation.html">Calculation</a>
						</li>
				<li><a href="package-PHPExcel.Cell.html">Cell</a>
						</li>
				<li><a href="package-PHPExcel.Chart.html">Chart<span></span></a>
						<ul>
				<li><a href="package-PHPExcel.Chart.Renderer.html">Renderer</a>
						</li>
							</ul></li>
				<li><a href="package-PHPExcel.Reader.html">Reader<span></span></a>
						<ul>
				<li><a href="package-PHPExcel.Reader.Excel2007.html">Excel2007</a>
						</li>
				<li><a href="package-PHPExcel.Reader.Excel5.html">Excel5</a>
						</li>
							</ul></li>
				<li><a href="package-PHPExcel.RichText.html">RichText</a>
						</li>
				<li><a href="package-PHPExcel.Settings.html">Settings</a>
						</li>
				<li><a href="package-PHPExcel.Shared.html">Shared<span></span></a>
						<ul>
				<li><a href="package-PHPExcel.Shared.Escher.html">Escher</a>
						</li>
				<li><a href="package-PHPExcel.Shared.OLE.html">OLE</a>
						</li>
				<li><a href="package-PHPExcel.Shared.Trend.html">Trend</a>
						</li>
				<li><a href="package-PHPExcel.Shared.ZipArchive.html">ZipArchive</a>
						</li>
							</ul></li>
				<li><a href="package-PHPExcel.Style.html">Style</a>
						</li>
				<li><a href="package-PHPExcel.Worksheet.html">Worksheet<span></span></a>
						<ul>
				<li><a href="package-PHPExcel.Worksheet.Drawing.html">Drawing</a>
						</li>
							</ul></li>
				<li><a href="package-PHPExcel.Writer.html">Writer<span></span></a>
						<ul>
				<li><a href="package-PHPExcel.Writer.Excel2007.html">Excel2007</a>
						</li>
				<li><a href="package-PHPExcel.Writer.Excel5.html">Excel5</a>
						</li>
							</ul></li></ul></li>
				<li><a href="package-PHPMailer.html">PHPMailer</a>
						</li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-PDF417.html">PDF417</a></li>
				<li><a href="class-QRcode.html">QRcode</a></li>
				<li><a href="class-TCPDF.html">TCPDF</a></li>
				<li><a href="class-TCPDF2DBarcode.html">TCPDF2DBarcode</a></li>
				<li><a href="class-TCPDF_UNICODE_DATA.html">TCPDF_UNICODE_DATA</a></li>
				<li class="active"><a href="class-TCPDFBarcode.html">TCPDFBarcode</a></li>
			</ul>





			<h3>Functions</h3>
			<ul>
				<li><a href="function-CheckTTF.html">CheckTTF</a></li>
				<li><a href="function-MakeFont.html">MakeFont</a></li>
				<li><a href="function-MakeFontDescriptor.html">MakeFontDescriptor</a></li>
				<li><a href="function-MakeFontEncoding.html">MakeFontEncoding</a></li>
				<li><a href="function-MakeWidthArray.html">MakeWidthArray</a></li>
				<li><a href="function-ReadAFM.html">ReadAFM</a></li>
				<li><a href="function-ReadLong.html">ReadLong</a></li>
				<li><a href="function-ReadMap.html">ReadMap</a></li>
				<li><a href="function-ReadShort.html">ReadShort</a></li>
				<li><a href="function-ReadUFM.html">ReadUFM</a></li>
				<li><a href="function-SaveToFile.html">SaveToFile</a></li>
				<li><a href="function-str_split.html">str_split</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-com.tecnick.tcpdf.html" title="Summary of com\tecnick\tcpdf"><span>Package</span></a>
			</li>
			<li>
				<a href="class-TCPDFBarcode.html" title="Summary of TCPDFBarcode"><span>Class</span></a>
			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<pre><code><span id="1" class="l"><a class="l" href="#1">   1: </a><span class="xlang">&lt;?php</span>
</span><span id="2" class="l"><a class="l" href="#2">   2: </a><span class="php-comment">//============================================================+</span>
</span><span id="3" class="l"><a class="l" href="#3">   3: </a><span class="php-comment">// File name   : barcodes.php</span>
</span><span id="4" class="l"><a class="l" href="#4">   4: </a><span class="php-comment">// Version     : 1.0.011</span>
</span><span id="5" class="l"><a class="l" href="#5">   5: </a><span class="php-comment">// Begin       : 2008-06-09</span>
</span><span id="6" class="l"><a class="l" href="#6">   6: </a><span class="php-comment">// Last Update : 2010-08-08</span>
</span><span id="7" class="l"><a class="l" href="#7">   7: </a><span class="php-comment">// Author      : Nicola Asuni - Tecnick.com S.r.l - Via Della Pace, 11 - 09044 - Quartucciu (CA) - ITALY - www.tecnick.com - info@tecnick.com</span>
</span><span id="8" class="l"><a class="l" href="#8">   8: </a><span class="php-comment">// License     : GNU-LGPL v3 (http://www.gnu.org/copyleft/lesser.html)</span>
</span><span id="9" class="l"><a class="l" href="#9">   9: </a><span class="php-comment">// -------------------------------------------------------------------</span>
</span><span id="10" class="l"><a class="l" href="#10">  10: </a><span class="php-comment">// Copyright (C) 2008-2010  Nicola Asuni - Tecnick.com S.r.l.</span>
</span><span id="11" class="l"><a class="l" href="#11">  11: </a><span class="php-comment">//</span>
</span><span id="12" class="l"><a class="l" href="#12">  12: </a><span class="php-comment">// This file is part of TCPDF software library.</span>
</span><span id="13" class="l"><a class="l" href="#13">  13: </a><span class="php-comment">//</span>
</span><span id="14" class="l"><a class="l" href="#14">  14: </a><span class="php-comment">// TCPDF is free software: you can redistribute it and/or modify it</span>
</span><span id="15" class="l"><a class="l" href="#15">  15: </a><span class="php-comment">// under the terms of the GNU Lesser General Public License as</span>
</span><span id="16" class="l"><a class="l" href="#16">  16: </a><span class="php-comment">// published by the Free Software Foundation, either version 3 of the</span>
</span><span id="17" class="l"><a class="l" href="#17">  17: </a><span class="php-comment">// License, or (at your option) any later version.</span>
</span><span id="18" class="l"><a class="l" href="#18">  18: </a><span class="php-comment">//</span>
</span><span id="19" class="l"><a class="l" href="#19">  19: </a><span class="php-comment">// TCPDF is distributed in the hope that it will be useful, but</span>
</span><span id="20" class="l"><a class="l" href="#20">  20: </a><span class="php-comment">// WITHOUT ANY WARRANTY; without even the implied warranty of</span>
</span><span id="21" class="l"><a class="l" href="#21">  21: </a><span class="php-comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
</span><span id="22" class="l"><a class="l" href="#22">  22: </a><span class="php-comment">// See the GNU Lesser General Public License for more details.</span>
</span><span id="23" class="l"><a class="l" href="#23">  23: </a><span class="php-comment">//</span>
</span><span id="24" class="l"><a class="l" href="#24">  24: </a><span class="php-comment">// You should have received a copy of the GNU Lesser General Public License</span>
</span><span id="25" class="l"><a class="l" href="#25">  25: </a><span class="php-comment">// along with TCPDF.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
</span><span id="26" class="l"><a class="l" href="#26">  26: </a><span class="php-comment">//</span>
</span><span id="27" class="l"><a class="l" href="#27">  27: </a><span class="php-comment">// See LICENSE.TXT file for more information.</span>
</span><span id="28" class="l"><a class="l" href="#28">  28: </a><span class="php-comment">// -------------------------------------------------------------------</span>
</span><span id="29" class="l"><a class="l" href="#29">  29: </a><span class="php-comment">//</span>
</span><span id="30" class="l"><a class="l" href="#30">  30: </a><span class="php-comment">// Description : PHP class to creates array representations for</span>
</span><span id="31" class="l"><a class="l" href="#31">  31: </a><span class="php-comment">//               common 1D barcodes to be used with TCPDF.</span>
</span><span id="32" class="l"><a class="l" href="#32">  32: </a><span class="php-comment">//</span>
</span><span id="33" class="l"><a class="l" href="#33">  33: </a><span class="php-comment">//============================================================+</span>
</span><span id="34" class="l"><a class="l" href="#34">  34: </a>
</span><span id="35" class="l"><a class="l" href="#35">  35: </a><span class="php-comment">/**
</span></span><span id="36" class="l"><a class="l" href="#36">  36: </a><span class="php-comment"> * PHP class to creates array representations for common 1D barcodes to be used with TCPDF.
</span></span><span id="37" class="l"><a class="l" href="#37">  37: </a><span class="php-comment"> * @package com.tecnick.tcpdf
</span></span><span id="38" class="l"><a class="l" href="#38">  38: </a><span class="php-comment"> * @abstract Functions for generating string representation of common 1D barcodes.
</span></span><span id="39" class="l"><a class="l" href="#39">  39: </a><span class="php-comment"> * @author Nicola Asuni
</span></span><span id="40" class="l"><a class="l" href="#40">  40: </a><span class="php-comment"> * @copyright 2008-2009 Nicola Asuni - Tecnick.com S.r.l (www.tecnick.com) Via Della Pace, 11 - 09044 - Quartucciu (CA) - ITALY - www.tecnick.com - info@tecnick.com
</span></span><span id="41" class="l"><a class="l" href="#41">  41: </a><span class="php-comment"> * @link http://www.tcpdf.org
</span></span><span id="42" class="l"><a class="l" href="#42">  42: </a><span class="php-comment"> * @license http://www.gnu.org/copyleft/lesser.html LGPL
</span></span><span id="43" class="l"><a class="l" href="#43">  43: </a><span class="php-comment"> * @version 1.0.011
</span></span><span id="44" class="l"><a class="l" href="#44">  44: </a><span class="php-comment"> */</span>
</span><span id="45" class="l"><a class="l" href="#45">  45: </a>
</span><span id="46" class="l"><a class="l" href="#46">  46: </a>    <span class="php-comment">/**
</span></span><span id="47" class="l"><a class="l" href="#47">  47: </a><span class="php-comment">    * PHP class to creates array representations for common 1D barcodes to be used with TCPDF (http://www.tcpdf.org).&lt;br&gt;
</span></span><span id="48" class="l"><a class="l" href="#48">  48: </a><span class="php-comment">    * @name TCPDFBarcode
</span></span><span id="49" class="l"><a class="l" href="#49">  49: </a><span class="php-comment">    * @package com.tecnick.tcpdf
</span></span><span id="50" class="l"><a class="l" href="#50">  50: </a><span class="php-comment">    * @version 1.0.011
</span></span><span id="51" class="l"><a class="l" href="#51">  51: </a><span class="php-comment">    * @author Nicola Asuni
</span></span><span id="52" class="l"><a class="l" href="#52">  52: </a><span class="php-comment">    * @link http://www.tcpdf.org
</span></span><span id="53" class="l"><a class="l" href="#53">  53: </a><span class="php-comment">    * @license http://www.gnu.org/copyleft/lesser.html LGPL
</span></span><span id="54" class="l"><a class="l" href="#54">  54: </a><span class="php-comment">    */</span>
</span><span id="55" class="l"><a class="l" href="#55">  55: </a><span class="php-keyword1">class</span> <a id="TCPDFBarcode" href="#TCPDFBarcode">TCPDFBarcode</a> {
</span><span id="56" class="l"><a class="l" href="#56">  56: </a>
</span><span id="57" class="l"><a class="l" href="#57">  57: </a>    <span class="php-comment">/**
</span></span><span id="58" class="l"><a class="l" href="#58">  58: </a><span class="php-comment">     * @var array representation of barcode.
</span></span><span id="59" class="l"><a class="l" href="#59">  59: </a><span class="php-comment">     * @access protected
</span></span><span id="60" class="l"><a class="l" href="#60">  60: </a><span class="php-comment">     */</span>
</span><span id="61" class="l"><a class="l" href="#61">  61: </a>    <span class="php-keyword1">protected</span> <span class="php-var"><a id="$barcode_array" href="#$barcode_array">$barcode_array</a></span>;
</span><span id="62" class="l"><a class="l" href="#62">  62: </a>
</span><span id="63" class="l"><a class="l" href="#63">  63: </a>    <span class="php-comment">/**
</span></span><span id="64" class="l"><a class="l" href="#64">  64: </a><span class="php-comment">     * This is the class constructor.
</span></span><span id="65" class="l"><a class="l" href="#65">  65: </a><span class="php-comment">     * Return an array representations for common 1D barcodes:&lt;ul&gt;
</span></span><span id="66" class="l"><a class="l" href="#66">  66: </a><span class="php-comment">     * &lt;li&gt;$arrcode['code'] code to be printed on text label&lt;/li&gt;
</span></span><span id="67" class="l"><a class="l" href="#67">  67: </a><span class="php-comment">     * &lt;li&gt;$arrcode['maxh'] max bar height&lt;/li&gt;
</span></span><span id="68" class="l"><a class="l" href="#68">  68: </a><span class="php-comment">     * &lt;li&gt;$arrcode['maxw'] max bar width&lt;/li&gt;
</span></span><span id="69" class="l"><a class="l" href="#69">  69: </a><span class="php-comment">     * &lt;li&gt;$arrcode['bcode'][$k] single bar or space in $k position&lt;/li&gt;
</span></span><span id="70" class="l"><a class="l" href="#70">  70: </a><span class="php-comment">     * &lt;li&gt;$arrcode['bcode'][$k]['t'] bar type: true = bar, false = space.&lt;/li&gt;
</span></span><span id="71" class="l"><a class="l" href="#71">  71: </a><span class="php-comment">     * &lt;li&gt;$arrcode['bcode'][$k]['w'] bar width in units.&lt;/li&gt;
</span></span><span id="72" class="l"><a class="l" href="#72">  72: </a><span class="php-comment">     * &lt;li&gt;$arrcode['bcode'][$k]['h'] bar height in units.&lt;/li&gt;
</span></span><span id="73" class="l"><a class="l" href="#73">  73: </a><span class="php-comment">     * &lt;li&gt;$arrcode['bcode'][$k]['p'] bar top position (0 = top, 1 = middle)&lt;/li&gt;&lt;/ul&gt;
</span></span><span id="74" class="l"><a class="l" href="#74">  74: </a><span class="php-comment">     * @param string $code code to print
</span></span><span id="75" class="l"><a class="l" href="#75">  75: </a><span class="php-comment">     * @param string $type type of barcode: &lt;ul&gt;&lt;li&gt;C39 : CODE 39 - ANSI MH10.8M-1983 - USD-3 - 3 of 9.&lt;/li&gt;&lt;li&gt;C39+ : CODE 39 with checksum&lt;/li&gt;&lt;li&gt;C39E : CODE 39 EXTENDED&lt;/li&gt;&lt;li&gt;C39E+ : CODE 39 EXTENDED + CHECKSUM&lt;/li&gt;&lt;li&gt;C93 : CODE 93 - USS-93&lt;/li&gt;&lt;li&gt;S25 : Standard 2 of 5&lt;/li&gt;&lt;li&gt;S25+ : Standard 2 of 5 + CHECKSUM&lt;/li&gt;&lt;li&gt;I25 : Interleaved 2 of 5&lt;/li&gt;&lt;li&gt;I25+ : Interleaved 2 of 5 + CHECKSUM&lt;/li&gt;&lt;li&gt;C128A : CODE 128 A&lt;/li&gt;&lt;li&gt;C128B : CODE 128 B&lt;/li&gt;&lt;li&gt;C128C : CODE 128 C&lt;/li&gt;&lt;li&gt;EAN2 : 2-Digits UPC-Based Extention&lt;/li&gt;&lt;li&gt;EAN5 : 5-Digits UPC-Based Extention&lt;/li&gt;&lt;li&gt;EAN8 : EAN 8&lt;/li&gt;&lt;li&gt;EAN13 : EAN 13&lt;/li&gt;&lt;li&gt;UPCA : UPC-A&lt;/li&gt;&lt;li&gt;UPCE : UPC-E&lt;/li&gt;&lt;li&gt;MSI : MSI (Variation of Plessey code)&lt;/li&gt;&lt;li&gt;MSI+ : MSI + CHECKSUM (modulo 11)&lt;/li&gt;&lt;li&gt;POSTNET : POSTNET&lt;/li&gt;&lt;li&gt;PLANET : PLANET&lt;/li&gt;&lt;li&gt;RMS4CC : RMS4CC (Royal Mail 4-state Customer Code) - CBC (Customer Bar Code)&lt;/li&gt;&lt;li&gt;KIX : KIX (Klant index - Customer index)&lt;/li&gt;&lt;li&gt;IMB: Intelligent Mail Barcode - Onecode - USPS-B-3200&lt;/li&gt;&lt;li&gt;CODABAR : CODABAR&lt;/li&gt;&lt;li&gt;CODE11 : CODE 11&lt;/li&gt;&lt;li&gt;PHARMA : PHARMACODE&lt;/li&gt;&lt;li&gt;PHARMA2T : PHARMACODE TWO-TRACKS&lt;/li&gt;&lt;/ul&gt;
</span></span><span id="76" class="l"><a class="l" href="#76">  76: </a><span class="php-comment">     */</span>
</span><span id="77" class="l"><a class="l" href="#77">  77: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="___construct" href="#___construct">__construct</a>(<span class="php-var">$code</span>, <span class="php-var">$type</span>) {
</span><span id="78" class="l"><a class="l" href="#78">  78: </a>        <span class="php-var">$this</span>-&gt;setBarcode(<span class="php-var">$code</span>, <span class="php-var">$type</span>);
</span><span id="79" class="l"><a class="l" href="#79">  79: </a>    }
</span><span id="80" class="l"><a class="l" href="#80">  80: </a>
</span><span id="81" class="l"><a class="l" href="#81">  81: </a>    <span class="php-comment">/**
</span></span><span id="82" class="l"><a class="l" href="#82">  82: </a><span class="php-comment">     * Return an array representations of barcode.
</span></span><span id="83" class="l"><a class="l" href="#83">  83: </a><span class="php-comment">     * @return array
</span></span><span id="84" class="l"><a class="l" href="#84">  84: </a><span class="php-comment">     */</span>
</span><span id="85" class="l"><a class="l" href="#85">  85: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_getBarcodeArray" href="#_getBarcodeArray">getBarcodeArray</a>() {
</span><span id="86" class="l"><a class="l" href="#86">  86: </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;barcode_array;
</span><span id="87" class="l"><a class="l" href="#87">  87: </a>    }
</span><span id="88" class="l"><a class="l" href="#88">  88: </a>
</span><span id="89" class="l"><a class="l" href="#89">  89: </a>    <span class="php-comment">/**
</span></span><span id="90" class="l"><a class="l" href="#90">  90: </a><span class="php-comment">     * Set the barcode.
</span></span><span id="91" class="l"><a class="l" href="#91">  91: </a><span class="php-comment">     * @param string $code code to print
</span></span><span id="92" class="l"><a class="l" href="#92">  92: </a><span class="php-comment">     * @param string $type type of barcode: &lt;ul&gt;&lt;li&gt;C39 : CODE 39 - ANSI MH10.8M-1983 - USD-3 - 3 of 9.&lt;/li&gt;&lt;li&gt;C39+ : CODE 39 with checksum&lt;/li&gt;&lt;li&gt;C39E : CODE 39 EXTENDED&lt;/li&gt;&lt;li&gt;C39E+ : CODE 39 EXTENDED + CHECKSUM&lt;/li&gt;&lt;li&gt;C93 : CODE 93 - USS-93&lt;/li&gt;&lt;li&gt;S25 : Standard 2 of 5&lt;/li&gt;&lt;li&gt;S25+ : Standard 2 of 5 + CHECKSUM&lt;/li&gt;&lt;li&gt;I25 : Interleaved 2 of 5&lt;/li&gt;&lt;li&gt;I25+ : Interleaved 2 of 5 + CHECKSUM&lt;/li&gt;&lt;li&gt;C128A : CODE 128 A&lt;/li&gt;&lt;li&gt;C128B : CODE 128 B&lt;/li&gt;&lt;li&gt;C128C : CODE 128 C&lt;/li&gt;&lt;li&gt;EAN2 : 2-Digits UPC-Based Extention&lt;/li&gt;&lt;li&gt;EAN5 : 5-Digits UPC-Based Extention&lt;/li&gt;&lt;li&gt;EAN8 : EAN 8&lt;/li&gt;&lt;li&gt;EAN13 : EAN 13&lt;/li&gt;&lt;li&gt;UPCA : UPC-A&lt;/li&gt;&lt;li&gt;UPCE : UPC-E&lt;/li&gt;&lt;li&gt;MSI : MSI (Variation of Plessey code)&lt;/li&gt;&lt;li&gt;MSI+ : MSI + CHECKSUM (modulo 11)&lt;/li&gt;&lt;li&gt;POSTNET : POSTNET&lt;/li&gt;&lt;li&gt;PLANET : PLANET&lt;/li&gt;&lt;li&gt;RMS4CC : RMS4CC (Royal Mail 4-state Customer Code) - CBC (Customer Bar Code)&lt;/li&gt;&lt;li&gt;KIX : KIX (Klant index - Customer index)&lt;/li&gt;&lt;li&gt;IMB: Intelligent Mail Barcode - Onecode - USPS-B-3200&lt;/li&gt;&lt;li&gt;CODABAR : CODABAR&lt;/li&gt;&lt;li&gt;CODE11 : CODE 11&lt;/li&gt;&lt;li&gt;PHARMA : PHARMACODE&lt;/li&gt;&lt;li&gt;PHARMA2T : PHARMACODE TWO-TRACKS&lt;/li&gt;&lt;/ul&gt;
</span></span><span id="93" class="l"><a class="l" href="#93">  93: </a><span class="php-comment">     * @return array
</span></span><span id="94" class="l"><a class="l" href="#94">  94: </a><span class="php-comment">     */</span>
</span><span id="95" class="l"><a class="l" href="#95">  95: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_setBarcode" href="#_setBarcode">setBarcode</a>(<span class="php-var">$code</span>, <span class="php-var">$type</span>) {
</span><span id="96" class="l"><a class="l" href="#96">  96: </a>        <span class="php-keyword1">switch</span> (<span class="php-keyword2">strtoupper</span>(<span class="php-var">$type</span>)) {
</span><span id="97" class="l"><a class="l" href="#97">  97: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'C39'</span>: { <span class="php-comment">// CODE 39 - ANSI MH10.8M-1983 - USD-3 - 3 of 9.</span>
</span><span id="98" class="l"><a class="l" href="#98">  98: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_code39(<span class="php-var">$code</span>, <span class="php-keyword1">false</span>, <span class="php-keyword1">false</span>);
</span><span id="99" class="l"><a class="l" href="#99">  99: </a>                <span class="php-keyword1">break</span>;
</span><span id="100" class="l"><a class="l" href="#100"> 100: </a>            }
</span><span id="101" class="l"><a class="l" href="#101"> 101: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'C39+'</span>: { <span class="php-comment">// CODE 39 with checksum</span>
</span><span id="102" class="l"><a class="l" href="#102"> 102: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_code39(<span class="php-var">$code</span>, <span class="php-keyword1">false</span>, <span class="php-keyword1">true</span>);
</span><span id="103" class="l"><a class="l" href="#103"> 103: </a>                <span class="php-keyword1">break</span>;
</span><span id="104" class="l"><a class="l" href="#104"> 104: </a>            }
</span><span id="105" class="l"><a class="l" href="#105"> 105: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'C39E'</span>: { <span class="php-comment">// CODE 39 EXTENDED</span>
</span><span id="106" class="l"><a class="l" href="#106"> 106: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_code39(<span class="php-var">$code</span>, <span class="php-keyword1">true</span>, <span class="php-keyword1">false</span>);
</span><span id="107" class="l"><a class="l" href="#107"> 107: </a>                <span class="php-keyword1">break</span>;
</span><span id="108" class="l"><a class="l" href="#108"> 108: </a>            }
</span><span id="109" class="l"><a class="l" href="#109"> 109: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'C39E+'</span>: { <span class="php-comment">// CODE 39 EXTENDED + CHECKSUM</span>
</span><span id="110" class="l"><a class="l" href="#110"> 110: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_code39(<span class="php-var">$code</span>, <span class="php-keyword1">true</span>, <span class="php-keyword1">true</span>);
</span><span id="111" class="l"><a class="l" href="#111"> 111: </a>                <span class="php-keyword1">break</span>;
</span><span id="112" class="l"><a class="l" href="#112"> 112: </a>            }
</span><span id="113" class="l"><a class="l" href="#113"> 113: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'C93'</span>: { <span class="php-comment">// CODE 93 - USS-93</span>
</span><span id="114" class="l"><a class="l" href="#114"> 114: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_code93(<span class="php-var">$code</span>);
</span><span id="115" class="l"><a class="l" href="#115"> 115: </a>                <span class="php-keyword1">break</span>;
</span><span id="116" class="l"><a class="l" href="#116"> 116: </a>            }
</span><span id="117" class="l"><a class="l" href="#117"> 117: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'S25'</span>: { <span class="php-comment">// Standard 2 of 5</span>
</span><span id="118" class="l"><a class="l" href="#118"> 118: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_s25(<span class="php-var">$code</span>, <span class="php-keyword1">false</span>);
</span><span id="119" class="l"><a class="l" href="#119"> 119: </a>                <span class="php-keyword1">break</span>;
</span><span id="120" class="l"><a class="l" href="#120"> 120: </a>            }
</span><span id="121" class="l"><a class="l" href="#121"> 121: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'S25+'</span>: { <span class="php-comment">// Standard 2 of 5 + CHECKSUM</span>
</span><span id="122" class="l"><a class="l" href="#122"> 122: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_s25(<span class="php-var">$code</span>, <span class="php-keyword1">true</span>);
</span><span id="123" class="l"><a class="l" href="#123"> 123: </a>                <span class="php-keyword1">break</span>;
</span><span id="124" class="l"><a class="l" href="#124"> 124: </a>            }
</span><span id="125" class="l"><a class="l" href="#125"> 125: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'I25'</span>: { <span class="php-comment">// Interleaved 2 of 5</span>
</span><span id="126" class="l"><a class="l" href="#126"> 126: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_i25(<span class="php-var">$code</span>, <span class="php-keyword1">false</span>);
</span><span id="127" class="l"><a class="l" href="#127"> 127: </a>                <span class="php-keyword1">break</span>;
</span><span id="128" class="l"><a class="l" href="#128"> 128: </a>            }
</span><span id="129" class="l"><a class="l" href="#129"> 129: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'I25+'</span>: { <span class="php-comment">// Interleaved 2 of 5 + CHECKSUM</span>
</span><span id="130" class="l"><a class="l" href="#130"> 130: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_i25(<span class="php-var">$code</span>, <span class="php-keyword1">true</span>);
</span><span id="131" class="l"><a class="l" href="#131"> 131: </a>                <span class="php-keyword1">break</span>;
</span><span id="132" class="l"><a class="l" href="#132"> 132: </a>            }
</span><span id="133" class="l"><a class="l" href="#133"> 133: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'C128A'</span>: { <span class="php-comment">// CODE 128 A</span>
</span><span id="134" class="l"><a class="l" href="#134"> 134: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_c128(<span class="php-var">$code</span>, <span class="php-quote">'A'</span>);
</span><span id="135" class="l"><a class="l" href="#135"> 135: </a>                <span class="php-keyword1">break</span>;
</span><span id="136" class="l"><a class="l" href="#136"> 136: </a>            }
</span><span id="137" class="l"><a class="l" href="#137"> 137: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'C128B'</span>: { <span class="php-comment">// CODE 128 B</span>
</span><span id="138" class="l"><a class="l" href="#138"> 138: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_c128(<span class="php-var">$code</span>, <span class="php-quote">'B'</span>);
</span><span id="139" class="l"><a class="l" href="#139"> 139: </a>                <span class="php-keyword1">break</span>;
</span><span id="140" class="l"><a class="l" href="#140"> 140: </a>            }
</span><span id="141" class="l"><a class="l" href="#141"> 141: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'C128C'</span>: { <span class="php-comment">// CODE 128 C</span>
</span><span id="142" class="l"><a class="l" href="#142"> 142: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_c128(<span class="php-var">$code</span>, <span class="php-quote">'C'</span>);
</span><span id="143" class="l"><a class="l" href="#143"> 143: </a>                <span class="php-keyword1">break</span>;
</span><span id="144" class="l"><a class="l" href="#144"> 144: </a>            }
</span><span id="145" class="l"><a class="l" href="#145"> 145: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'EAN2'</span>: { <span class="php-comment">// 2-Digits UPC-Based Extention</span>
</span><span id="146" class="l"><a class="l" href="#146"> 146: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_eanext(<span class="php-var">$code</span>, <span class="php-num">2</span>);
</span><span id="147" class="l"><a class="l" href="#147"> 147: </a>                <span class="php-keyword1">break</span>;
</span><span id="148" class="l"><a class="l" href="#148"> 148: </a>            }
</span><span id="149" class="l"><a class="l" href="#149"> 149: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'EAN5'</span>: { <span class="php-comment">// 5-Digits UPC-Based Extention</span>
</span><span id="150" class="l"><a class="l" href="#150"> 150: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_eanext(<span class="php-var">$code</span>, <span class="php-num">5</span>);
</span><span id="151" class="l"><a class="l" href="#151"> 151: </a>                <span class="php-keyword1">break</span>;
</span><span id="152" class="l"><a class="l" href="#152"> 152: </a>            }
</span><span id="153" class="l"><a class="l" href="#153"> 153: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'EAN8'</span>: { <span class="php-comment">// EAN 8</span>
</span><span id="154" class="l"><a class="l" href="#154"> 154: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_eanupc(<span class="php-var">$code</span>, <span class="php-num">8</span>);
</span><span id="155" class="l"><a class="l" href="#155"> 155: </a>                <span class="php-keyword1">break</span>;
</span><span id="156" class="l"><a class="l" href="#156"> 156: </a>            }
</span><span id="157" class="l"><a class="l" href="#157"> 157: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'EAN13'</span>: { <span class="php-comment">// EAN 13</span>
</span><span id="158" class="l"><a class="l" href="#158"> 158: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_eanupc(<span class="php-var">$code</span>, <span class="php-num">13</span>);
</span><span id="159" class="l"><a class="l" href="#159"> 159: </a>                <span class="php-keyword1">break</span>;
</span><span id="160" class="l"><a class="l" href="#160"> 160: </a>            }
</span><span id="161" class="l"><a class="l" href="#161"> 161: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'UPCA'</span>: { <span class="php-comment">// UPC-A</span>
</span><span id="162" class="l"><a class="l" href="#162"> 162: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_eanupc(<span class="php-var">$code</span>, <span class="php-num">12</span>);
</span><span id="163" class="l"><a class="l" href="#163"> 163: </a>                <span class="php-keyword1">break</span>;
</span><span id="164" class="l"><a class="l" href="#164"> 164: </a>            }
</span><span id="165" class="l"><a class="l" href="#165"> 165: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'UPCE'</span>: { <span class="php-comment">// UPC-E</span>
</span><span id="166" class="l"><a class="l" href="#166"> 166: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_eanupc(<span class="php-var">$code</span>, <span class="php-num">6</span>);
</span><span id="167" class="l"><a class="l" href="#167"> 167: </a>                <span class="php-keyword1">break</span>;
</span><span id="168" class="l"><a class="l" href="#168"> 168: </a>            }
</span><span id="169" class="l"><a class="l" href="#169"> 169: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'MSI'</span>: { <span class="php-comment">// MSI (Variation of Plessey code)</span>
</span><span id="170" class="l"><a class="l" href="#170"> 170: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_msi(<span class="php-var">$code</span>, <span class="php-keyword1">false</span>);
</span><span id="171" class="l"><a class="l" href="#171"> 171: </a>                <span class="php-keyword1">break</span>;
</span><span id="172" class="l"><a class="l" href="#172"> 172: </a>            }
</span><span id="173" class="l"><a class="l" href="#173"> 173: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'MSI+'</span>: { <span class="php-comment">// MSI + CHECKSUM (modulo 11)</span>
</span><span id="174" class="l"><a class="l" href="#174"> 174: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_msi(<span class="php-var">$code</span>, <span class="php-keyword1">true</span>);
</span><span id="175" class="l"><a class="l" href="#175"> 175: </a>                <span class="php-keyword1">break</span>;
</span><span id="176" class="l"><a class="l" href="#176"> 176: </a>            }
</span><span id="177" class="l"><a class="l" href="#177"> 177: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'POSTNET'</span>: { <span class="php-comment">// POSTNET</span>
</span><span id="178" class="l"><a class="l" href="#178"> 178: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_postnet(<span class="php-var">$code</span>, <span class="php-keyword1">false</span>);
</span><span id="179" class="l"><a class="l" href="#179"> 179: </a>                <span class="php-keyword1">break</span>;
</span><span id="180" class="l"><a class="l" href="#180"> 180: </a>            }
</span><span id="181" class="l"><a class="l" href="#181"> 181: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'PLANET'</span>: { <span class="php-comment">// PLANET</span>
</span><span id="182" class="l"><a class="l" href="#182"> 182: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_postnet(<span class="php-var">$code</span>, <span class="php-keyword1">true</span>);
</span><span id="183" class="l"><a class="l" href="#183"> 183: </a>                <span class="php-keyword1">break</span>;
</span><span id="184" class="l"><a class="l" href="#184"> 184: </a>            }
</span><span id="185" class="l"><a class="l" href="#185"> 185: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'RMS4CC'</span>: { <span class="php-comment">// RMS4CC (Royal Mail 4-state Customer Code) - CBC (Customer Bar Code)</span>
</span><span id="186" class="l"><a class="l" href="#186"> 186: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_rms4cc(<span class="php-var">$code</span>, <span class="php-keyword1">false</span>);
</span><span id="187" class="l"><a class="l" href="#187"> 187: </a>                <span class="php-keyword1">break</span>;
</span><span id="188" class="l"><a class="l" href="#188"> 188: </a>            }
</span><span id="189" class="l"><a class="l" href="#189"> 189: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'KIX'</span>: { <span class="php-comment">// KIX (Klant index - Customer index)</span>
</span><span id="190" class="l"><a class="l" href="#190"> 190: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_rms4cc(<span class="php-var">$code</span>, <span class="php-keyword1">true</span>);
</span><span id="191" class="l"><a class="l" href="#191"> 191: </a>                <span class="php-keyword1">break</span>;
</span><span id="192" class="l"><a class="l" href="#192"> 192: </a>            }
</span><span id="193" class="l"><a class="l" href="#193"> 193: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'IMB'</span>: { <span class="php-comment">// IMB - Intelligent Mail Barcode - Onecode - USPS-B-3200</span>
</span><span id="194" class="l"><a class="l" href="#194"> 194: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_imb(<span class="php-var">$code</span>);
</span><span id="195" class="l"><a class="l" href="#195"> 195: </a>                <span class="php-keyword1">break</span>;
</span><span id="196" class="l"><a class="l" href="#196"> 196: </a>            }
</span><span id="197" class="l"><a class="l" href="#197"> 197: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'CODABAR'</span>: { <span class="php-comment">// CODABAR</span>
</span><span id="198" class="l"><a class="l" href="#198"> 198: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_codabar(<span class="php-var">$code</span>);
</span><span id="199" class="l"><a class="l" href="#199"> 199: </a>                <span class="php-keyword1">break</span>;
</span><span id="200" class="l"><a class="l" href="#200"> 200: </a>            }
</span><span id="201" class="l"><a class="l" href="#201"> 201: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'CODE11'</span>: { <span class="php-comment">// CODE 11</span>
</span><span id="202" class="l"><a class="l" href="#202"> 202: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_code11(<span class="php-var">$code</span>);
</span><span id="203" class="l"><a class="l" href="#203"> 203: </a>                <span class="php-keyword1">break</span>;
</span><span id="204" class="l"><a class="l" href="#204"> 204: </a>            }
</span><span id="205" class="l"><a class="l" href="#205"> 205: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'PHARMA'</span>: { <span class="php-comment">// PHARMACODE</span>
</span><span id="206" class="l"><a class="l" href="#206"> 206: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_pharmacode(<span class="php-var">$code</span>);
</span><span id="207" class="l"><a class="l" href="#207"> 207: </a>                <span class="php-keyword1">break</span>;
</span><span id="208" class="l"><a class="l" href="#208"> 208: </a>            }
</span><span id="209" class="l"><a class="l" href="#209"> 209: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'PHARMA2T'</span>: { <span class="php-comment">// PHARMACODE TWO-TRACKS</span>
</span><span id="210" class="l"><a class="l" href="#210"> 210: </a>                <span class="php-var">$arrcode</span> = <span class="php-var">$this</span>-&gt;barcode_pharmacode2t(<span class="php-var">$code</span>);
</span><span id="211" class="l"><a class="l" href="#211"> 211: </a>                <span class="php-keyword1">break</span>;
</span><span id="212" class="l"><a class="l" href="#212"> 212: </a>            }
</span><span id="213" class="l"><a class="l" href="#213"> 213: </a>            <span class="php-keyword1">default</span>: {
</span><span id="214" class="l"><a class="l" href="#214"> 214: </a>                <span class="php-var">$this</span>-&gt;barcode_array = <span class="php-keyword1">false</span>;
</span><span id="215" class="l"><a class="l" href="#215"> 215: </a>                <span class="php-var">$arrcode</span> = <span class="php-keyword1">false</span>;
</span><span id="216" class="l"><a class="l" href="#216"> 216: </a>                <span class="php-keyword1">break</span>;
</span><span id="217" class="l"><a class="l" href="#217"> 217: </a>            }
</span><span id="218" class="l"><a class="l" href="#218"> 218: </a>        }
</span><span id="219" class="l"><a class="l" href="#219"> 219: </a>        <span class="php-var">$this</span>-&gt;barcode_array = <span class="php-var">$arrcode</span>;
</span><span id="220" class="l"><a class="l" href="#220"> 220: </a>    }
</span><span id="221" class="l"><a class="l" href="#221"> 221: </a>
</span><span id="222" class="l"><a class="l" href="#222"> 222: </a>    <span class="php-comment">/**
</span></span><span id="223" class="l"><a class="l" href="#223"> 223: </a><span class="php-comment">     * CODE 39 - ANSI MH10.8M-1983 - USD-3 - 3 of 9.
</span></span><span id="224" class="l"><a class="l" href="#224"> 224: </a><span class="php-comment">     * General-purpose code in very wide use world-wide
</span></span><span id="225" class="l"><a class="l" href="#225"> 225: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="226" class="l"><a class="l" href="#226"> 226: </a><span class="php-comment">     * @param boolean $checksum if true add a checksum to the code
</span></span><span id="227" class="l"><a class="l" href="#227"> 227: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="228" class="l"><a class="l" href="#228"> 228: </a><span class="php-comment">     * @access protected
</span></span><span id="229" class="l"><a class="l" href="#229"> 229: </a><span class="php-comment">     */</span>
</span><span id="230" class="l"><a class="l" href="#230"> 230: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_code39" href="#_barcode_code39">barcode_code39</a>(<span class="php-var">$code</span>, <span class="php-var">$extended</span>=<span class="php-keyword1">false</span>, <span class="php-var">$checksum</span>=<span class="php-keyword1">false</span>) {
</span><span id="231" class="l"><a class="l" href="#231"> 231: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'0'</span>] = <span class="php-quote">'111221211'</span>;
</span><span id="232" class="l"><a class="l" href="#232"> 232: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'1'</span>] = <span class="php-quote">'211211112'</span>;
</span><span id="233" class="l"><a class="l" href="#233"> 233: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'2'</span>] = <span class="php-quote">'112211112'</span>;
</span><span id="234" class="l"><a class="l" href="#234"> 234: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'3'</span>] = <span class="php-quote">'212211111'</span>;
</span><span id="235" class="l"><a class="l" href="#235"> 235: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'4'</span>] = <span class="php-quote">'111221112'</span>;
</span><span id="236" class="l"><a class="l" href="#236"> 236: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'5'</span>] = <span class="php-quote">'211221111'</span>;
</span><span id="237" class="l"><a class="l" href="#237"> 237: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'6'</span>] = <span class="php-quote">'112221111'</span>;
</span><span id="238" class="l"><a class="l" href="#238"> 238: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'7'</span>] = <span class="php-quote">'111211212'</span>;
</span><span id="239" class="l"><a class="l" href="#239"> 239: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'8'</span>] = <span class="php-quote">'211211211'</span>;
</span><span id="240" class="l"><a class="l" href="#240"> 240: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'9'</span>] = <span class="php-quote">'112211211'</span>;
</span><span id="241" class="l"><a class="l" href="#241"> 241: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'A'</span>] = <span class="php-quote">'211112112'</span>;
</span><span id="242" class="l"><a class="l" href="#242"> 242: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'B'</span>] = <span class="php-quote">'112112112'</span>;
</span><span id="243" class="l"><a class="l" href="#243"> 243: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'C'</span>] = <span class="php-quote">'212112111'</span>;
</span><span id="244" class="l"><a class="l" href="#244"> 244: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'D'</span>] = <span class="php-quote">'111122112'</span>;
</span><span id="245" class="l"><a class="l" href="#245"> 245: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'E'</span>] = <span class="php-quote">'211122111'</span>;
</span><span id="246" class="l"><a class="l" href="#246"> 246: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'F'</span>] = <span class="php-quote">'112122111'</span>;
</span><span id="247" class="l"><a class="l" href="#247"> 247: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'G'</span>] = <span class="php-quote">'111112212'</span>;
</span><span id="248" class="l"><a class="l" href="#248"> 248: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'H'</span>] = <span class="php-quote">'211112211'</span>;
</span><span id="249" class="l"><a class="l" href="#249"> 249: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'I'</span>] = <span class="php-quote">'112112211'</span>;
</span><span id="250" class="l"><a class="l" href="#250"> 250: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'J'</span>] = <span class="php-quote">'111122211'</span>;
</span><span id="251" class="l"><a class="l" href="#251"> 251: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'K'</span>] = <span class="php-quote">'211111122'</span>;
</span><span id="252" class="l"><a class="l" href="#252"> 252: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'L'</span>] = <span class="php-quote">'112111122'</span>;
</span><span id="253" class="l"><a class="l" href="#253"> 253: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'M'</span>] = <span class="php-quote">'212111121'</span>;
</span><span id="254" class="l"><a class="l" href="#254"> 254: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'N'</span>] = <span class="php-quote">'111121122'</span>;
</span><span id="255" class="l"><a class="l" href="#255"> 255: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'O'</span>] = <span class="php-quote">'211121121'</span>;
</span><span id="256" class="l"><a class="l" href="#256"> 256: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'P'</span>] = <span class="php-quote">'112121121'</span>;
</span><span id="257" class="l"><a class="l" href="#257"> 257: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'Q'</span>] = <span class="php-quote">'111111222'</span>;
</span><span id="258" class="l"><a class="l" href="#258"> 258: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'R'</span>] = <span class="php-quote">'211111221'</span>;
</span><span id="259" class="l"><a class="l" href="#259"> 259: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'S'</span>] = <span class="php-quote">'112111221'</span>;
</span><span id="260" class="l"><a class="l" href="#260"> 260: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'T'</span>] = <span class="php-quote">'111121221'</span>;
</span><span id="261" class="l"><a class="l" href="#261"> 261: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'U'</span>] = <span class="php-quote">'221111112'</span>;
</span><span id="262" class="l"><a class="l" href="#262"> 262: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'V'</span>] = <span class="php-quote">'122111112'</span>;
</span><span id="263" class="l"><a class="l" href="#263"> 263: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'W'</span>] = <span class="php-quote">'222111111'</span>;
</span><span id="264" class="l"><a class="l" href="#264"> 264: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'X'</span>] = <span class="php-quote">'121121112'</span>;
</span><span id="265" class="l"><a class="l" href="#265"> 265: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'Y'</span>] = <span class="php-quote">'221121111'</span>;
</span><span id="266" class="l"><a class="l" href="#266"> 266: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'Z'</span>] = <span class="php-quote">'122121111'</span>;
</span><span id="267" class="l"><a class="l" href="#267"> 267: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'-'</span>] = <span class="php-quote">'121111212'</span>;
</span><span id="268" class="l"><a class="l" href="#268"> 268: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'.'</span>] = <span class="php-quote">'221111211'</span>;
</span><span id="269" class="l"><a class="l" href="#269"> 269: </a>        <span class="php-var">$chr</span>[<span class="php-quote">' '</span>] = <span class="php-quote">'122111211'</span>;
</span><span id="270" class="l"><a class="l" href="#270"> 270: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'$'</span>] = <span class="php-quote">'121212111'</span>;
</span><span id="271" class="l"><a class="l" href="#271"> 271: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'/'</span>] = <span class="php-quote">'121211121'</span>;
</span><span id="272" class="l"><a class="l" href="#272"> 272: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'+'</span>] = <span class="php-quote">'121112121'</span>;
</span><span id="273" class="l"><a class="l" href="#273"> 273: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'%'</span>] = <span class="php-quote">'111212121'</span>;
</span><span id="274" class="l"><a class="l" href="#274"> 274: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'*'</span>] = <span class="php-quote">'121121211'</span>;
</span><span id="275" class="l"><a class="l" href="#275"> 275: </a>
</span><span id="276" class="l"><a class="l" href="#276"> 276: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">strtoupper</span>(<span class="php-var">$code</span>);
</span><span id="277" class="l"><a class="l" href="#277"> 277: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$extended</span>) {
</span><span id="278" class="l"><a class="l" href="#278"> 278: </a>            <span class="php-comment">// extended mode</span>
</span><span id="279" class="l"><a class="l" href="#279"> 279: </a>            <span class="php-var">$code</span> = <span class="php-var">$this</span>-&gt;encode_code39_ext(<span class="php-var">$code</span>);
</span><span id="280" class="l"><a class="l" href="#280"> 280: </a>        }
</span><span id="281" class="l"><a class="l" href="#281"> 281: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$code</span> === <span class="php-keyword1">false</span>) {
</span><span id="282" class="l"><a class="l" href="#282"> 282: </a>            <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="283" class="l"><a class="l" href="#283"> 283: </a>        }
</span><span id="284" class="l"><a class="l" href="#284"> 284: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$checksum</span>) {
</span><span id="285" class="l"><a class="l" href="#285"> 285: </a>            <span class="php-comment">// checksum</span>
</span><span id="286" class="l"><a class="l" href="#286"> 286: </a>            <span class="php-var">$code</span> .= <span class="php-var">$this</span>-&gt;checksum_code39(<span class="php-var">$code</span>);
</span><span id="287" class="l"><a class="l" href="#287"> 287: </a>        }
</span><span id="288" class="l"><a class="l" href="#288"> 288: </a>        <span class="php-comment">// add start and stop codes</span>
</span><span id="289" class="l"><a class="l" href="#289"> 289: </a>        <span class="php-var">$code</span> = <span class="php-quote">'*'</span>.<span class="php-var">$code</span>.<span class="php-quote">'*'</span>;
</span><span id="290" class="l"><a class="l" href="#290"> 290: </a>
</span><span id="291" class="l"><a class="l" href="#291"> 291: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="292" class="l"><a class="l" href="#292"> 292: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="293" class="l"><a class="l" href="#293"> 293: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="294" class="l"><a class="l" href="#294"> 294: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; ++<span class="php-var">$i</span>) {
</span><span id="295" class="l"><a class="l" href="#295"> 295: </a>            <span class="php-var">$char</span> = <span class="php-var">$code</span>{<span class="php-var">$i</span>};
</span><span id="296" class="l"><a class="l" href="#296"> 296: </a>            <span class="php-keyword1">if</span>(!<span class="php-keyword1">isset</span>(<span class="php-var">$chr</span>[<span class="php-var">$char</span>])) {
</span><span id="297" class="l"><a class="l" href="#297"> 297: </a>                <span class="php-comment">// invalid character</span>
</span><span id="298" class="l"><a class="l" href="#298"> 298: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="299" class="l"><a class="l" href="#299"> 299: </a>            }
</span><span id="300" class="l"><a class="l" href="#300"> 300: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$j</span> = <span class="php-num">0</span>; <span class="php-var">$j</span> &lt; <span class="php-num">9</span>; ++<span class="php-var">$j</span>) {
</span><span id="301" class="l"><a class="l" href="#301"> 301: </a>                <span class="php-keyword1">if</span> ((<span class="php-var">$j</span> % <span class="php-num">2</span>) == <span class="php-num">0</span>) {
</span><span id="302" class="l"><a class="l" href="#302"> 302: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">true</span>; <span class="php-comment">// bar</span>
</span><span id="303" class="l"><a class="l" href="#303"> 303: </a>                } <span class="php-keyword1">else</span> {
</span><span id="304" class="l"><a class="l" href="#304"> 304: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">false</span>; <span class="php-comment">// space</span>
</span><span id="305" class="l"><a class="l" href="#305"> 305: </a>                }
</span><span id="306" class="l"><a class="l" href="#306"> 306: </a>                <span class="php-var">$w</span> = <span class="php-var">$chr</span>[<span class="php-var">$char</span>]{<span class="php-var">$j</span>};
</span><span id="307" class="l"><a class="l" href="#307"> 307: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-var">$t</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-var">$w</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="308" class="l"><a class="l" href="#308"> 308: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-var">$w</span>;
</span><span id="309" class="l"><a class="l" href="#309"> 309: </a>                ++<span class="php-var">$k</span>;
</span><span id="310" class="l"><a class="l" href="#310"> 310: </a>            }
</span><span id="311" class="l"><a class="l" href="#311"> 311: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-keyword1">false</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="312" class="l"><a class="l" href="#312"> 312: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">1</span>;
</span><span id="313" class="l"><a class="l" href="#313"> 313: </a>            ++<span class="php-var">$k</span>;
</span><span id="314" class="l"><a class="l" href="#314"> 314: </a>        }
</span><span id="315" class="l"><a class="l" href="#315"> 315: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="316" class="l"><a class="l" href="#316"> 316: </a>    }
</span><span id="317" class="l"><a class="l" href="#317"> 317: </a>
</span><span id="318" class="l"><a class="l" href="#318"> 318: </a>    <span class="php-comment">/**
</span></span><span id="319" class="l"><a class="l" href="#319"> 319: </a><span class="php-comment">     * Encode a string to be used for CODE 39 Extended mode.
</span></span><span id="320" class="l"><a class="l" href="#320"> 320: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="321" class="l"><a class="l" href="#321"> 321: </a><span class="php-comment">     * @return encoded string.
</span></span><span id="322" class="l"><a class="l" href="#322"> 322: </a><span class="php-comment">     * @access protected
</span></span><span id="323" class="l"><a class="l" href="#323"> 323: </a><span class="php-comment">     */</span>
</span><span id="324" class="l"><a class="l" href="#324"> 324: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_encode_code39_ext" href="#_encode_code39_ext">encode_code39_ext</a>(<span class="php-var">$code</span>) {
</span><span id="325" class="l"><a class="l" href="#325"> 325: </a>        <span class="php-var">$encode</span> = <span class="php-keyword1">array</span>(
</span><span id="326" class="l"><a class="l" href="#326"> 326: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">0</span>) =&gt; <span class="php-quote">'%U'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">1</span>) =&gt; <span class="php-quote">'$A'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">2</span>) =&gt; <span class="php-quote">'$B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">3</span>) =&gt; <span class="php-quote">'$C'</span>,
</span><span id="327" class="l"><a class="l" href="#327"> 327: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">4</span>) =&gt; <span class="php-quote">'$D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">5</span>) =&gt; <span class="php-quote">'$E'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">6</span>) =&gt; <span class="php-quote">'$F'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">7</span>) =&gt; <span class="php-quote">'$G'</span>,
</span><span id="328" class="l"><a class="l" href="#328"> 328: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">8</span>) =&gt; <span class="php-quote">'$H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">9</span>) =&gt; <span class="php-quote">'$I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">10</span>) =&gt; <span class="php-quote">'$J'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">11</span>) =&gt; <span class="php-quote">'K'</span>,
</span><span id="329" class="l"><a class="l" href="#329"> 329: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">12</span>) =&gt; <span class="php-quote">'$L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">13</span>) =&gt; <span class="php-quote">'$M'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">14</span>) =&gt; <span class="php-quote">'$N'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">15</span>) =&gt; <span class="php-quote">'$O'</span>,
</span><span id="330" class="l"><a class="l" href="#330"> 330: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">16</span>) =&gt; <span class="php-quote">'$P'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">17</span>) =&gt; <span class="php-quote">'$Q'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">18</span>) =&gt; <span class="php-quote">'$R'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">19</span>) =&gt; <span class="php-quote">'$S'</span>,
</span><span id="331" class="l"><a class="l" href="#331"> 331: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">20</span>) =&gt; <span class="php-quote">'$T'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">21</span>) =&gt; <span class="php-quote">'$U'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">22</span>) =&gt; <span class="php-quote">'$V'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">23</span>) =&gt; <span class="php-quote">'$W'</span>,
</span><span id="332" class="l"><a class="l" href="#332"> 332: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">24</span>) =&gt; <span class="php-quote">'$X'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">25</span>) =&gt; <span class="php-quote">'$Y'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">26</span>) =&gt; <span class="php-quote">'$Z'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">27</span>) =&gt; <span class="php-quote">'%A'</span>,
</span><span id="333" class="l"><a class="l" href="#333"> 333: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">28</span>) =&gt; <span class="php-quote">'%B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">29</span>) =&gt; <span class="php-quote">'%C'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">30</span>) =&gt; <span class="php-quote">'%D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">31</span>) =&gt; <span class="php-quote">'%E'</span>,
</span><span id="334" class="l"><a class="l" href="#334"> 334: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">32</span>) =&gt; <span class="php-quote">' '</span>, <span class="php-keyword2">chr</span>(<span class="php-num">33</span>) =&gt; <span class="php-quote">'/A'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">34</span>) =&gt; <span class="php-quote">'/B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">35</span>) =&gt; <span class="php-quote">'/C'</span>,
</span><span id="335" class="l"><a class="l" href="#335"> 335: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">36</span>) =&gt; <span class="php-quote">'/D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">37</span>) =&gt; <span class="php-quote">'/E'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">38</span>) =&gt; <span class="php-quote">'/F'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">39</span>) =&gt; <span class="php-quote">'/G'</span>,
</span><span id="336" class="l"><a class="l" href="#336"> 336: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">40</span>) =&gt; <span class="php-quote">'/H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">41</span>) =&gt; <span class="php-quote">'/I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">42</span>) =&gt; <span class="php-quote">'/J'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">43</span>) =&gt; <span class="php-quote">'/K'</span>,
</span><span id="337" class="l"><a class="l" href="#337"> 337: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">44</span>) =&gt; <span class="php-quote">'/L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">45</span>) =&gt; <span class="php-quote">'-'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">46</span>) =&gt; <span class="php-quote">'.'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">47</span>) =&gt; <span class="php-quote">'/O'</span>,
</span><span id="338" class="l"><a class="l" href="#338"> 338: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">48</span>) =&gt; <span class="php-quote">'0'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">49</span>) =&gt; <span class="php-quote">'1'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">50</span>) =&gt; <span class="php-quote">'2'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">51</span>) =&gt; <span class="php-quote">'3'</span>,
</span><span id="339" class="l"><a class="l" href="#339"> 339: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">52</span>) =&gt; <span class="php-quote">'4'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">53</span>) =&gt; <span class="php-quote">'5'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">54</span>) =&gt; <span class="php-quote">'6'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">55</span>) =&gt; <span class="php-quote">'7'</span>,
</span><span id="340" class="l"><a class="l" href="#340"> 340: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">56</span>) =&gt; <span class="php-quote">'8'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">57</span>) =&gt; <span class="php-quote">'9'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">58</span>) =&gt; <span class="php-quote">'/Z'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">59</span>) =&gt; <span class="php-quote">'%F'</span>,
</span><span id="341" class="l"><a class="l" href="#341"> 341: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">60</span>) =&gt; <span class="php-quote">'%G'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">61</span>) =&gt; <span class="php-quote">'%H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">62</span>) =&gt; <span class="php-quote">'%I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">63</span>) =&gt; <span class="php-quote">'%J'</span>,
</span><span id="342" class="l"><a class="l" href="#342"> 342: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">64</span>) =&gt; <span class="php-quote">'%V'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">65</span>) =&gt; <span class="php-quote">'A'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">66</span>) =&gt; <span class="php-quote">'B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">67</span>) =&gt; <span class="php-quote">'C'</span>,
</span><span id="343" class="l"><a class="l" href="#343"> 343: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">68</span>) =&gt; <span class="php-quote">'D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">69</span>) =&gt; <span class="php-quote">'E'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">70</span>) =&gt; <span class="php-quote">'F'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">71</span>) =&gt; <span class="php-quote">'G'</span>,
</span><span id="344" class="l"><a class="l" href="#344"> 344: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">72</span>) =&gt; <span class="php-quote">'H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">73</span>) =&gt; <span class="php-quote">'I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">74</span>) =&gt; <span class="php-quote">'J'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">75</span>) =&gt; <span class="php-quote">'K'</span>,
</span><span id="345" class="l"><a class="l" href="#345"> 345: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">76</span>) =&gt; <span class="php-quote">'L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">77</span>) =&gt; <span class="php-quote">'M'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">78</span>) =&gt; <span class="php-quote">'N'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">79</span>) =&gt; <span class="php-quote">'O'</span>,
</span><span id="346" class="l"><a class="l" href="#346"> 346: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">80</span>) =&gt; <span class="php-quote">'P'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">81</span>) =&gt; <span class="php-quote">'Q'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">82</span>) =&gt; <span class="php-quote">'R'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">83</span>) =&gt; <span class="php-quote">'S'</span>,
</span><span id="347" class="l"><a class="l" href="#347"> 347: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">84</span>) =&gt; <span class="php-quote">'T'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">85</span>) =&gt; <span class="php-quote">'U'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">86</span>) =&gt; <span class="php-quote">'V'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">87</span>) =&gt; <span class="php-quote">'W'</span>,
</span><span id="348" class="l"><a class="l" href="#348"> 348: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">88</span>) =&gt; <span class="php-quote">'X'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">89</span>) =&gt; <span class="php-quote">'Y'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">90</span>) =&gt; <span class="php-quote">'Z'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">91</span>) =&gt; <span class="php-quote">'%K'</span>,
</span><span id="349" class="l"><a class="l" href="#349"> 349: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">92</span>) =&gt; <span class="php-quote">'%L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">93</span>) =&gt; <span class="php-quote">'%M'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">94</span>) =&gt; <span class="php-quote">'%N'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">95</span>) =&gt; <span class="php-quote">'%O'</span>,
</span><span id="350" class="l"><a class="l" href="#350"> 350: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">96</span>) =&gt; <span class="php-quote">'%W'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">97</span>) =&gt; <span class="php-quote">'+A'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">98</span>) =&gt; <span class="php-quote">'+B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">99</span>) =&gt; <span class="php-quote">'+C'</span>,
</span><span id="351" class="l"><a class="l" href="#351"> 351: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">100</span>) =&gt; <span class="php-quote">'+D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">101</span>) =&gt; <span class="php-quote">'+E'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">102</span>) =&gt; <span class="php-quote">'+F'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">103</span>) =&gt; <span class="php-quote">'+G'</span>,
</span><span id="352" class="l"><a class="l" href="#352"> 352: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">104</span>) =&gt; <span class="php-quote">'+H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">105</span>) =&gt; <span class="php-quote">'+I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">106</span>) =&gt; <span class="php-quote">'+J'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">107</span>) =&gt; <span class="php-quote">'+K'</span>,
</span><span id="353" class="l"><a class="l" href="#353"> 353: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">108</span>) =&gt; <span class="php-quote">'+L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">109</span>) =&gt; <span class="php-quote">'+M'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">110</span>) =&gt; <span class="php-quote">'+N'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">111</span>) =&gt; <span class="php-quote">'+O'</span>,
</span><span id="354" class="l"><a class="l" href="#354"> 354: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">112</span>) =&gt; <span class="php-quote">'+P'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">113</span>) =&gt; <span class="php-quote">'+Q'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">114</span>) =&gt; <span class="php-quote">'+R'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">115</span>) =&gt; <span class="php-quote">'+S'</span>,
</span><span id="355" class="l"><a class="l" href="#355"> 355: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">116</span>) =&gt; <span class="php-quote">'+T'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">117</span>) =&gt; <span class="php-quote">'+U'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">118</span>) =&gt; <span class="php-quote">'+V'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">119</span>) =&gt; <span class="php-quote">'+W'</span>,
</span><span id="356" class="l"><a class="l" href="#356"> 356: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">120</span>) =&gt; <span class="php-quote">'+X'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">121</span>) =&gt; <span class="php-quote">'+Y'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">122</span>) =&gt; <span class="php-quote">'+Z'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">123</span>) =&gt; <span class="php-quote">'%P'</span>,
</span><span id="357" class="l"><a class="l" href="#357"> 357: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">124</span>) =&gt; <span class="php-quote">'%Q'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">125</span>) =&gt; <span class="php-quote">'%R'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">126</span>) =&gt; <span class="php-quote">'%S'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">127</span>) =&gt; <span class="php-quote">'%T'</span>);
</span><span id="358" class="l"><a class="l" href="#358"> 358: </a>        <span class="php-var">$code_ext</span> = <span class="php-quote">''</span>;
</span><span id="359" class="l"><a class="l" href="#359"> 359: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="360" class="l"><a class="l" href="#360"> 360: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span> ; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; ++<span class="php-var">$i</span>) {
</span><span id="361" class="l"><a class="l" href="#361"> 361: </a>            <span class="php-keyword1">if</span> (<span class="php-keyword2">ord</span>(<span class="php-var">$code</span>{<span class="php-var">$i</span>}) &gt; <span class="php-num">127</span>) {
</span><span id="362" class="l"><a class="l" href="#362"> 362: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="363" class="l"><a class="l" href="#363"> 363: </a>            }
</span><span id="364" class="l"><a class="l" href="#364"> 364: </a>            <span class="php-var">$code_ext</span> .= <span class="php-var">$encode</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}];
</span><span id="365" class="l"><a class="l" href="#365"> 365: </a>        }
</span><span id="366" class="l"><a class="l" href="#366"> 366: </a>        <span class="php-keyword1">return</span> <span class="php-var">$code_ext</span>;
</span><span id="367" class="l"><a class="l" href="#367"> 367: </a>    }
</span><span id="368" class="l"><a class="l" href="#368"> 368: </a>
</span><span id="369" class="l"><a class="l" href="#369"> 369: </a>    <span class="php-comment">/**
</span></span><span id="370" class="l"><a class="l" href="#370"> 370: </a><span class="php-comment">     * Calculate CODE 39 checksum (modulo 43).
</span></span><span id="371" class="l"><a class="l" href="#371"> 371: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="372" class="l"><a class="l" href="#372"> 372: </a><span class="php-comment">     * @return char checksum.
</span></span><span id="373" class="l"><a class="l" href="#373"> 373: </a><span class="php-comment">     * @access protected
</span></span><span id="374" class="l"><a class="l" href="#374"> 374: </a><span class="php-comment">     */</span>
</span><span id="375" class="l"><a class="l" href="#375"> 375: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_checksum_code39" href="#_checksum_code39">checksum_code39</a>(<span class="php-var">$code</span>) {
</span><span id="376" class="l"><a class="l" href="#376"> 376: </a>        <span class="php-var">$chars</span> = <span class="php-keyword1">array</span>(
</span><span id="377" class="l"><a class="l" href="#377"> 377: </a>            <span class="php-quote">'0'</span>, <span class="php-quote">'1'</span>, <span class="php-quote">'2'</span>, <span class="php-quote">'3'</span>, <span class="php-quote">'4'</span>, <span class="php-quote">'5'</span>, <span class="php-quote">'6'</span>, <span class="php-quote">'7'</span>, <span class="php-quote">'8'</span>, <span class="php-quote">'9'</span>,
</span><span id="378" class="l"><a class="l" href="#378"> 378: </a>            <span class="php-quote">'A'</span>, <span class="php-quote">'B'</span>, <span class="php-quote">'C'</span>, <span class="php-quote">'D'</span>, <span class="php-quote">'E'</span>, <span class="php-quote">'F'</span>, <span class="php-quote">'G'</span>, <span class="php-quote">'H'</span>, <span class="php-quote">'I'</span>, <span class="php-quote">'J'</span>, <span class="php-quote">'K'</span>,
</span><span id="379" class="l"><a class="l" href="#379"> 379: </a>            <span class="php-quote">'L'</span>, <span class="php-quote">'M'</span>, <span class="php-quote">'N'</span>, <span class="php-quote">'O'</span>, <span class="php-quote">'P'</span>, <span class="php-quote">'Q'</span>, <span class="php-quote">'R'</span>, <span class="php-quote">'S'</span>, <span class="php-quote">'T'</span>, <span class="php-quote">'U'</span>, <span class="php-quote">'V'</span>,
</span><span id="380" class="l"><a class="l" href="#380"> 380: </a>            <span class="php-quote">'W'</span>, <span class="php-quote">'X'</span>, <span class="php-quote">'Y'</span>, <span class="php-quote">'Z'</span>, <span class="php-quote">'-'</span>, <span class="php-quote">'.'</span>, <span class="php-quote">' '</span>, <span class="php-quote">'$'</span>, <span class="php-quote">'/'</span>, <span class="php-quote">'+'</span>, <span class="php-quote">'%'</span>);
</span><span id="381" class="l"><a class="l" href="#381"> 381: </a>        <span class="php-var">$sum</span> = <span class="php-num">0</span>;
</span><span id="382" class="l"><a class="l" href="#382"> 382: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="383" class="l"><a class="l" href="#383"> 383: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span> ; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; ++<span class="php-var">$i</span>) {
</span><span id="384" class="l"><a class="l" href="#384"> 384: </a>            <span class="php-var">$k</span> = <span class="php-keyword2">array_keys</span>(<span class="php-var">$chars</span>, <span class="php-var">$code</span>{<span class="php-var">$i</span>});
</span><span id="385" class="l"><a class="l" href="#385"> 385: </a>            <span class="php-var">$sum</span> += <span class="php-var">$k</span>[<span class="php-num">0</span>];
</span><span id="386" class="l"><a class="l" href="#386"> 386: </a>        }
</span><span id="387" class="l"><a class="l" href="#387"> 387: </a>        <span class="php-var">$j</span> = (<span class="php-var">$sum</span> % <span class="php-num">43</span>);
</span><span id="388" class="l"><a class="l" href="#388"> 388: </a>        <span class="php-keyword1">return</span> <span class="php-var">$chars</span>[<span class="php-var">$j</span>];
</span><span id="389" class="l"><a class="l" href="#389"> 389: </a>    }
</span><span id="390" class="l"><a class="l" href="#390"> 390: </a>
</span><span id="391" class="l"><a class="l" href="#391"> 391: </a>    <span class="php-comment">/**
</span></span><span id="392" class="l"><a class="l" href="#392"> 392: </a><span class="php-comment">     * CODE 93 - USS-93
</span></span><span id="393" class="l"><a class="l" href="#393"> 393: </a><span class="php-comment">     * Compact code similar to Code 39
</span></span><span id="394" class="l"><a class="l" href="#394"> 394: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="395" class="l"><a class="l" href="#395"> 395: </a><span class="php-comment">     * @param boolean $checksum if true add a checksum to the code
</span></span><span id="396" class="l"><a class="l" href="#396"> 396: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="397" class="l"><a class="l" href="#397"> 397: </a><span class="php-comment">     * @access protected
</span></span><span id="398" class="l"><a class="l" href="#398"> 398: </a><span class="php-comment">     */</span>
</span><span id="399" class="l"><a class="l" href="#399"> 399: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_code93" href="#_barcode_code93">barcode_code93</a>(<span class="php-var">$code</span>) {
</span><span id="400" class="l"><a class="l" href="#400"> 400: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'0'</span>] = <span class="php-quote">'131112'</span>;
</span><span id="401" class="l"><a class="l" href="#401"> 401: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'1'</span>] = <span class="php-quote">'111213'</span>;
</span><span id="402" class="l"><a class="l" href="#402"> 402: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'2'</span>] = <span class="php-quote">'111312'</span>;
</span><span id="403" class="l"><a class="l" href="#403"> 403: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'3'</span>] = <span class="php-quote">'111411'</span>;
</span><span id="404" class="l"><a class="l" href="#404"> 404: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'4'</span>] = <span class="php-quote">'121113'</span>;
</span><span id="405" class="l"><a class="l" href="#405"> 405: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'5'</span>] = <span class="php-quote">'121212'</span>;
</span><span id="406" class="l"><a class="l" href="#406"> 406: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'6'</span>] = <span class="php-quote">'121311'</span>;
</span><span id="407" class="l"><a class="l" href="#407"> 407: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'7'</span>] = <span class="php-quote">'111114'</span>;
</span><span id="408" class="l"><a class="l" href="#408"> 408: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'8'</span>] = <span class="php-quote">'131211'</span>;
</span><span id="409" class="l"><a class="l" href="#409"> 409: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'9'</span>] = <span class="php-quote">'141111'</span>;
</span><span id="410" class="l"><a class="l" href="#410"> 410: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'A'</span>] = <span class="php-quote">'211113'</span>;
</span><span id="411" class="l"><a class="l" href="#411"> 411: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'B'</span>] = <span class="php-quote">'211212'</span>;
</span><span id="412" class="l"><a class="l" href="#412"> 412: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'C'</span>] = <span class="php-quote">'211311'</span>;
</span><span id="413" class="l"><a class="l" href="#413"> 413: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'D'</span>] = <span class="php-quote">'221112'</span>;
</span><span id="414" class="l"><a class="l" href="#414"> 414: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'E'</span>] = <span class="php-quote">'221211'</span>;
</span><span id="415" class="l"><a class="l" href="#415"> 415: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'F'</span>] = <span class="php-quote">'231111'</span>;
</span><span id="416" class="l"><a class="l" href="#416"> 416: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'G'</span>] = <span class="php-quote">'112113'</span>;
</span><span id="417" class="l"><a class="l" href="#417"> 417: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'H'</span>] = <span class="php-quote">'112212'</span>;
</span><span id="418" class="l"><a class="l" href="#418"> 418: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'I'</span>] = <span class="php-quote">'112311'</span>;
</span><span id="419" class="l"><a class="l" href="#419"> 419: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'J'</span>] = <span class="php-quote">'122112'</span>;
</span><span id="420" class="l"><a class="l" href="#420"> 420: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'K'</span>] = <span class="php-quote">'132111'</span>;
</span><span id="421" class="l"><a class="l" href="#421"> 421: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'L'</span>] = <span class="php-quote">'111123'</span>;
</span><span id="422" class="l"><a class="l" href="#422"> 422: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'M'</span>] = <span class="php-quote">'111222'</span>;
</span><span id="423" class="l"><a class="l" href="#423"> 423: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'N'</span>] = <span class="php-quote">'111321'</span>;
</span><span id="424" class="l"><a class="l" href="#424"> 424: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'O'</span>] = <span class="php-quote">'121122'</span>;
</span><span id="425" class="l"><a class="l" href="#425"> 425: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'P'</span>] = <span class="php-quote">'131121'</span>;
</span><span id="426" class="l"><a class="l" href="#426"> 426: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'Q'</span>] = <span class="php-quote">'212112'</span>;
</span><span id="427" class="l"><a class="l" href="#427"> 427: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'R'</span>] = <span class="php-quote">'212211'</span>;
</span><span id="428" class="l"><a class="l" href="#428"> 428: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'S'</span>] = <span class="php-quote">'211122'</span>;
</span><span id="429" class="l"><a class="l" href="#429"> 429: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'T'</span>] = <span class="php-quote">'211221'</span>;
</span><span id="430" class="l"><a class="l" href="#430"> 430: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'U'</span>] = <span class="php-quote">'221121'</span>;
</span><span id="431" class="l"><a class="l" href="#431"> 431: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'V'</span>] = <span class="php-quote">'222111'</span>;
</span><span id="432" class="l"><a class="l" href="#432"> 432: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'W'</span>] = <span class="php-quote">'112122'</span>;
</span><span id="433" class="l"><a class="l" href="#433"> 433: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'X'</span>] = <span class="php-quote">'112221'</span>;
</span><span id="434" class="l"><a class="l" href="#434"> 434: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'Y'</span>] = <span class="php-quote">'122121'</span>;
</span><span id="435" class="l"><a class="l" href="#435"> 435: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'Z'</span>] = <span class="php-quote">'123111'</span>;
</span><span id="436" class="l"><a class="l" href="#436"> 436: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'-'</span>] = <span class="php-quote">'121131'</span>;
</span><span id="437" class="l"><a class="l" href="#437"> 437: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'.'</span>] = <span class="php-quote">'311112'</span>;
</span><span id="438" class="l"><a class="l" href="#438"> 438: </a>        <span class="php-var">$chr</span>[<span class="php-quote">' '</span>] = <span class="php-quote">'311211'</span>;
</span><span id="439" class="l"><a class="l" href="#439"> 439: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'$'</span>] = <span class="php-quote">'321111'</span>;
</span><span id="440" class="l"><a class="l" href="#440"> 440: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'/'</span>] = <span class="php-quote">'112131'</span>;
</span><span id="441" class="l"><a class="l" href="#441"> 441: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'+'</span>] = <span class="php-quote">'113121'</span>;
</span><span id="442" class="l"><a class="l" href="#442"> 442: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'%'</span>] = <span class="php-quote">'211131'</span>;
</span><span id="443" class="l"><a class="l" href="#443"> 443: </a>        <span class="php-var">$chr</span>[<span class="php-num">128</span>] = <span class="php-quote">'121221'</span>; <span class="php-comment">// ($)</span>
</span><span id="444" class="l"><a class="l" href="#444"> 444: </a>        <span class="php-var">$chr</span>[<span class="php-num">129</span>] = <span class="php-quote">'311121'</span>; <span class="php-comment">// (/)</span>
</span><span id="445" class="l"><a class="l" href="#445"> 445: </a>        <span class="php-var">$chr</span>[<span class="php-num">130</span>] = <span class="php-quote">'122211'</span>; <span class="php-comment">// (+)</span>
</span><span id="446" class="l"><a class="l" href="#446"> 446: </a>        <span class="php-var">$chr</span>[<span class="php-num">131</span>] = <span class="php-quote">'312111'</span>; <span class="php-comment">// (%)</span>
</span><span id="447" class="l"><a class="l" href="#447"> 447: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'*'</span>] = <span class="php-quote">'111141'</span>;
</span><span id="448" class="l"><a class="l" href="#448"> 448: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">strtoupper</span>(<span class="php-var">$code</span>);
</span><span id="449" class="l"><a class="l" href="#449"> 449: </a>        <span class="php-var">$encode</span> = <span class="php-keyword1">array</span>(
</span><span id="450" class="l"><a class="l" href="#450"> 450: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">0</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'U'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">1</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'A'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">2</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">3</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'C'</span>,
</span><span id="451" class="l"><a class="l" href="#451"> 451: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">4</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">5</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'E'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">6</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'F'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">7</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'G'</span>,
</span><span id="452" class="l"><a class="l" href="#452"> 452: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">8</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">9</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">10</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'J'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">11</span>) =&gt; <span class="php-quote">'K'</span>,
</span><span id="453" class="l"><a class="l" href="#453"> 453: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">12</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">13</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'M'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">14</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'N'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">15</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'O'</span>,
</span><span id="454" class="l"><a class="l" href="#454"> 454: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">16</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'P'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">17</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'Q'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">18</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'R'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">19</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'S'</span>,
</span><span id="455" class="l"><a class="l" href="#455"> 455: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">20</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'T'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">21</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'U'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">22</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'V'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">23</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'W'</span>,
</span><span id="456" class="l"><a class="l" href="#456"> 456: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">24</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'X'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">25</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'Y'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">26</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-quote">'Z'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">27</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'A'</span>,
</span><span id="457" class="l"><a class="l" href="#457"> 457: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">28</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">29</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'C'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">30</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">31</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'E'</span>,
</span><span id="458" class="l"><a class="l" href="#458"> 458: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">32</span>) =&gt; <span class="php-quote">' '</span>, <span class="php-keyword2">chr</span>(<span class="php-num">33</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'A'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">34</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">35</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'C'</span>,
</span><span id="459" class="l"><a class="l" href="#459"> 459: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">36</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">37</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'E'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">38</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'F'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">39</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'G'</span>,
</span><span id="460" class="l"><a class="l" href="#460"> 460: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">40</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">41</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">42</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'J'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">43</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'K'</span>,
</span><span id="461" class="l"><a class="l" href="#461"> 461: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">44</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">45</span>) =&gt; <span class="php-quote">'-'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">46</span>) =&gt; <span class="php-quote">'.'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">47</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'O'</span>,
</span><span id="462" class="l"><a class="l" href="#462"> 462: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">48</span>) =&gt; <span class="php-quote">'0'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">49</span>) =&gt; <span class="php-quote">'1'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">50</span>) =&gt; <span class="php-quote">'2'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">51</span>) =&gt; <span class="php-quote">'3'</span>,
</span><span id="463" class="l"><a class="l" href="#463"> 463: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">52</span>) =&gt; <span class="php-quote">'4'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">53</span>) =&gt; <span class="php-quote">'5'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">54</span>) =&gt; <span class="php-quote">'6'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">55</span>) =&gt; <span class="php-quote">'7'</span>,
</span><span id="464" class="l"><a class="l" href="#464"> 464: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">56</span>) =&gt; <span class="php-quote">'8'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">57</span>) =&gt; <span class="php-quote">'9'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">58</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-quote">'Z'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">59</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'F'</span>,
</span><span id="465" class="l"><a class="l" href="#465"> 465: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">60</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'G'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">61</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">62</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">63</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'J'</span>,
</span><span id="466" class="l"><a class="l" href="#466"> 466: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">64</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'V'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">65</span>) =&gt; <span class="php-quote">'A'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">66</span>) =&gt; <span class="php-quote">'B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">67</span>) =&gt; <span class="php-quote">'C'</span>,
</span><span id="467" class="l"><a class="l" href="#467"> 467: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">68</span>) =&gt; <span class="php-quote">'D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">69</span>) =&gt; <span class="php-quote">'E'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">70</span>) =&gt; <span class="php-quote">'F'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">71</span>) =&gt; <span class="php-quote">'G'</span>,
</span><span id="468" class="l"><a class="l" href="#468"> 468: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">72</span>) =&gt; <span class="php-quote">'H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">73</span>) =&gt; <span class="php-quote">'I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">74</span>) =&gt; <span class="php-quote">'J'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">75</span>) =&gt; <span class="php-quote">'K'</span>,
</span><span id="469" class="l"><a class="l" href="#469"> 469: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">76</span>) =&gt; <span class="php-quote">'L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">77</span>) =&gt; <span class="php-quote">'M'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">78</span>) =&gt; <span class="php-quote">'N'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">79</span>) =&gt; <span class="php-quote">'O'</span>,
</span><span id="470" class="l"><a class="l" href="#470"> 470: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">80</span>) =&gt; <span class="php-quote">'P'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">81</span>) =&gt; <span class="php-quote">'Q'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">82</span>) =&gt; <span class="php-quote">'R'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">83</span>) =&gt; <span class="php-quote">'S'</span>,
</span><span id="471" class="l"><a class="l" href="#471"> 471: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">84</span>) =&gt; <span class="php-quote">'T'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">85</span>) =&gt; <span class="php-quote">'U'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">86</span>) =&gt; <span class="php-quote">'V'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">87</span>) =&gt; <span class="php-quote">'W'</span>,
</span><span id="472" class="l"><a class="l" href="#472"> 472: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">88</span>) =&gt; <span class="php-quote">'X'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">89</span>) =&gt; <span class="php-quote">'Y'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">90</span>) =&gt; <span class="php-quote">'Z'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">91</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'K'</span>,
</span><span id="473" class="l"><a class="l" href="#473"> 473: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">92</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">93</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'M'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">94</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'N'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">95</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'O'</span>,
</span><span id="474" class="l"><a class="l" href="#474"> 474: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">96</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'W'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">97</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'A'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">98</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'B'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">99</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'C'</span>,
</span><span id="475" class="l"><a class="l" href="#475"> 475: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">100</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'D'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">101</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'E'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">102</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'F'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">103</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'G'</span>,
</span><span id="476" class="l"><a class="l" href="#476"> 476: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">104</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'H'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">105</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'I'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">106</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'J'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">107</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'K'</span>,
</span><span id="477" class="l"><a class="l" href="#477"> 477: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">108</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'L'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">109</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'M'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">110</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'N'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">111</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'O'</span>,
</span><span id="478" class="l"><a class="l" href="#478"> 478: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">112</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'P'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">113</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'Q'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">114</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'R'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">115</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'S'</span>,
</span><span id="479" class="l"><a class="l" href="#479"> 479: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">116</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'T'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">117</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'U'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">118</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'V'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">119</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'W'</span>,
</span><span id="480" class="l"><a class="l" href="#480"> 480: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">120</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'X'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">121</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'Y'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">122</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-quote">'Z'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">123</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'P'</span>,
</span><span id="481" class="l"><a class="l" href="#481"> 481: </a>            <span class="php-keyword2">chr</span>(<span class="php-num">124</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'Q'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">125</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'R'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">126</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'S'</span>, <span class="php-keyword2">chr</span>(<span class="php-num">127</span>) =&gt; <span class="php-keyword2">chr</span>(<span class="php-num">131</span>).<span class="php-quote">'T'</span>);
</span><span id="482" class="l"><a class="l" href="#482"> 482: </a>        <span class="php-var">$code_ext</span> = <span class="php-quote">''</span>;
</span><span id="483" class="l"><a class="l" href="#483"> 483: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="484" class="l"><a class="l" href="#484"> 484: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span> ; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; ++<span class="php-var">$i</span>) {
</span><span id="485" class="l"><a class="l" href="#485"> 485: </a>            <span class="php-keyword1">if</span> (<span class="php-keyword2">ord</span>(<span class="php-var">$code</span>{<span class="php-var">$i</span>}) &gt; <span class="php-num">127</span>) {
</span><span id="486" class="l"><a class="l" href="#486"> 486: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="487" class="l"><a class="l" href="#487"> 487: </a>            }
</span><span id="488" class="l"><a class="l" href="#488"> 488: </a>            <span class="php-var">$code_ext</span> .= <span class="php-var">$encode</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}];
</span><span id="489" class="l"><a class="l" href="#489"> 489: </a>        }
</span><span id="490" class="l"><a class="l" href="#490"> 490: </a>        <span class="php-comment">// checksum</span>
</span><span id="491" class="l"><a class="l" href="#491"> 491: </a>        <span class="php-var">$code</span> .= <span class="php-var">$this</span>-&gt;checksum_code93(<span class="php-var">$code</span>);
</span><span id="492" class="l"><a class="l" href="#492"> 492: </a>        <span class="php-comment">// add start and stop codes</span>
</span><span id="493" class="l"><a class="l" href="#493"> 493: </a>        <span class="php-var">$code</span> = <span class="php-quote">'*'</span>.<span class="php-var">$code</span>.<span class="php-quote">'*'</span>;
</span><span id="494" class="l"><a class="l" href="#494"> 494: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="495" class="l"><a class="l" href="#495"> 495: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="496" class="l"><a class="l" href="#496"> 496: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="497" class="l"><a class="l" href="#497"> 497: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; ++<span class="php-var">$i</span>) {
</span><span id="498" class="l"><a class="l" href="#498"> 498: </a>            <span class="php-var">$char</span> = <span class="php-var">$code</span>{<span class="php-var">$i</span>};
</span><span id="499" class="l"><a class="l" href="#499"> 499: </a>            <span class="php-keyword1">if</span>(!<span class="php-keyword1">isset</span>(<span class="php-var">$chr</span>[<span class="php-var">$char</span>])) {
</span><span id="500" class="l"><a class="l" href="#500"> 500: </a>                <span class="php-comment">// invalid character</span>
</span><span id="501" class="l"><a class="l" href="#501"> 501: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="502" class="l"><a class="l" href="#502"> 502: </a>            }
</span><span id="503" class="l"><a class="l" href="#503"> 503: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$j</span> = <span class="php-num">0</span>; <span class="php-var">$j</span> &lt; <span class="php-num">6</span>; ++<span class="php-var">$j</span>) {
</span><span id="504" class="l"><a class="l" href="#504"> 504: </a>                <span class="php-keyword1">if</span> ((<span class="php-var">$j</span> % <span class="php-num">2</span>) == <span class="php-num">0</span>) {
</span><span id="505" class="l"><a class="l" href="#505"> 505: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">true</span>; <span class="php-comment">// bar</span>
</span><span id="506" class="l"><a class="l" href="#506"> 506: </a>                } <span class="php-keyword1">else</span> {
</span><span id="507" class="l"><a class="l" href="#507"> 507: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">false</span>; <span class="php-comment">// space</span>
</span><span id="508" class="l"><a class="l" href="#508"> 508: </a>                }
</span><span id="509" class="l"><a class="l" href="#509"> 509: </a>                <span class="php-var">$w</span> = <span class="php-var">$chr</span>[<span class="php-var">$char</span>]{<span class="php-var">$j</span>};
</span><span id="510" class="l"><a class="l" href="#510"> 510: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-var">$t</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-var">$w</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="511" class="l"><a class="l" href="#511"> 511: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-var">$w</span>;
</span><span id="512" class="l"><a class="l" href="#512"> 512: </a>                ++<span class="php-var">$k</span>;
</span><span id="513" class="l"><a class="l" href="#513"> 513: </a>            }
</span><span id="514" class="l"><a class="l" href="#514"> 514: </a>        }
</span><span id="515" class="l"><a class="l" href="#515"> 515: </a>        <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-keyword1">true</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="516" class="l"><a class="l" href="#516"> 516: </a>        <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">1</span>;
</span><span id="517" class="l"><a class="l" href="#517"> 517: </a>        ++<span class="php-var">$k</span>;
</span><span id="518" class="l"><a class="l" href="#518"> 518: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="519" class="l"><a class="l" href="#519"> 519: </a>    }
</span><span id="520" class="l"><a class="l" href="#520"> 520: </a>
</span><span id="521" class="l"><a class="l" href="#521"> 521: </a>    <span class="php-comment">/**
</span></span><span id="522" class="l"><a class="l" href="#522"> 522: </a><span class="php-comment">     * Calculate CODE 93 checksum (modulo 47).
</span></span><span id="523" class="l"><a class="l" href="#523"> 523: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="524" class="l"><a class="l" href="#524"> 524: </a><span class="php-comment">     * @return string checksum code.
</span></span><span id="525" class="l"><a class="l" href="#525"> 525: </a><span class="php-comment">     * @access protected
</span></span><span id="526" class="l"><a class="l" href="#526"> 526: </a><span class="php-comment">     */</span>
</span><span id="527" class="l"><a class="l" href="#527"> 527: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_checksum_code93" href="#_checksum_code93">checksum_code93</a>(<span class="php-var">$code</span>) {
</span><span id="528" class="l"><a class="l" href="#528"> 528: </a>        <span class="php-var">$chars</span> = <span class="php-keyword1">array</span>(
</span><span id="529" class="l"><a class="l" href="#529"> 529: </a>            <span class="php-quote">'0'</span>, <span class="php-quote">'1'</span>, <span class="php-quote">'2'</span>, <span class="php-quote">'3'</span>, <span class="php-quote">'4'</span>, <span class="php-quote">'5'</span>, <span class="php-quote">'6'</span>, <span class="php-quote">'7'</span>, <span class="php-quote">'8'</span>, <span class="php-quote">'9'</span>,
</span><span id="530" class="l"><a class="l" href="#530"> 530: </a>            <span class="php-quote">'A'</span>, <span class="php-quote">'B'</span>, <span class="php-quote">'C'</span>, <span class="php-quote">'D'</span>, <span class="php-quote">'E'</span>, <span class="php-quote">'F'</span>, <span class="php-quote">'G'</span>, <span class="php-quote">'H'</span>, <span class="php-quote">'I'</span>, <span class="php-quote">'J'</span>, <span class="php-quote">'K'</span>,
</span><span id="531" class="l"><a class="l" href="#531"> 531: </a>            <span class="php-quote">'L'</span>, <span class="php-quote">'M'</span>, <span class="php-quote">'N'</span>, <span class="php-quote">'O'</span>, <span class="php-quote">'P'</span>, <span class="php-quote">'Q'</span>, <span class="php-quote">'R'</span>, <span class="php-quote">'S'</span>, <span class="php-quote">'T'</span>, <span class="php-quote">'U'</span>, <span class="php-quote">'V'</span>,
</span><span id="532" class="l"><a class="l" href="#532"> 532: </a>            <span class="php-quote">'W'</span>, <span class="php-quote">'X'</span>, <span class="php-quote">'Y'</span>, <span class="php-quote">'Z'</span>, <span class="php-quote">'-'</span>, <span class="php-quote">'.'</span>, <span class="php-quote">' '</span>, <span class="php-quote">'$'</span>, <span class="php-quote">'/'</span>, <span class="php-quote">'+'</span>, <span class="php-quote">'%'</span>);
</span><span id="533" class="l"><a class="l" href="#533"> 533: </a>        <span class="php-comment">// translate special characters</span>
</span><span id="534" class="l"><a class="l" href="#534"> 534: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">strtr</span>(<span class="php-var">$code</span>, <span class="php-keyword2">chr</span>(<span class="php-num">128</span>).<span class="php-keyword2">chr</span>(<span class="php-num">129</span>).<span class="php-keyword2">chr</span>(<span class="php-num">130</span>).<span class="php-keyword2">chr</span>(<span class="php-num">131</span>), <span class="php-quote">'$/+%'</span>);
</span><span id="535" class="l"><a class="l" href="#535"> 535: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="536" class="l"><a class="l" href="#536"> 536: </a>        <span class="php-comment">// calculate check digit C</span>
</span><span id="537" class="l"><a class="l" href="#537"> 537: </a>        <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="538" class="l"><a class="l" href="#538"> 538: </a>        <span class="php-var">$check</span> = <span class="php-num">0</span>;
</span><span id="539" class="l"><a class="l" href="#539"> 539: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = (<span class="php-var">$len</span> - <span class="php-num">1</span>); <span class="php-var">$i</span> &gt;= <span class="php-num">0</span>; --<span class="php-var">$i</span>) {
</span><span id="540" class="l"><a class="l" href="#540"> 540: </a>            <span class="php-var">$k</span> = <span class="php-keyword2">array_keys</span>(<span class="php-var">$chars</span>, <span class="php-var">$code</span>{<span class="php-var">$i</span>});
</span><span id="541" class="l"><a class="l" href="#541"> 541: </a>            <span class="php-var">$check</span> += (<span class="php-var">$k</span>[<span class="php-num">0</span>] * <span class="php-var">$p</span>);
</span><span id="542" class="l"><a class="l" href="#542"> 542: </a>            ++<span class="php-var">$p</span>;
</span><span id="543" class="l"><a class="l" href="#543"> 543: </a>            <span class="php-keyword1">if</span> (<span class="php-var">$p</span> &gt; <span class="php-num">20</span>) {
</span><span id="544" class="l"><a class="l" href="#544"> 544: </a>                <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="545" class="l"><a class="l" href="#545"> 545: </a>            }
</span><span id="546" class="l"><a class="l" href="#546"> 546: </a>        }
</span><span id="547" class="l"><a class="l" href="#547"> 547: </a>        <span class="php-var">$check</span> %= <span class="php-num">47</span>;
</span><span id="548" class="l"><a class="l" href="#548"> 548: </a>        <span class="php-var">$c</span> = <span class="php-var">$chars</span>[<span class="php-var">$check</span>];
</span><span id="549" class="l"><a class="l" href="#549"> 549: </a>        <span class="php-var">$code</span> .= <span class="php-var">$c</span>;
</span><span id="550" class="l"><a class="l" href="#550"> 550: </a>        <span class="php-comment">// calculate check digit K</span>
</span><span id="551" class="l"><a class="l" href="#551"> 551: </a>        <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="552" class="l"><a class="l" href="#552"> 552: </a>        <span class="php-var">$check</span> = <span class="php-num">0</span>;
</span><span id="553" class="l"><a class="l" href="#553"> 553: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-var">$len</span>; <span class="php-var">$i</span> &gt;= <span class="php-num">0</span>; --<span class="php-var">$i</span>) {
</span><span id="554" class="l"><a class="l" href="#554"> 554: </a>            <span class="php-var">$k</span> = <span class="php-keyword2">array_keys</span>(<span class="php-var">$chars</span>, <span class="php-var">$code</span>{<span class="php-var">$i</span>});
</span><span id="555" class="l"><a class="l" href="#555"> 555: </a>            <span class="php-var">$check</span> += (<span class="php-var">$k</span>[<span class="php-num">0</span>] * <span class="php-var">$p</span>);
</span><span id="556" class="l"><a class="l" href="#556"> 556: </a>            ++<span class="php-var">$p</span>;
</span><span id="557" class="l"><a class="l" href="#557"> 557: </a>            <span class="php-keyword1">if</span> (<span class="php-var">$p</span> &gt; <span class="php-num">15</span>) {
</span><span id="558" class="l"><a class="l" href="#558"> 558: </a>                <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="559" class="l"><a class="l" href="#559"> 559: </a>            }
</span><span id="560" class="l"><a class="l" href="#560"> 560: </a>        }
</span><span id="561" class="l"><a class="l" href="#561"> 561: </a>        <span class="php-var">$check</span> %= <span class="php-num">47</span>;
</span><span id="562" class="l"><a class="l" href="#562"> 562: </a>        <span class="php-var">$k</span> = <span class="php-var">$chars</span>[<span class="php-var">$check</span>];
</span><span id="563" class="l"><a class="l" href="#563"> 563: </a>        <span class="php-keyword1">return</span> <span class="php-var">$c</span>.<span class="php-var">$k</span>;
</span><span id="564" class="l"><a class="l" href="#564"> 564: </a>    }
</span><span id="565" class="l"><a class="l" href="#565"> 565: </a>
</span><span id="566" class="l"><a class="l" href="#566"> 566: </a>    <span class="php-comment">/**
</span></span><span id="567" class="l"><a class="l" href="#567"> 567: </a><span class="php-comment">     * Checksum for standard 2 of 5 barcodes.
</span></span><span id="568" class="l"><a class="l" href="#568"> 568: </a><span class="php-comment">     * @param string $code code to process.
</span></span><span id="569" class="l"><a class="l" href="#569"> 569: </a><span class="php-comment">     * @return int checksum.
</span></span><span id="570" class="l"><a class="l" href="#570"> 570: </a><span class="php-comment">     * @access protected
</span></span><span id="571" class="l"><a class="l" href="#571"> 571: </a><span class="php-comment">     */</span>
</span><span id="572" class="l"><a class="l" href="#572"> 572: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_checksum_s25" href="#_checksum_s25">checksum_s25</a>(<span class="php-var">$code</span>) {
</span><span id="573" class="l"><a class="l" href="#573"> 573: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="574" class="l"><a class="l" href="#574"> 574: </a>        <span class="php-var">$sum</span> = <span class="php-num">0</span>;
</span><span id="575" class="l"><a class="l" href="#575"> 575: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; <span class="php-var">$i</span>+=<span class="php-num">2</span>) {
</span><span id="576" class="l"><a class="l" href="#576"> 576: </a>            <span class="php-var">$sum</span> += <span class="php-var">$code</span>{<span class="php-var">$i</span>};
</span><span id="577" class="l"><a class="l" href="#577"> 577: </a>        }
</span><span id="578" class="l"><a class="l" href="#578"> 578: </a>        <span class="php-var">$sum</span> *= <span class="php-num">3</span>;
</span><span id="579" class="l"><a class="l" href="#579"> 579: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">1</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; <span class="php-var">$i</span>+=<span class="php-num">2</span>) {
</span><span id="580" class="l"><a class="l" href="#580"> 580: </a>            <span class="php-var">$sum</span> += (<span class="php-var">$code</span>{<span class="php-var">$i</span>});
</span><span id="581" class="l"><a class="l" href="#581"> 581: </a>        }
</span><span id="582" class="l"><a class="l" href="#582"> 582: </a>        <span class="php-var">$r</span> = <span class="php-var">$sum</span> % <span class="php-num">10</span>;
</span><span id="583" class="l"><a class="l" href="#583"> 583: </a>        <span class="php-keyword1">if</span>(<span class="php-var">$r</span> &gt; <span class="php-num">0</span>) {
</span><span id="584" class="l"><a class="l" href="#584"> 584: </a>            <span class="php-var">$r</span> = (<span class="php-num">10</span> - <span class="php-var">$r</span>);
</span><span id="585" class="l"><a class="l" href="#585"> 585: </a>        }
</span><span id="586" class="l"><a class="l" href="#586"> 586: </a>        <span class="php-keyword1">return</span> <span class="php-var">$r</span>;
</span><span id="587" class="l"><a class="l" href="#587"> 587: </a>    }
</span><span id="588" class="l"><a class="l" href="#588"> 588: </a>
</span><span id="589" class="l"><a class="l" href="#589"> 589: </a>    <span class="php-comment">/**
</span></span><span id="590" class="l"><a class="l" href="#590"> 590: </a><span class="php-comment">     * MSI.
</span></span><span id="591" class="l"><a class="l" href="#591"> 591: </a><span class="php-comment">     * Variation of Plessey code, with similar applications
</span></span><span id="592" class="l"><a class="l" href="#592"> 592: </a><span class="php-comment">     * Contains digits (0 to 9) and encodes the data only in the width of bars.
</span></span><span id="593" class="l"><a class="l" href="#593"> 593: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="594" class="l"><a class="l" href="#594"> 594: </a><span class="php-comment">     * @param boolean $checksum if true add a checksum to the code (modulo 11)
</span></span><span id="595" class="l"><a class="l" href="#595"> 595: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="596" class="l"><a class="l" href="#596"> 596: </a><span class="php-comment">     * @access protected
</span></span><span id="597" class="l"><a class="l" href="#597"> 597: </a><span class="php-comment">     */</span>
</span><span id="598" class="l"><a class="l" href="#598"> 598: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_msi" href="#_barcode_msi">barcode_msi</a>(<span class="php-var">$code</span>, <span class="php-var">$checksum</span>=<span class="php-keyword1">false</span>) {
</span><span id="599" class="l"><a class="l" href="#599"> 599: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'0'</span>] = <span class="php-quote">'100100100100'</span>;
</span><span id="600" class="l"><a class="l" href="#600"> 600: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'1'</span>] = <span class="php-quote">'100100100110'</span>;
</span><span id="601" class="l"><a class="l" href="#601"> 601: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'2'</span>] = <span class="php-quote">'100100110100'</span>;
</span><span id="602" class="l"><a class="l" href="#602"> 602: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'3'</span>] = <span class="php-quote">'100100110110'</span>;
</span><span id="603" class="l"><a class="l" href="#603"> 603: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'4'</span>] = <span class="php-quote">'100110100100'</span>;
</span><span id="604" class="l"><a class="l" href="#604"> 604: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'5'</span>] = <span class="php-quote">'100110100110'</span>;
</span><span id="605" class="l"><a class="l" href="#605"> 605: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'6'</span>] = <span class="php-quote">'100110110100'</span>;
</span><span id="606" class="l"><a class="l" href="#606"> 606: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'7'</span>] = <span class="php-quote">'100110110110'</span>;
</span><span id="607" class="l"><a class="l" href="#607"> 607: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'8'</span>] = <span class="php-quote">'110100100100'</span>;
</span><span id="608" class="l"><a class="l" href="#608"> 608: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'9'</span>] = <span class="php-quote">'110100100110'</span>;
</span><span id="609" class="l"><a class="l" href="#609"> 609: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'A'</span>] = <span class="php-quote">'110100110100'</span>;
</span><span id="610" class="l"><a class="l" href="#610"> 610: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'B'</span>] = <span class="php-quote">'110100110110'</span>;
</span><span id="611" class="l"><a class="l" href="#611"> 611: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'C'</span>] = <span class="php-quote">'110110100100'</span>;
</span><span id="612" class="l"><a class="l" href="#612"> 612: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'D'</span>] = <span class="php-quote">'110110100110'</span>;
</span><span id="613" class="l"><a class="l" href="#613"> 613: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'E'</span>] = <span class="php-quote">'110110110100'</span>;
</span><span id="614" class="l"><a class="l" href="#614"> 614: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'F'</span>] = <span class="php-quote">'110110110110'</span>;
</span><span id="615" class="l"><a class="l" href="#615"> 615: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$checksum</span>) {
</span><span id="616" class="l"><a class="l" href="#616"> 616: </a>            <span class="php-comment">// add checksum</span>
</span><span id="617" class="l"><a class="l" href="#617"> 617: </a>            <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="618" class="l"><a class="l" href="#618"> 618: </a>            <span class="php-var">$p</span> = <span class="php-num">2</span>;
</span><span id="619" class="l"><a class="l" href="#619"> 619: </a>            <span class="php-var">$check</span> = <span class="php-num">0</span>;
</span><span id="620" class="l"><a class="l" href="#620"> 620: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = (<span class="php-var">$clen</span> - <span class="php-num">1</span>); <span class="php-var">$i</span> &gt;= <span class="php-num">0</span>; --<span class="php-var">$i</span>) {
</span><span id="621" class="l"><a class="l" href="#621"> 621: </a>                <span class="php-var">$check</span> += (<span class="php-keyword2">hexdec</span>(<span class="php-var">$code</span>{<span class="php-var">$i</span>}) * <span class="php-var">$p</span>);
</span><span id="622" class="l"><a class="l" href="#622"> 622: </a>                ++<span class="php-var">$p</span>;
</span><span id="623" class="l"><a class="l" href="#623"> 623: </a>                <span class="php-keyword1">if</span> (<span class="php-var">$p</span> &gt; <span class="php-num">7</span>) {
</span><span id="624" class="l"><a class="l" href="#624"> 624: </a>                    <span class="php-var">$p</span> = <span class="php-num">2</span>;
</span><span id="625" class="l"><a class="l" href="#625"> 625: </a>                }
</span><span id="626" class="l"><a class="l" href="#626"> 626: </a>            }
</span><span id="627" class="l"><a class="l" href="#627"> 627: </a>            <span class="php-var">$check</span> %= <span class="php-num">11</span>;
</span><span id="628" class="l"><a class="l" href="#628"> 628: </a>            <span class="php-keyword1">if</span> (<span class="php-var">$check</span> &gt; <span class="php-num">0</span>) {
</span><span id="629" class="l"><a class="l" href="#629"> 629: </a>                <span class="php-var">$check</span> = <span class="php-num">11</span> - <span class="php-var">$check</span>;
</span><span id="630" class="l"><a class="l" href="#630"> 630: </a>            }
</span><span id="631" class="l"><a class="l" href="#631"> 631: </a>            <span class="php-var">$code</span> .= <span class="php-var">$check</span>;
</span><span id="632" class="l"><a class="l" href="#632"> 632: </a>        }
</span><span id="633" class="l"><a class="l" href="#633"> 633: </a>        <span class="php-var">$seq</span> = <span class="php-quote">'110'</span>; <span class="php-comment">// left guard</span>
</span><span id="634" class="l"><a class="l" href="#634"> 634: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="635" class="l"><a class="l" href="#635"> 635: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; ++<span class="php-var">$i</span>) {
</span><span id="636" class="l"><a class="l" href="#636"> 636: </a>            <span class="php-var">$digit</span> = <span class="php-var">$code</span>{<span class="php-var">$i</span>};
</span><span id="637" class="l"><a class="l" href="#637"> 637: </a>            <span class="php-keyword1">if</span> (!<span class="php-keyword1">isset</span>(<span class="php-var">$chr</span>[<span class="php-var">$digit</span>])) {
</span><span id="638" class="l"><a class="l" href="#638"> 638: </a>                <span class="php-comment">// invalid character</span>
</span><span id="639" class="l"><a class="l" href="#639"> 639: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="640" class="l"><a class="l" href="#640"> 640: </a>            }
</span><span id="641" class="l"><a class="l" href="#641"> 641: </a>            <span class="php-var">$seq</span> .= <span class="php-var">$chr</span>[<span class="php-var">$digit</span>];
</span><span id="642" class="l"><a class="l" href="#642"> 642: </a>        }
</span><span id="643" class="l"><a class="l" href="#643"> 643: </a>        <span class="php-var">$seq</span> .= <span class="php-quote">'1001'</span>; <span class="php-comment">// right guard</span>
</span><span id="644" class="l"><a class="l" href="#644"> 644: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="645" class="l"><a class="l" href="#645"> 645: </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;binseq_to_array(<span class="php-var">$seq</span>, <span class="php-var">$bararray</span>);
</span><span id="646" class="l"><a class="l" href="#646"> 646: </a>    }
</span><span id="647" class="l"><a class="l" href="#647"> 647: </a>
</span><span id="648" class="l"><a class="l" href="#648"> 648: </a>    <span class="php-comment">/**
</span></span><span id="649" class="l"><a class="l" href="#649"> 649: </a><span class="php-comment">     * Standard 2 of 5 barcodes.
</span></span><span id="650" class="l"><a class="l" href="#650"> 650: </a><span class="php-comment">     * Used in airline ticket marking, photofinishing
</span></span><span id="651" class="l"><a class="l" href="#651"> 651: </a><span class="php-comment">     * Contains digits (0 to 9) and encodes the data only in the width of bars.
</span></span><span id="652" class="l"><a class="l" href="#652"> 652: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="653" class="l"><a class="l" href="#653"> 653: </a><span class="php-comment">     * @param boolean $checksum if true add a checksum to the code
</span></span><span id="654" class="l"><a class="l" href="#654"> 654: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="655" class="l"><a class="l" href="#655"> 655: </a><span class="php-comment">     * @access protected
</span></span><span id="656" class="l"><a class="l" href="#656"> 656: </a><span class="php-comment">     */</span>
</span><span id="657" class="l"><a class="l" href="#657"> 657: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_s25" href="#_barcode_s25">barcode_s25</a>(<span class="php-var">$code</span>, <span class="php-var">$checksum</span>=<span class="php-keyword1">false</span>) {
</span><span id="658" class="l"><a class="l" href="#658"> 658: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'0'</span>] = <span class="php-quote">'10101110111010'</span>;
</span><span id="659" class="l"><a class="l" href="#659"> 659: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'1'</span>] = <span class="php-quote">'11101010101110'</span>;
</span><span id="660" class="l"><a class="l" href="#660"> 660: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'2'</span>] = <span class="php-quote">'10111010101110'</span>;
</span><span id="661" class="l"><a class="l" href="#661"> 661: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'3'</span>] = <span class="php-quote">'11101110101010'</span>;
</span><span id="662" class="l"><a class="l" href="#662"> 662: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'4'</span>] = <span class="php-quote">'10101110101110'</span>;
</span><span id="663" class="l"><a class="l" href="#663"> 663: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'5'</span>] = <span class="php-quote">'11101011101010'</span>;
</span><span id="664" class="l"><a class="l" href="#664"> 664: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'6'</span>] = <span class="php-quote">'10111011101010'</span>;
</span><span id="665" class="l"><a class="l" href="#665"> 665: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'7'</span>] = <span class="php-quote">'10101011101110'</span>;
</span><span id="666" class="l"><a class="l" href="#666"> 666: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'8'</span>] = <span class="php-quote">'10101110111010'</span>;
</span><span id="667" class="l"><a class="l" href="#667"> 667: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'9'</span>] = <span class="php-quote">'10111010111010'</span>;
</span><span id="668" class="l"><a class="l" href="#668"> 668: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$checksum</span>) {
</span><span id="669" class="l"><a class="l" href="#669"> 669: </a>            <span class="php-comment">// add checksum</span>
</span><span id="670" class="l"><a class="l" href="#670"> 670: </a>            <span class="php-var">$code</span> .= <span class="php-var">$this</span>-&gt;checksum_s25(<span class="php-var">$code</span>);
</span><span id="671" class="l"><a class="l" href="#671"> 671: </a>        }
</span><span id="672" class="l"><a class="l" href="#672"> 672: </a>        <span class="php-keyword1">if</span>((<span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>) % <span class="php-num">2</span>) != <span class="php-num">0</span>) {
</span><span id="673" class="l"><a class="l" href="#673"> 673: </a>            <span class="php-comment">// add leading zero if code-length is odd</span>
</span><span id="674" class="l"><a class="l" href="#674"> 674: </a>            <span class="php-var">$code</span> = <span class="php-quote">'0'</span>.<span class="php-var">$code</span>;
</span><span id="675" class="l"><a class="l" href="#675"> 675: </a>        }
</span><span id="676" class="l"><a class="l" href="#676"> 676: </a>        <span class="php-var">$seq</span> = <span class="php-quote">'11011010'</span>;
</span><span id="677" class="l"><a class="l" href="#677"> 677: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="678" class="l"><a class="l" href="#678"> 678: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; ++<span class="php-var">$i</span>) {
</span><span id="679" class="l"><a class="l" href="#679"> 679: </a>            <span class="php-var">$digit</span> = <span class="php-var">$code</span>{<span class="php-var">$i</span>};
</span><span id="680" class="l"><a class="l" href="#680"> 680: </a>            <span class="php-keyword1">if</span> (!<span class="php-keyword1">isset</span>(<span class="php-var">$chr</span>[<span class="php-var">$digit</span>])) {
</span><span id="681" class="l"><a class="l" href="#681"> 681: </a>                <span class="php-comment">// invalid character</span>
</span><span id="682" class="l"><a class="l" href="#682"> 682: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="683" class="l"><a class="l" href="#683"> 683: </a>            }
</span><span id="684" class="l"><a class="l" href="#684"> 684: </a>            <span class="php-var">$seq</span> .= <span class="php-var">$chr</span>[<span class="php-var">$digit</span>];
</span><span id="685" class="l"><a class="l" href="#685"> 685: </a>        }
</span><span id="686" class="l"><a class="l" href="#686"> 686: </a>        <span class="php-var">$seq</span> .= <span class="php-quote">'1101011'</span>;
</span><span id="687" class="l"><a class="l" href="#687"> 687: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="688" class="l"><a class="l" href="#688"> 688: </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;binseq_to_array(<span class="php-var">$seq</span>, <span class="php-var">$bararray</span>);
</span><span id="689" class="l"><a class="l" href="#689"> 689: </a>    }
</span><span id="690" class="l"><a class="l" href="#690"> 690: </a>
</span><span id="691" class="l"><a class="l" href="#691"> 691: </a>    <span class="php-comment">/**
</span></span><span id="692" class="l"><a class="l" href="#692"> 692: </a><span class="php-comment">     * Convert binary barcode sequence to TCPDF barcode array
</span></span><span id="693" class="l"><a class="l" href="#693"> 693: </a><span class="php-comment">     * @param string $seq barcode as binary sequence
</span></span><span id="694" class="l"><a class="l" href="#694"> 694: </a><span class="php-comment">     * param array $bararray TCPDF barcode array to fill up
</span></span><span id="695" class="l"><a class="l" href="#695"> 695: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="696" class="l"><a class="l" href="#696"> 696: </a><span class="php-comment">     * @access protected
</span></span><span id="697" class="l"><a class="l" href="#697"> 697: </a><span class="php-comment">     */</span>
</span><span id="698" class="l"><a class="l" href="#698"> 698: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_binseq_to_array" href="#_binseq_to_array">binseq_to_array</a>(<span class="php-var">$seq</span>, <span class="php-var">$bararray</span>) {
</span><span id="699" class="l"><a class="l" href="#699"> 699: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$seq</span>);
</span><span id="700" class="l"><a class="l" href="#700"> 700: </a>        <span class="php-var">$w</span> = <span class="php-num">0</span>;
</span><span id="701" class="l"><a class="l" href="#701"> 701: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="702" class="l"><a class="l" href="#702"> 702: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="703" class="l"><a class="l" href="#703"> 703: </a>            <span class="php-var">$w</span> += <span class="php-num">1</span>;
</span><span id="704" class="l"><a class="l" href="#704"> 704: </a>            <span class="php-keyword1">if</span> ((<span class="php-var">$i</span> == (<span class="php-var">$len</span> - <span class="php-num">1</span>)) <span class="php-keyword1">OR</span> ((<span class="php-var">$i</span> &lt; (<span class="php-var">$len</span> - <span class="php-num">1</span>)) <span class="php-keyword1">AND</span> (<span class="php-var">$seq</span>{<span class="php-var">$i</span>} != <span class="php-var">$seq</span>{(<span class="php-var">$i</span>+<span class="php-num">1</span>)}))) {
</span><span id="705" class="l"><a class="l" href="#705"> 705: </a>                <span class="php-keyword1">if</span> (<span class="php-var">$seq</span>{<span class="php-var">$i</span>} == <span class="php-quote">'1'</span>) {
</span><span id="706" class="l"><a class="l" href="#706"> 706: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">true</span>; <span class="php-comment">// bar</span>
</span><span id="707" class="l"><a class="l" href="#707"> 707: </a>                } <span class="php-keyword1">else</span> {
</span><span id="708" class="l"><a class="l" href="#708"> 708: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">false</span>; <span class="php-comment">// space</span>
</span><span id="709" class="l"><a class="l" href="#709"> 709: </a>                }
</span><span id="710" class="l"><a class="l" href="#710"> 710: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-var">$t</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-var">$w</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="711" class="l"><a class="l" href="#711"> 711: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-var">$w</span>;
</span><span id="712" class="l"><a class="l" href="#712"> 712: </a>                ++<span class="php-var">$k</span>;
</span><span id="713" class="l"><a class="l" href="#713"> 713: </a>                <span class="php-var">$w</span> = <span class="php-num">0</span>;
</span><span id="714" class="l"><a class="l" href="#714"> 714: </a>            }
</span><span id="715" class="l"><a class="l" href="#715"> 715: </a>        }
</span><span id="716" class="l"><a class="l" href="#716"> 716: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="717" class="l"><a class="l" href="#717"> 717: </a>    }
</span><span id="718" class="l"><a class="l" href="#718"> 718: </a>
</span><span id="719" class="l"><a class="l" href="#719"> 719: </a>    <span class="php-comment">/**
</span></span><span id="720" class="l"><a class="l" href="#720"> 720: </a><span class="php-comment">     * Interleaved 2 of 5 barcodes.
</span></span><span id="721" class="l"><a class="l" href="#721"> 721: </a><span class="php-comment">     * Compact numeric code, widely used in industry, air cargo
</span></span><span id="722" class="l"><a class="l" href="#722"> 722: </a><span class="php-comment">     * Contains digits (0 to 9) and encodes the data in the width of both bars and spaces.
</span></span><span id="723" class="l"><a class="l" href="#723"> 723: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="724" class="l"><a class="l" href="#724"> 724: </a><span class="php-comment">     * @param boolean $checksum if true add a checksum to the code
</span></span><span id="725" class="l"><a class="l" href="#725"> 725: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="726" class="l"><a class="l" href="#726"> 726: </a><span class="php-comment">     * @access protected
</span></span><span id="727" class="l"><a class="l" href="#727"> 727: </a><span class="php-comment">     */</span>
</span><span id="728" class="l"><a class="l" href="#728"> 728: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_i25" href="#_barcode_i25">barcode_i25</a>(<span class="php-var">$code</span>, <span class="php-var">$checksum</span>=<span class="php-keyword1">false</span>) {
</span><span id="729" class="l"><a class="l" href="#729"> 729: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'0'</span>] = <span class="php-quote">'11221'</span>;
</span><span id="730" class="l"><a class="l" href="#730"> 730: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'1'</span>] = <span class="php-quote">'21112'</span>;
</span><span id="731" class="l"><a class="l" href="#731"> 731: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'2'</span>] = <span class="php-quote">'12112'</span>;
</span><span id="732" class="l"><a class="l" href="#732"> 732: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'3'</span>] = <span class="php-quote">'22111'</span>;
</span><span id="733" class="l"><a class="l" href="#733"> 733: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'4'</span>] = <span class="php-quote">'11212'</span>;
</span><span id="734" class="l"><a class="l" href="#734"> 734: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'5'</span>] = <span class="php-quote">'21211'</span>;
</span><span id="735" class="l"><a class="l" href="#735"> 735: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'6'</span>] = <span class="php-quote">'12211'</span>;
</span><span id="736" class="l"><a class="l" href="#736"> 736: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'7'</span>] = <span class="php-quote">'11122'</span>;
</span><span id="737" class="l"><a class="l" href="#737"> 737: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'8'</span>] = <span class="php-quote">'21121'</span>;
</span><span id="738" class="l"><a class="l" href="#738"> 738: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'9'</span>] = <span class="php-quote">'12121'</span>;
</span><span id="739" class="l"><a class="l" href="#739"> 739: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'A'</span>] = <span class="php-quote">'11'</span>;
</span><span id="740" class="l"><a class="l" href="#740"> 740: </a>        <span class="php-var">$chr</span>[<span class="php-quote">'Z'</span>] = <span class="php-quote">'21'</span>;
</span><span id="741" class="l"><a class="l" href="#741"> 741: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$checksum</span>) {
</span><span id="742" class="l"><a class="l" href="#742"> 742: </a>            <span class="php-comment">// add checksum</span>
</span><span id="743" class="l"><a class="l" href="#743"> 743: </a>            <span class="php-var">$code</span> .= <span class="php-var">$this</span>-&gt;checksum_s25(<span class="php-var">$code</span>);
</span><span id="744" class="l"><a class="l" href="#744"> 744: </a>        }
</span><span id="745" class="l"><a class="l" href="#745"> 745: </a>        <span class="php-keyword1">if</span>((<span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>) % <span class="php-num">2</span>) != <span class="php-num">0</span>) {
</span><span id="746" class="l"><a class="l" href="#746"> 746: </a>            <span class="php-comment">// add leading zero if code-length is odd</span>
</span><span id="747" class="l"><a class="l" href="#747"> 747: </a>            <span class="php-var">$code</span> = <span class="php-quote">'0'</span>.<span class="php-var">$code</span>;
</span><span id="748" class="l"><a class="l" href="#748"> 748: </a>        }
</span><span id="749" class="l"><a class="l" href="#749"> 749: </a>        <span class="php-comment">// add start and stop codes</span>
</span><span id="750" class="l"><a class="l" href="#750"> 750: </a>        <span class="php-var">$code</span> = <span class="php-quote">'AA'</span>.<span class="php-keyword2">strtolower</span>(<span class="php-var">$code</span>).<span class="php-quote">'ZA'</span>;
</span><span id="751" class="l"><a class="l" href="#751"> 751: </a>
</span><span id="752" class="l"><a class="l" href="#752"> 752: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="753" class="l"><a class="l" href="#753"> 753: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="754" class="l"><a class="l" href="#754"> 754: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="755" class="l"><a class="l" href="#755"> 755: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; <span class="php-var">$i</span> = (<span class="php-var">$i</span> + <span class="php-num">2</span>)) {
</span><span id="756" class="l"><a class="l" href="#756"> 756: </a>            <span class="php-var">$char_bar</span> = <span class="php-var">$code</span>{<span class="php-var">$i</span>};
</span><span id="757" class="l"><a class="l" href="#757"> 757: </a>            <span class="php-var">$char_space</span> = <span class="php-var">$code</span>{<span class="php-var">$i</span>+<span class="php-num">1</span>};
</span><span id="758" class="l"><a class="l" href="#758"> 758: </a>            <span class="php-keyword1">if</span>((!<span class="php-keyword1">isset</span>(<span class="php-var">$chr</span>[<span class="php-var">$char_bar</span>])) <span class="php-keyword1">OR</span> (!<span class="php-keyword1">isset</span>(<span class="php-var">$chr</span>[<span class="php-var">$char_space</span>]))) {
</span><span id="759" class="l"><a class="l" href="#759"> 759: </a>                <span class="php-comment">// invalid character</span>
</span><span id="760" class="l"><a class="l" href="#760"> 760: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="761" class="l"><a class="l" href="#761"> 761: </a>            }
</span><span id="762" class="l"><a class="l" href="#762"> 762: </a>            <span class="php-comment">// create a bar-space sequence</span>
</span><span id="763" class="l"><a class="l" href="#763"> 763: </a>            <span class="php-var">$seq</span> = <span class="php-quote">''</span>;
</span><span id="764" class="l"><a class="l" href="#764"> 764: </a>            <span class="php-var">$chrlen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$chr</span>[<span class="php-var">$char_bar</span>]);
</span><span id="765" class="l"><a class="l" href="#765"> 765: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$s</span> = <span class="php-num">0</span>; <span class="php-var">$s</span> &lt; <span class="php-var">$chrlen</span>; <span class="php-var">$s</span>++){
</span><span id="766" class="l"><a class="l" href="#766"> 766: </a>                <span class="php-var">$seq</span> .= <span class="php-var">$chr</span>[<span class="php-var">$char_bar</span>]{<span class="php-var">$s</span>} . <span class="php-var">$chr</span>[<span class="php-var">$char_space</span>]{<span class="php-var">$s</span>};
</span><span id="767" class="l"><a class="l" href="#767"> 767: </a>            }
</span><span id="768" class="l"><a class="l" href="#768"> 768: </a>            <span class="php-var">$seqlen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$seq</span>);
</span><span id="769" class="l"><a class="l" href="#769"> 769: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$j</span> = <span class="php-num">0</span>; <span class="php-var">$j</span> &lt; <span class="php-var">$seqlen</span>; ++<span class="php-var">$j</span>) {
</span><span id="770" class="l"><a class="l" href="#770"> 770: </a>                <span class="php-keyword1">if</span> ((<span class="php-var">$j</span> % <span class="php-num">2</span>) == <span class="php-num">0</span>) {
</span><span id="771" class="l"><a class="l" href="#771"> 771: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">true</span>; <span class="php-comment">// bar</span>
</span><span id="772" class="l"><a class="l" href="#772"> 772: </a>                } <span class="php-keyword1">else</span> {
</span><span id="773" class="l"><a class="l" href="#773"> 773: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">false</span>; <span class="php-comment">// space</span>
</span><span id="774" class="l"><a class="l" href="#774"> 774: </a>                }
</span><span id="775" class="l"><a class="l" href="#775"> 775: </a>                <span class="php-var">$w</span> = <span class="php-var">$seq</span>{<span class="php-var">$j</span>};
</span><span id="776" class="l"><a class="l" href="#776"> 776: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-var">$t</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-var">$w</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="777" class="l"><a class="l" href="#777"> 777: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-var">$w</span>;
</span><span id="778" class="l"><a class="l" href="#778"> 778: </a>                ++<span class="php-var">$k</span>;
</span><span id="779" class="l"><a class="l" href="#779"> 779: </a>            }
</span><span id="780" class="l"><a class="l" href="#780"> 780: </a>        }
</span><span id="781" class="l"><a class="l" href="#781"> 781: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="782" class="l"><a class="l" href="#782"> 782: </a>    }
</span><span id="783" class="l"><a class="l" href="#783"> 783: </a>
</span><span id="784" class="l"><a class="l" href="#784"> 784: </a>    <span class="php-comment">/**
</span></span><span id="785" class="l"><a class="l" href="#785"> 785: </a><span class="php-comment">     * C128 barcodes.
</span></span><span id="786" class="l"><a class="l" href="#786"> 786: </a><span class="php-comment">     * Very capable code, excellent density, high reliability; in very wide use world-wide
</span></span><span id="787" class="l"><a class="l" href="#787"> 787: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="788" class="l"><a class="l" href="#788"> 788: </a><span class="php-comment">     * @param string $type barcode type: A, B or C
</span></span><span id="789" class="l"><a class="l" href="#789"> 789: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="790" class="l"><a class="l" href="#790"> 790: </a><span class="php-comment">     * @access protected
</span></span><span id="791" class="l"><a class="l" href="#791"> 791: </a><span class="php-comment">     */</span>
</span><span id="792" class="l"><a class="l" href="#792"> 792: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_c128" href="#_barcode_c128">barcode_c128</a>(<span class="php-var">$code</span>, <span class="php-var">$type</span>=<span class="php-quote">'B'</span>) {
</span><span id="793" class="l"><a class="l" href="#793"> 793: </a>        <span class="php-var">$chr</span> = <span class="php-keyword1">array</span>(
</span><span id="794" class="l"><a class="l" href="#794"> 794: </a>            <span class="php-quote">'212222'</span>, <span class="php-comment">/* 00 */</span>
</span><span id="795" class="l"><a class="l" href="#795"> 795: </a>            <span class="php-quote">'222122'</span>, <span class="php-comment">/* 01 */</span>
</span><span id="796" class="l"><a class="l" href="#796"> 796: </a>            <span class="php-quote">'222221'</span>, <span class="php-comment">/* 02 */</span>
</span><span id="797" class="l"><a class="l" href="#797"> 797: </a>            <span class="php-quote">'121223'</span>, <span class="php-comment">/* 03 */</span>
</span><span id="798" class="l"><a class="l" href="#798"> 798: </a>            <span class="php-quote">'121322'</span>, <span class="php-comment">/* 04 */</span>
</span><span id="799" class="l"><a class="l" href="#799"> 799: </a>            <span class="php-quote">'131222'</span>, <span class="php-comment">/* 05 */</span>
</span><span id="800" class="l"><a class="l" href="#800"> 800: </a>            <span class="php-quote">'122213'</span>, <span class="php-comment">/* 06 */</span>
</span><span id="801" class="l"><a class="l" href="#801"> 801: </a>            <span class="php-quote">'122312'</span>, <span class="php-comment">/* 07 */</span>
</span><span id="802" class="l"><a class="l" href="#802"> 802: </a>            <span class="php-quote">'132212'</span>, <span class="php-comment">/* 08 */</span>
</span><span id="803" class="l"><a class="l" href="#803"> 803: </a>            <span class="php-quote">'221213'</span>, <span class="php-comment">/* 09 */</span>
</span><span id="804" class="l"><a class="l" href="#804"> 804: </a>            <span class="php-quote">'221312'</span>, <span class="php-comment">/* 10 */</span>
</span><span id="805" class="l"><a class="l" href="#805"> 805: </a>            <span class="php-quote">'231212'</span>, <span class="php-comment">/* 11 */</span>
</span><span id="806" class="l"><a class="l" href="#806"> 806: </a>            <span class="php-quote">'112232'</span>, <span class="php-comment">/* 12 */</span>
</span><span id="807" class="l"><a class="l" href="#807"> 807: </a>            <span class="php-quote">'122132'</span>, <span class="php-comment">/* 13 */</span>
</span><span id="808" class="l"><a class="l" href="#808"> 808: </a>            <span class="php-quote">'122231'</span>, <span class="php-comment">/* 14 */</span>
</span><span id="809" class="l"><a class="l" href="#809"> 809: </a>            <span class="php-quote">'113222'</span>, <span class="php-comment">/* 15 */</span>
</span><span id="810" class="l"><a class="l" href="#810"> 810: </a>            <span class="php-quote">'123122'</span>, <span class="php-comment">/* 16 */</span>
</span><span id="811" class="l"><a class="l" href="#811"> 811: </a>            <span class="php-quote">'123221'</span>, <span class="php-comment">/* 17 */</span>
</span><span id="812" class="l"><a class="l" href="#812"> 812: </a>            <span class="php-quote">'223211'</span>, <span class="php-comment">/* 18 */</span>
</span><span id="813" class="l"><a class="l" href="#813"> 813: </a>            <span class="php-quote">'221132'</span>, <span class="php-comment">/* 19 */</span>
</span><span id="814" class="l"><a class="l" href="#814"> 814: </a>            <span class="php-quote">'221231'</span>, <span class="php-comment">/* 20 */</span>
</span><span id="815" class="l"><a class="l" href="#815"> 815: </a>            <span class="php-quote">'213212'</span>, <span class="php-comment">/* 21 */</span>
</span><span id="816" class="l"><a class="l" href="#816"> 816: </a>            <span class="php-quote">'223112'</span>, <span class="php-comment">/* 22 */</span>
</span><span id="817" class="l"><a class="l" href="#817"> 817: </a>            <span class="php-quote">'312131'</span>, <span class="php-comment">/* 23 */</span>
</span><span id="818" class="l"><a class="l" href="#818"> 818: </a>            <span class="php-quote">'311222'</span>, <span class="php-comment">/* 24 */</span>
</span><span id="819" class="l"><a class="l" href="#819"> 819: </a>            <span class="php-quote">'321122'</span>, <span class="php-comment">/* 25 */</span>
</span><span id="820" class="l"><a class="l" href="#820"> 820: </a>            <span class="php-quote">'321221'</span>, <span class="php-comment">/* 26 */</span>
</span><span id="821" class="l"><a class="l" href="#821"> 821: </a>            <span class="php-quote">'312212'</span>, <span class="php-comment">/* 27 */</span>
</span><span id="822" class="l"><a class="l" href="#822"> 822: </a>            <span class="php-quote">'322112'</span>, <span class="php-comment">/* 28 */</span>
</span><span id="823" class="l"><a class="l" href="#823"> 823: </a>            <span class="php-quote">'322211'</span>, <span class="php-comment">/* 29 */</span>
</span><span id="824" class="l"><a class="l" href="#824"> 824: </a>            <span class="php-quote">'212123'</span>, <span class="php-comment">/* 30 */</span>
</span><span id="825" class="l"><a class="l" href="#825"> 825: </a>            <span class="php-quote">'212321'</span>, <span class="php-comment">/* 31 */</span>
</span><span id="826" class="l"><a class="l" href="#826"> 826: </a>            <span class="php-quote">'232121'</span>, <span class="php-comment">/* 32 */</span>
</span><span id="827" class="l"><a class="l" href="#827"> 827: </a>            <span class="php-quote">'111323'</span>, <span class="php-comment">/* 33 */</span>
</span><span id="828" class="l"><a class="l" href="#828"> 828: </a>            <span class="php-quote">'131123'</span>, <span class="php-comment">/* 34 */</span>
</span><span id="829" class="l"><a class="l" href="#829"> 829: </a>            <span class="php-quote">'131321'</span>, <span class="php-comment">/* 35 */</span>
</span><span id="830" class="l"><a class="l" href="#830"> 830: </a>            <span class="php-quote">'112313'</span>, <span class="php-comment">/* 36 */</span>
</span><span id="831" class="l"><a class="l" href="#831"> 831: </a>            <span class="php-quote">'132113'</span>, <span class="php-comment">/* 37 */</span>
</span><span id="832" class="l"><a class="l" href="#832"> 832: </a>            <span class="php-quote">'132311'</span>, <span class="php-comment">/* 38 */</span>
</span><span id="833" class="l"><a class="l" href="#833"> 833: </a>            <span class="php-quote">'211313'</span>, <span class="php-comment">/* 39 */</span>
</span><span id="834" class="l"><a class="l" href="#834"> 834: </a>            <span class="php-quote">'231113'</span>, <span class="php-comment">/* 40 */</span>
</span><span id="835" class="l"><a class="l" href="#835"> 835: </a>            <span class="php-quote">'231311'</span>, <span class="php-comment">/* 41 */</span>
</span><span id="836" class="l"><a class="l" href="#836"> 836: </a>            <span class="php-quote">'112133'</span>, <span class="php-comment">/* 42 */</span>
</span><span id="837" class="l"><a class="l" href="#837"> 837: </a>            <span class="php-quote">'112331'</span>, <span class="php-comment">/* 43 */</span>
</span><span id="838" class="l"><a class="l" href="#838"> 838: </a>            <span class="php-quote">'132131'</span>, <span class="php-comment">/* 44 */</span>
</span><span id="839" class="l"><a class="l" href="#839"> 839: </a>            <span class="php-quote">'113123'</span>, <span class="php-comment">/* 45 */</span>
</span><span id="840" class="l"><a class="l" href="#840"> 840: </a>            <span class="php-quote">'113321'</span>, <span class="php-comment">/* 46 */</span>
</span><span id="841" class="l"><a class="l" href="#841"> 841: </a>            <span class="php-quote">'133121'</span>, <span class="php-comment">/* 47 */</span>
</span><span id="842" class="l"><a class="l" href="#842"> 842: </a>            <span class="php-quote">'313121'</span>, <span class="php-comment">/* 48 */</span>
</span><span id="843" class="l"><a class="l" href="#843"> 843: </a>            <span class="php-quote">'211331'</span>, <span class="php-comment">/* 49 */</span>
</span><span id="844" class="l"><a class="l" href="#844"> 844: </a>            <span class="php-quote">'231131'</span>, <span class="php-comment">/* 50 */</span>
</span><span id="845" class="l"><a class="l" href="#845"> 845: </a>            <span class="php-quote">'213113'</span>, <span class="php-comment">/* 51 */</span>
</span><span id="846" class="l"><a class="l" href="#846"> 846: </a>            <span class="php-quote">'213311'</span>, <span class="php-comment">/* 52 */</span>
</span><span id="847" class="l"><a class="l" href="#847"> 847: </a>            <span class="php-quote">'213131'</span>, <span class="php-comment">/* 53 */</span>
</span><span id="848" class="l"><a class="l" href="#848"> 848: </a>            <span class="php-quote">'311123'</span>, <span class="php-comment">/* 54 */</span>
</span><span id="849" class="l"><a class="l" href="#849"> 849: </a>            <span class="php-quote">'311321'</span>, <span class="php-comment">/* 55 */</span>
</span><span id="850" class="l"><a class="l" href="#850"> 850: </a>            <span class="php-quote">'331121'</span>, <span class="php-comment">/* 56 */</span>
</span><span id="851" class="l"><a class="l" href="#851"> 851: </a>            <span class="php-quote">'312113'</span>, <span class="php-comment">/* 57 */</span>
</span><span id="852" class="l"><a class="l" href="#852"> 852: </a>            <span class="php-quote">'312311'</span>, <span class="php-comment">/* 58 */</span>
</span><span id="853" class="l"><a class="l" href="#853"> 853: </a>            <span class="php-quote">'332111'</span>, <span class="php-comment">/* 59 */</span>
</span><span id="854" class="l"><a class="l" href="#854"> 854: </a>            <span class="php-quote">'314111'</span>, <span class="php-comment">/* 60 */</span>
</span><span id="855" class="l"><a class="l" href="#855"> 855: </a>            <span class="php-quote">'221411'</span>, <span class="php-comment">/* 61 */</span>
</span><span id="856" class="l"><a class="l" href="#856"> 856: </a>            <span class="php-quote">'431111'</span>, <span class="php-comment">/* 62 */</span>
</span><span id="857" class="l"><a class="l" href="#857"> 857: </a>            <span class="php-quote">'111224'</span>, <span class="php-comment">/* 63 */</span>
</span><span id="858" class="l"><a class="l" href="#858"> 858: </a>            <span class="php-quote">'111422'</span>, <span class="php-comment">/* 64 */</span>
</span><span id="859" class="l"><a class="l" href="#859"> 859: </a>            <span class="php-quote">'121124'</span>, <span class="php-comment">/* 65 */</span>
</span><span id="860" class="l"><a class="l" href="#860"> 860: </a>            <span class="php-quote">'121421'</span>, <span class="php-comment">/* 66 */</span>
</span><span id="861" class="l"><a class="l" href="#861"> 861: </a>            <span class="php-quote">'141122'</span>, <span class="php-comment">/* 67 */</span>
</span><span id="862" class="l"><a class="l" href="#862"> 862: </a>            <span class="php-quote">'141221'</span>, <span class="php-comment">/* 68 */</span>
</span><span id="863" class="l"><a class="l" href="#863"> 863: </a>            <span class="php-quote">'112214'</span>, <span class="php-comment">/* 69 */</span>
</span><span id="864" class="l"><a class="l" href="#864"> 864: </a>            <span class="php-quote">'112412'</span>, <span class="php-comment">/* 70 */</span>
</span><span id="865" class="l"><a class="l" href="#865"> 865: </a>            <span class="php-quote">'122114'</span>, <span class="php-comment">/* 71 */</span>
</span><span id="866" class="l"><a class="l" href="#866"> 866: </a>            <span class="php-quote">'122411'</span>, <span class="php-comment">/* 72 */</span>
</span><span id="867" class="l"><a class="l" href="#867"> 867: </a>            <span class="php-quote">'142112'</span>, <span class="php-comment">/* 73 */</span>
</span><span id="868" class="l"><a class="l" href="#868"> 868: </a>            <span class="php-quote">'142211'</span>, <span class="php-comment">/* 74 */</span>
</span><span id="869" class="l"><a class="l" href="#869"> 869: </a>            <span class="php-quote">'241211'</span>, <span class="php-comment">/* 75 */</span>
</span><span id="870" class="l"><a class="l" href="#870"> 870: </a>            <span class="php-quote">'221114'</span>, <span class="php-comment">/* 76 */</span>
</span><span id="871" class="l"><a class="l" href="#871"> 871: </a>            <span class="php-quote">'413111'</span>, <span class="php-comment">/* 77 */</span>
</span><span id="872" class="l"><a class="l" href="#872"> 872: </a>            <span class="php-quote">'241112'</span>, <span class="php-comment">/* 78 */</span>
</span><span id="873" class="l"><a class="l" href="#873"> 873: </a>            <span class="php-quote">'134111'</span>, <span class="php-comment">/* 79 */</span>
</span><span id="874" class="l"><a class="l" href="#874"> 874: </a>            <span class="php-quote">'111242'</span>, <span class="php-comment">/* 80 */</span>
</span><span id="875" class="l"><a class="l" href="#875"> 875: </a>            <span class="php-quote">'121142'</span>, <span class="php-comment">/* 81 */</span>
</span><span id="876" class="l"><a class="l" href="#876"> 876: </a>            <span class="php-quote">'121241'</span>, <span class="php-comment">/* 82 */</span>
</span><span id="877" class="l"><a class="l" href="#877"> 877: </a>            <span class="php-quote">'114212'</span>, <span class="php-comment">/* 83 */</span>
</span><span id="878" class="l"><a class="l" href="#878"> 878: </a>            <span class="php-quote">'124112'</span>, <span class="php-comment">/* 84 */</span>
</span><span id="879" class="l"><a class="l" href="#879"> 879: </a>            <span class="php-quote">'124211'</span>, <span class="php-comment">/* 85 */</span>
</span><span id="880" class="l"><a class="l" href="#880"> 880: </a>            <span class="php-quote">'411212'</span>, <span class="php-comment">/* 86 */</span>
</span><span id="881" class="l"><a class="l" href="#881"> 881: </a>            <span class="php-quote">'421112'</span>, <span class="php-comment">/* 87 */</span>
</span><span id="882" class="l"><a class="l" href="#882"> 882: </a>            <span class="php-quote">'421211'</span>, <span class="php-comment">/* 88 */</span>
</span><span id="883" class="l"><a class="l" href="#883"> 883: </a>            <span class="php-quote">'212141'</span>, <span class="php-comment">/* 89 */</span>
</span><span id="884" class="l"><a class="l" href="#884"> 884: </a>            <span class="php-quote">'214121'</span>, <span class="php-comment">/* 90 */</span>
</span><span id="885" class="l"><a class="l" href="#885"> 885: </a>            <span class="php-quote">'412121'</span>, <span class="php-comment">/* 91 */</span>
</span><span id="886" class="l"><a class="l" href="#886"> 886: </a>            <span class="php-quote">'111143'</span>, <span class="php-comment">/* 92 */</span>
</span><span id="887" class="l"><a class="l" href="#887"> 887: </a>            <span class="php-quote">'111341'</span>, <span class="php-comment">/* 93 */</span>
</span><span id="888" class="l"><a class="l" href="#888"> 888: </a>            <span class="php-quote">'131141'</span>, <span class="php-comment">/* 94 */</span>
</span><span id="889" class="l"><a class="l" href="#889"> 889: </a>            <span class="php-quote">'114113'</span>, <span class="php-comment">/* 95 */</span>
</span><span id="890" class="l"><a class="l" href="#890"> 890: </a>            <span class="php-quote">'114311'</span>, <span class="php-comment">/* 96 */</span>
</span><span id="891" class="l"><a class="l" href="#891"> 891: </a>            <span class="php-quote">'411113'</span>, <span class="php-comment">/* 97 */</span>
</span><span id="892" class="l"><a class="l" href="#892"> 892: </a>            <span class="php-quote">'411311'</span>, <span class="php-comment">/* 98 */</span>
</span><span id="893" class="l"><a class="l" href="#893"> 893: </a>            <span class="php-quote">'113141'</span>, <span class="php-comment">/* 99 */</span>
</span><span id="894" class="l"><a class="l" href="#894"> 894: </a>            <span class="php-quote">'114131'</span>, <span class="php-comment">/* 100 */</span>
</span><span id="895" class="l"><a class="l" href="#895"> 895: </a>            <span class="php-quote">'311141'</span>, <span class="php-comment">/* 101 */</span>
</span><span id="896" class="l"><a class="l" href="#896"> 896: </a>            <span class="php-quote">'411131'</span>, <span class="php-comment">/* 102 */</span>
</span><span id="897" class="l"><a class="l" href="#897"> 897: </a>            <span class="php-quote">'211412'</span>, <span class="php-comment">/* 103 START A */</span>
</span><span id="898" class="l"><a class="l" href="#898"> 898: </a>            <span class="php-quote">'211214'</span>, <span class="php-comment">/* 104 START B  */</span>
</span><span id="899" class="l"><a class="l" href="#899"> 899: </a>            <span class="php-quote">'211232'</span>, <span class="php-comment">/* 105 START C  */</span>
</span><span id="900" class="l"><a class="l" href="#900"> 900: </a>            <span class="php-quote">'233111'</span>, <span class="php-comment">/* STOP */</span>
</span><span id="901" class="l"><a class="l" href="#901"> 901: </a>            <span class="php-quote">'200000'</span>  <span class="php-comment">/* END */</span>
</span><span id="902" class="l"><a class="l" href="#902"> 902: </a>        );
</span><span id="903" class="l"><a class="l" href="#903"> 903: </a>        <span class="php-var">$keys</span> = <span class="php-quote">''</span>;
</span><span id="904" class="l"><a class="l" href="#904"> 904: </a>        <span class="php-keyword1">switch</span>(<span class="php-keyword2">strtoupper</span>(<span class="php-var">$type</span>)) {
</span><span id="905" class="l"><a class="l" href="#905"> 905: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'A'</span>: {
</span><span id="906" class="l"><a class="l" href="#906"> 906: </a>                <span class="php-var">$startid</span> = <span class="php-num">103</span>;
</span><span id="907" class="l"><a class="l" href="#907"> 907: </a>                <span class="php-var">$keys</span> = <span class="php-quote">' !&quot;#$%&amp;\'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_'</span>;
</span><span id="908" class="l"><a class="l" href="#908"> 908: </a>                <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-num">32</span>; ++<span class="php-var">$i</span>) {
</span><span id="909" class="l"><a class="l" href="#909"> 909: </a>                    <span class="php-var">$keys</span> .= <span class="php-keyword2">chr</span>(<span class="php-var">$i</span>);
</span><span id="910" class="l"><a class="l" href="#910"> 910: </a>                }
</span><span id="911" class="l"><a class="l" href="#911"> 911: </a>                <span class="php-keyword1">break</span>;
</span><span id="912" class="l"><a class="l" href="#912"> 912: </a>            }
</span><span id="913" class="l"><a class="l" href="#913"> 913: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'B'</span>: {
</span><span id="914" class="l"><a class="l" href="#914"> 914: </a>                <span class="php-var">$startid</span> = <span class="php-num">104</span>;
</span><span id="915" class="l"><a class="l" href="#915"> 915: </a>                <span class="php-var">$keys</span> = <span class="php-quote">' !&quot;#$%&amp;\'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~'</span>.<span class="php-keyword2">chr</span>(<span class="php-num">127</span>);
</span><span id="916" class="l"><a class="l" href="#916"> 916: </a>                <span class="php-keyword1">break</span>;
</span><span id="917" class="l"><a class="l" href="#917"> 917: </a>            }
</span><span id="918" class="l"><a class="l" href="#918"> 918: </a>            <span class="php-keyword1">case</span> <span class="php-quote">'C'</span>: {
</span><span id="919" class="l"><a class="l" href="#919"> 919: </a>                <span class="php-var">$startid</span> = <span class="php-num">105</span>;
</span><span id="920" class="l"><a class="l" href="#920"> 920: </a>                <span class="php-var">$keys</span> = <span class="php-quote">''</span>;
</span><span id="921" class="l"><a class="l" href="#921"> 921: </a>                <span class="php-keyword1">if</span> ((<span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>) % <span class="php-num">2</span>) != <span class="php-num">0</span>) {
</span><span id="922" class="l"><a class="l" href="#922"> 922: </a>                    <span class="php-comment">// The length of barcode value must be even ($code). You must pad the number with zeros</span>
</span><span id="923" class="l"><a class="l" href="#923"> 923: </a>                    <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="924" class="l"><a class="l" href="#924"> 924: </a>                }
</span><span id="925" class="l"><a class="l" href="#925"> 925: </a>                <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt;= <span class="php-num">99</span>; ++<span class="php-var">$i</span>) {
</span><span id="926" class="l"><a class="l" href="#926"> 926: </a>                    <span class="php-var">$keys</span> .= <span class="php-keyword2">chr</span>(<span class="php-var">$i</span>);
</span><span id="927" class="l"><a class="l" href="#927"> 927: </a>                }
</span><span id="928" class="l"><a class="l" href="#928"> 928: </a>                <span class="php-var">$new_code</span> = <span class="php-quote">''</span>;
</span><span id="929" class="l"><a class="l" href="#929"> 929: </a>                <span class="php-var">$hclen</span> = (<span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>) / <span class="php-num">2</span>);
</span><span id="930" class="l"><a class="l" href="#930"> 930: </a>                <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$hclen</span>; ++<span class="php-var">$i</span>) {
</span><span id="931" class="l"><a class="l" href="#931"> 931: </a>                    <span class="php-var">$new_code</span> .= <span class="php-keyword2">chr</span>(<span class="php-keyword2">intval</span>(<span class="php-var">$code</span>{(<span class="php-num">2</span> * <span class="php-var">$i</span>)}.<span class="php-var">$code</span>{(<span class="php-num">2</span> * <span class="php-var">$i</span> + <span class="php-num">1</span>)}));
</span><span id="932" class="l"><a class="l" href="#932"> 932: </a>                }
</span><span id="933" class="l"><a class="l" href="#933"> 933: </a>                <span class="php-var">$code</span> = <span class="php-var">$new_code</span>;
</span><span id="934" class="l"><a class="l" href="#934"> 934: </a>                <span class="php-keyword1">break</span>;
</span><span id="935" class="l"><a class="l" href="#935"> 935: </a>            }
</span><span id="936" class="l"><a class="l" href="#936"> 936: </a>            <span class="php-keyword1">default</span>: {
</span><span id="937" class="l"><a class="l" href="#937"> 937: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="938" class="l"><a class="l" href="#938"> 938: </a>            }
</span><span id="939" class="l"><a class="l" href="#939"> 939: </a>        }
</span><span id="940" class="l"><a class="l" href="#940"> 940: </a>        <span class="php-comment">// calculate check character</span>
</span><span id="941" class="l"><a class="l" href="#941"> 941: </a>        <span class="php-var">$sum</span> = <span class="php-var">$startid</span>;
</span><span id="942" class="l"><a class="l" href="#942"> 942: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="943" class="l"><a class="l" href="#943"> 943: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; ++<span class="php-var">$i</span>) {
</span><span id="944" class="l"><a class="l" href="#944"> 944: </a>            <span class="php-var">$sum</span> +=  (<span class="php-keyword2">strpos</span>(<span class="php-var">$keys</span>, <span class="php-var">$code</span>{<span class="php-var">$i</span>}) * (<span class="php-var">$i</span>+<span class="php-num">1</span>));
</span><span id="945" class="l"><a class="l" href="#945"> 945: </a>        }
</span><span id="946" class="l"><a class="l" href="#946"> 946: </a>        <span class="php-var">$check</span> = (<span class="php-var">$sum</span> % <span class="php-num">103</span>);
</span><span id="947" class="l"><a class="l" href="#947"> 947: </a>        <span class="php-comment">// add start, check and stop codes</span>
</span><span id="948" class="l"><a class="l" href="#948"> 948: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">chr</span>(<span class="php-var">$startid</span>).<span class="php-var">$code</span>.<span class="php-keyword2">chr</span>(<span class="php-var">$check</span>).<span class="php-keyword2">chr</span>(<span class="php-num">106</span>).<span class="php-keyword2">chr</span>(<span class="php-num">107</span>);
</span><span id="949" class="l"><a class="l" href="#949"> 949: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="950" class="l"><a class="l" href="#950"> 950: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="951" class="l"><a class="l" href="#951"> 951: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="952" class="l"><a class="l" href="#952"> 952: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="953" class="l"><a class="l" href="#953"> 953: </a>            <span class="php-var">$ck</span> = <span class="php-keyword2">strpos</span>(<span class="php-var">$keys</span>, <span class="php-var">$code</span>{<span class="php-var">$i</span>});
</span><span id="954" class="l"><a class="l" href="#954"> 954: </a>            <span class="php-keyword1">if</span> ((<span class="php-var">$i</span> == <span class="php-num">0</span>) <span class="php-keyword1">OR</span> (<span class="php-var">$i</span> &gt; (<span class="php-var">$len</span>-<span class="php-num">4</span>))) {
</span><span id="955" class="l"><a class="l" href="#955"> 955: </a>                <span class="php-var">$char_num</span> = <span class="php-keyword2">ord</span>(<span class="php-var">$code</span>{<span class="php-var">$i</span>});
</span><span id="956" class="l"><a class="l" href="#956"> 956: </a>                <span class="php-var">$seq</span> = <span class="php-var">$chr</span>[<span class="php-var">$char_num</span>];
</span><span id="957" class="l"><a class="l" href="#957"> 957: </a>            } <span class="php-keyword1">elseif</span>((<span class="php-var">$ck</span> &gt;= <span class="php-num">0</span>) <span class="php-keyword1">AND</span> <span class="php-keyword1">isset</span>(<span class="php-var">$chr</span>[<span class="php-var">$ck</span>])) {
</span><span id="958" class="l"><a class="l" href="#958"> 958: </a>                    <span class="php-var">$seq</span> = <span class="php-var">$chr</span>[<span class="php-var">$ck</span>];
</span><span id="959" class="l"><a class="l" href="#959"> 959: </a>            } <span class="php-keyword1">else</span> {
</span><span id="960" class="l"><a class="l" href="#960"> 960: </a>                <span class="php-comment">// invalid character</span>
</span><span id="961" class="l"><a class="l" href="#961"> 961: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="962" class="l"><a class="l" href="#962"> 962: </a>            }
</span><span id="963" class="l"><a class="l" href="#963"> 963: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$j</span> = <span class="php-num">0</span>; <span class="php-var">$j</span> &lt; <span class="php-num">6</span>; ++<span class="php-var">$j</span>) {
</span><span id="964" class="l"><a class="l" href="#964"> 964: </a>                <span class="php-keyword1">if</span> ((<span class="php-var">$j</span> % <span class="php-num">2</span>) == <span class="php-num">0</span>) {
</span><span id="965" class="l"><a class="l" href="#965"> 965: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">true</span>; <span class="php-comment">// bar</span>
</span><span id="966" class="l"><a class="l" href="#966"> 966: </a>                } <span class="php-keyword1">else</span> {
</span><span id="967" class="l"><a class="l" href="#967"> 967: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">false</span>; <span class="php-comment">// space</span>
</span><span id="968" class="l"><a class="l" href="#968"> 968: </a>                }
</span><span id="969" class="l"><a class="l" href="#969"> 969: </a>                <span class="php-var">$w</span> = <span class="php-var">$seq</span>{<span class="php-var">$j</span>};
</span><span id="970" class="l"><a class="l" href="#970"> 970: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-var">$t</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-var">$w</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="971" class="l"><a class="l" href="#971"> 971: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-var">$w</span>;
</span><span id="972" class="l"><a class="l" href="#972"> 972: </a>                ++<span class="php-var">$k</span>;
</span><span id="973" class="l"><a class="l" href="#973"> 973: </a>            }
</span><span id="974" class="l"><a class="l" href="#974"> 974: </a>        }
</span><span id="975" class="l"><a class="l" href="#975"> 975: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="976" class="l"><a class="l" href="#976"> 976: </a>    }
</span><span id="977" class="l"><a class="l" href="#977"> 977: </a>
</span><span id="978" class="l"><a class="l" href="#978"> 978: </a>    <span class="php-comment">/**
</span></span><span id="979" class="l"><a class="l" href="#979"> 979: </a><span class="php-comment">     * EAN13 and UPC-A barcodes.
</span></span><span id="980" class="l"><a class="l" href="#980"> 980: </a><span class="php-comment">     * EAN13: European Article Numbering international retail product code
</span></span><span id="981" class="l"><a class="l" href="#981"> 981: </a><span class="php-comment">     * UPC-A: Universal product code seen on almost all retail products in the USA and Canada
</span></span><span id="982" class="l"><a class="l" href="#982"> 982: </a><span class="php-comment">     * UPC-E: Short version of UPC symbol
</span></span><span id="983" class="l"><a class="l" href="#983"> 983: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="984" class="l"><a class="l" href="#984"> 984: </a><span class="php-comment">     * @param string $len barcode type: 6 = UPC-E, 8 = EAN8, 13 = EAN13, 12 = UPC-A
</span></span><span id="985" class="l"><a class="l" href="#985"> 985: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="986" class="l"><a class="l" href="#986"> 986: </a><span class="php-comment">     * @access protected
</span></span><span id="987" class="l"><a class="l" href="#987"> 987: </a><span class="php-comment">     */</span>
</span><span id="988" class="l"><a class="l" href="#988"> 988: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_eanupc" href="#_barcode_eanupc">barcode_eanupc</a>(<span class="php-var">$code</span>, <span class="php-var">$len</span>=<span class="php-num">13</span>) {
</span><span id="989" class="l"><a class="l" href="#989"> 989: </a>        <span class="php-var">$upce</span> = <span class="php-keyword1">false</span>;
</span><span id="990" class="l"><a class="l" href="#990"> 990: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$len</span> == <span class="php-num">6</span>) {
</span><span id="991" class="l"><a class="l" href="#991"> 991: </a>            <span class="php-var">$len</span> = <span class="php-num">12</span>; <span class="php-comment">// UPC-A</span>
</span><span id="992" class="l"><a class="l" href="#992"> 992: </a>            <span class="php-var">$upce</span> = <span class="php-keyword1">true</span>; <span class="php-comment">// UPC-E mode</span>
</span><span id="993" class="l"><a class="l" href="#993"> 993: </a>        }
</span><span id="994" class="l"><a class="l" href="#994"> 994: </a>        <span class="php-var">$data_len</span> = <span class="php-var">$len</span> - <span class="php-num">1</span>;
</span><span id="995" class="l"><a class="l" href="#995"> 995: </a>        <span class="php-comment">//Padding</span>
</span><span id="996" class="l"><a class="l" href="#996"> 996: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">str_pad</span>(<span class="php-var">$code</span>, <span class="php-var">$data_len</span>, <span class="php-quote">'0'</span>, STR_PAD_LEFT);
</span><span id="997" class="l"><a class="l" href="#997"> 997: </a>        <span class="php-var">$code_len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="998" class="l"><a class="l" href="#998"> 998: </a>        <span class="php-comment">// calculate check digit</span>
</span><span id="999" class="l"><a class="l" href="#999"> 999: </a>        <span class="php-var">$sum_a</span> = <span class="php-num">0</span>;
</span><span id="1000" class="l"><a class="l" href="#1000">1000: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">1</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$data_len</span>; <span class="php-var">$i</span>+=<span class="php-num">2</span>) {
</span><span id="1001" class="l"><a class="l" href="#1001">1001: </a>            <span class="php-var">$sum_a</span> += <span class="php-var">$code</span>{<span class="php-var">$i</span>};
</span><span id="1002" class="l"><a class="l" href="#1002">1002: </a>        }
</span><span id="1003" class="l"><a class="l" href="#1003">1003: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$len</span> &gt; <span class="php-num">12</span>) {
</span><span id="1004" class="l"><a class="l" href="#1004">1004: </a>            <span class="php-var">$sum_a</span> *= <span class="php-num">3</span>;
</span><span id="1005" class="l"><a class="l" href="#1005">1005: </a>        }
</span><span id="1006" class="l"><a class="l" href="#1006">1006: </a>        <span class="php-var">$sum_b</span> = <span class="php-num">0</span>;
</span><span id="1007" class="l"><a class="l" href="#1007">1007: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$data_len</span>; <span class="php-var">$i</span>+=<span class="php-num">2</span>) {
</span><span id="1008" class="l"><a class="l" href="#1008">1008: </a>            <span class="php-var">$sum_b</span> += (<span class="php-var">$code</span>{<span class="php-var">$i</span>});
</span><span id="1009" class="l"><a class="l" href="#1009">1009: </a>        }
</span><span id="1010" class="l"><a class="l" href="#1010">1010: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$len</span> &lt; <span class="php-num">13</span>) {
</span><span id="1011" class="l"><a class="l" href="#1011">1011: </a>            <span class="php-var">$sum_b</span> *= <span class="php-num">3</span>;
</span><span id="1012" class="l"><a class="l" href="#1012">1012: </a>        }
</span><span id="1013" class="l"><a class="l" href="#1013">1013: </a>        <span class="php-var">$r</span> = (<span class="php-var">$sum_a</span> + <span class="php-var">$sum_b</span>) % <span class="php-num">10</span>;
</span><span id="1014" class="l"><a class="l" href="#1014">1014: </a>        <span class="php-keyword1">if</span>(<span class="php-var">$r</span> &gt; <span class="php-num">0</span>) {
</span><span id="1015" class="l"><a class="l" href="#1015">1015: </a>            <span class="php-var">$r</span> = (<span class="php-num">10</span> - <span class="php-var">$r</span>);
</span><span id="1016" class="l"><a class="l" href="#1016">1016: </a>        }
</span><span id="1017" class="l"><a class="l" href="#1017">1017: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$code_len</span> == <span class="php-var">$data_len</span>) {
</span><span id="1018" class="l"><a class="l" href="#1018">1018: </a>            <span class="php-comment">// add check digit</span>
</span><span id="1019" class="l"><a class="l" href="#1019">1019: </a>            <span class="php-var">$code</span> .= <span class="php-var">$r</span>;
</span><span id="1020" class="l"><a class="l" href="#1020">1020: </a>        } <span class="php-keyword1">elseif</span> (<span class="php-var">$r</span> !== <span class="php-keyword2">intval</span>(<span class="php-var">$code</span>{<span class="php-var">$data_len</span>})) {
</span><span id="1021" class="l"><a class="l" href="#1021">1021: </a>            <span class="php-comment">// wrong checkdigit</span>
</span><span id="1022" class="l"><a class="l" href="#1022">1022: </a>            <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="1023" class="l"><a class="l" href="#1023">1023: </a>        }
</span><span id="1024" class="l"><a class="l" href="#1024">1024: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$len</span> == <span class="php-num">12</span>) {
</span><span id="1025" class="l"><a class="l" href="#1025">1025: </a>            <span class="php-comment">// UPC-A</span>
</span><span id="1026" class="l"><a class="l" href="#1026">1026: </a>            <span class="php-var">$code</span> = <span class="php-quote">'0'</span>.<span class="php-var">$code</span>;
</span><span id="1027" class="l"><a class="l" href="#1027">1027: </a>            ++<span class="php-var">$len</span>;
</span><span id="1028" class="l"><a class="l" href="#1028">1028: </a>        }
</span><span id="1029" class="l"><a class="l" href="#1029">1029: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$upce</span>) {
</span><span id="1030" class="l"><a class="l" href="#1030">1030: </a>            <span class="php-comment">// convert UPC-A to UPC-E</span>
</span><span id="1031" class="l"><a class="l" href="#1031">1031: </a>            <span class="php-var">$tmp</span> = <span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">4</span>, <span class="php-num">3</span>);
</span><span id="1032" class="l"><a class="l" href="#1032">1032: </a>            <span class="php-keyword1">if</span> ((<span class="php-var">$tmp</span> == <span class="php-quote">'000'</span>) <span class="php-keyword1">OR</span> (<span class="php-var">$tmp</span> == <span class="php-quote">'100'</span>) <span class="php-keyword1">OR</span> (<span class="php-var">$tmp</span> == <span class="php-quote">'200'</span>)) {
</span><span id="1033" class="l"><a class="l" href="#1033">1033: </a>                <span class="php-comment">// manufacturer code ends in 000, 100, or 200</span>
</span><span id="1034" class="l"><a class="l" href="#1034">1034: </a>                <span class="php-var">$upce_code</span> = <span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">2</span>, <span class="php-num">2</span>).<span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">9</span>, <span class="php-num">3</span>).<span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">4</span>, <span class="php-num">1</span>);
</span><span id="1035" class="l"><a class="l" href="#1035">1035: </a>            } <span class="php-keyword1">else</span> {
</span><span id="1036" class="l"><a class="l" href="#1036">1036: </a>                <span class="php-var">$tmp</span> = <span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">5</span>, <span class="php-num">2</span>);
</span><span id="1037" class="l"><a class="l" href="#1037">1037: </a>                <span class="php-keyword1">if</span> (<span class="php-var">$tmp</span> == <span class="php-quote">'00'</span>) {
</span><span id="1038" class="l"><a class="l" href="#1038">1038: </a>                    <span class="php-comment">// manufacturer code ends in 00</span>
</span><span id="1039" class="l"><a class="l" href="#1039">1039: </a>                    <span class="php-var">$upce_code</span> = <span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">2</span>, <span class="php-num">3</span>).<span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">10</span>, <span class="php-num">2</span>).<span class="php-quote">'3'</span>;
</span><span id="1040" class="l"><a class="l" href="#1040">1040: </a>                } <span class="php-keyword1">else</span> {
</span><span id="1041" class="l"><a class="l" href="#1041">1041: </a>                    <span class="php-var">$tmp</span> = <span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">6</span>, <span class="php-num">1</span>);
</span><span id="1042" class="l"><a class="l" href="#1042">1042: </a>                    <span class="php-keyword1">if</span> (<span class="php-var">$tmp</span> == <span class="php-quote">'0'</span>) {
</span><span id="1043" class="l"><a class="l" href="#1043">1043: </a>                        <span class="php-comment">// manufacturer code ends in 0</span>
</span><span id="1044" class="l"><a class="l" href="#1044">1044: </a>                        <span class="php-var">$upce_code</span> = <span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">2</span>, <span class="php-num">4</span>).<span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">11</span>, <span class="php-num">1</span>).<span class="php-quote">'4'</span>;
</span><span id="1045" class="l"><a class="l" href="#1045">1045: </a>                    } <span class="php-keyword1">else</span> {
</span><span id="1046" class="l"><a class="l" href="#1046">1046: </a>                        <span class="php-comment">// manufacturer code does not end in zero</span>
</span><span id="1047" class="l"><a class="l" href="#1047">1047: </a>                        <span class="php-var">$upce_code</span> = <span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">2</span>, <span class="php-num">5</span>).<span class="php-keyword2">substr</span>(<span class="php-var">$code</span>, <span class="php-num">11</span>, <span class="php-num">1</span>);
</span><span id="1048" class="l"><a class="l" href="#1048">1048: </a>                    }
</span><span id="1049" class="l"><a class="l" href="#1049">1049: </a>                }
</span><span id="1050" class="l"><a class="l" href="#1050">1050: </a>            }
</span><span id="1051" class="l"><a class="l" href="#1051">1051: </a>        }
</span><span id="1052" class="l"><a class="l" href="#1052">1052: </a>        <span class="php-comment">//Convert digits to bars</span>
</span><span id="1053" class="l"><a class="l" href="#1053">1053: </a>        <span class="php-var">$codes</span> = <span class="php-keyword1">array</span>(
</span><span id="1054" class="l"><a class="l" href="#1054">1054: </a>            <span class="php-quote">'A'</span>=&gt;<span class="php-keyword1">array</span>( <span class="php-comment">// left odd parity</span>
</span><span id="1055" class="l"><a class="l" href="#1055">1055: </a>                <span class="php-quote">'0'</span>=&gt;<span class="php-quote">'0001101'</span>,
</span><span id="1056" class="l"><a class="l" href="#1056">1056: </a>                <span class="php-quote">'1'</span>=&gt;<span class="php-quote">'0011001'</span>,
</span><span id="1057" class="l"><a class="l" href="#1057">1057: </a>                <span class="php-quote">'2'</span>=&gt;<span class="php-quote">'0010011'</span>,
</span><span id="1058" class="l"><a class="l" href="#1058">1058: </a>                <span class="php-quote">'3'</span>=&gt;<span class="php-quote">'0111101'</span>,
</span><span id="1059" class="l"><a class="l" href="#1059">1059: </a>                <span class="php-quote">'4'</span>=&gt;<span class="php-quote">'0100011'</span>,
</span><span id="1060" class="l"><a class="l" href="#1060">1060: </a>                <span class="php-quote">'5'</span>=&gt;<span class="php-quote">'0110001'</span>,
</span><span id="1061" class="l"><a class="l" href="#1061">1061: </a>                <span class="php-quote">'6'</span>=&gt;<span class="php-quote">'0101111'</span>,
</span><span id="1062" class="l"><a class="l" href="#1062">1062: </a>                <span class="php-quote">'7'</span>=&gt;<span class="php-quote">'0111011'</span>,
</span><span id="1063" class="l"><a class="l" href="#1063">1063: </a>                <span class="php-quote">'8'</span>=&gt;<span class="php-quote">'0110111'</span>,
</span><span id="1064" class="l"><a class="l" href="#1064">1064: </a>                <span class="php-quote">'9'</span>=&gt;<span class="php-quote">'0001011'</span>),
</span><span id="1065" class="l"><a class="l" href="#1065">1065: </a>            <span class="php-quote">'B'</span>=&gt;<span class="php-keyword1">array</span>( <span class="php-comment">// left even parity</span>
</span><span id="1066" class="l"><a class="l" href="#1066">1066: </a>                <span class="php-quote">'0'</span>=&gt;<span class="php-quote">'0100111'</span>,
</span><span id="1067" class="l"><a class="l" href="#1067">1067: </a>                <span class="php-quote">'1'</span>=&gt;<span class="php-quote">'0110011'</span>,
</span><span id="1068" class="l"><a class="l" href="#1068">1068: </a>                <span class="php-quote">'2'</span>=&gt;<span class="php-quote">'0011011'</span>,
</span><span id="1069" class="l"><a class="l" href="#1069">1069: </a>                <span class="php-quote">'3'</span>=&gt;<span class="php-quote">'0100001'</span>,
</span><span id="1070" class="l"><a class="l" href="#1070">1070: </a>                <span class="php-quote">'4'</span>=&gt;<span class="php-quote">'0011101'</span>,
</span><span id="1071" class="l"><a class="l" href="#1071">1071: </a>                <span class="php-quote">'5'</span>=&gt;<span class="php-quote">'0111001'</span>,
</span><span id="1072" class="l"><a class="l" href="#1072">1072: </a>                <span class="php-quote">'6'</span>=&gt;<span class="php-quote">'0000101'</span>,
</span><span id="1073" class="l"><a class="l" href="#1073">1073: </a>                <span class="php-quote">'7'</span>=&gt;<span class="php-quote">'0010001'</span>,
</span><span id="1074" class="l"><a class="l" href="#1074">1074: </a>                <span class="php-quote">'8'</span>=&gt;<span class="php-quote">'0001001'</span>,
</span><span id="1075" class="l"><a class="l" href="#1075">1075: </a>                <span class="php-quote">'9'</span>=&gt;<span class="php-quote">'0010111'</span>),
</span><span id="1076" class="l"><a class="l" href="#1076">1076: </a>            <span class="php-quote">'C'</span>=&gt;<span class="php-keyword1">array</span>( <span class="php-comment">// right</span>
</span><span id="1077" class="l"><a class="l" href="#1077">1077: </a>                <span class="php-quote">'0'</span>=&gt;<span class="php-quote">'1110010'</span>,
</span><span id="1078" class="l"><a class="l" href="#1078">1078: </a>                <span class="php-quote">'1'</span>=&gt;<span class="php-quote">'1100110'</span>,
</span><span id="1079" class="l"><a class="l" href="#1079">1079: </a>                <span class="php-quote">'2'</span>=&gt;<span class="php-quote">'1101100'</span>,
</span><span id="1080" class="l"><a class="l" href="#1080">1080: </a>                <span class="php-quote">'3'</span>=&gt;<span class="php-quote">'1000010'</span>,
</span><span id="1081" class="l"><a class="l" href="#1081">1081: </a>                <span class="php-quote">'4'</span>=&gt;<span class="php-quote">'1011100'</span>,
</span><span id="1082" class="l"><a class="l" href="#1082">1082: </a>                <span class="php-quote">'5'</span>=&gt;<span class="php-quote">'1001110'</span>,
</span><span id="1083" class="l"><a class="l" href="#1083">1083: </a>                <span class="php-quote">'6'</span>=&gt;<span class="php-quote">'1010000'</span>,
</span><span id="1084" class="l"><a class="l" href="#1084">1084: </a>                <span class="php-quote">'7'</span>=&gt;<span class="php-quote">'1000100'</span>,
</span><span id="1085" class="l"><a class="l" href="#1085">1085: </a>                <span class="php-quote">'8'</span>=&gt;<span class="php-quote">'1001000'</span>,
</span><span id="1086" class="l"><a class="l" href="#1086">1086: </a>                <span class="php-quote">'9'</span>=&gt;<span class="php-quote">'1110100'</span>)
</span><span id="1087" class="l"><a class="l" href="#1087">1087: </a>        );
</span><span id="1088" class="l"><a class="l" href="#1088">1088: </a>        <span class="php-var">$parities</span> = <span class="php-keyword1">array</span>(
</span><span id="1089" class="l"><a class="l" href="#1089">1089: </a>            <span class="php-quote">'0'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1090" class="l"><a class="l" href="#1090">1090: </a>            <span class="php-quote">'1'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>),
</span><span id="1091" class="l"><a class="l" href="#1091">1091: </a>            <span class="php-quote">'2'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1092" class="l"><a class="l" href="#1092">1092: </a>            <span class="php-quote">'3'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1093" class="l"><a class="l" href="#1093">1093: </a>            <span class="php-quote">'4'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>),
</span><span id="1094" class="l"><a class="l" href="#1094">1094: </a>            <span class="php-quote">'5'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1095" class="l"><a class="l" href="#1095">1095: </a>            <span class="php-quote">'6'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1096" class="l"><a class="l" href="#1096">1096: </a>            <span class="php-quote">'7'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1097" class="l"><a class="l" href="#1097">1097: </a>            <span class="php-quote">'8'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1098" class="l"><a class="l" href="#1098">1098: </a>            <span class="php-quote">'9'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>)
</span><span id="1099" class="l"><a class="l" href="#1099">1099: </a>        );
</span><span id="1100" class="l"><a class="l" href="#1100">1100: </a>        <span class="php-var">$upce_parities</span> = <span class="php-keyword1">array</span>();
</span><span id="1101" class="l"><a class="l" href="#1101">1101: </a>        <span class="php-var">$upce_parities</span>[<span class="php-num">0</span>] = <span class="php-keyword1">array</span>(
</span><span id="1102" class="l"><a class="l" href="#1102">1102: </a>            <span class="php-quote">'0'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1103" class="l"><a class="l" href="#1103">1103: </a>            <span class="php-quote">'1'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1104" class="l"><a class="l" href="#1104">1104: </a>            <span class="php-quote">'2'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1105" class="l"><a class="l" href="#1105">1105: </a>            <span class="php-quote">'3'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1106" class="l"><a class="l" href="#1106">1106: </a>            <span class="php-quote">'4'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1107" class="l"><a class="l" href="#1107">1107: </a>            <span class="php-quote">'5'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1108" class="l"><a class="l" href="#1108">1108: </a>            <span class="php-quote">'6'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>),
</span><span id="1109" class="l"><a class="l" href="#1109">1109: </a>            <span class="php-quote">'7'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1110" class="l"><a class="l" href="#1110">1110: </a>            <span class="php-quote">'8'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1111" class="l"><a class="l" href="#1111">1111: </a>            <span class="php-quote">'9'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>)
</span><span id="1112" class="l"><a class="l" href="#1112">1112: </a>        );
</span><span id="1113" class="l"><a class="l" href="#1113">1113: </a>        <span class="php-var">$upce_parities</span>[<span class="php-num">1</span>] = <span class="php-keyword1">array</span>(
</span><span id="1114" class="l"><a class="l" href="#1114">1114: </a>            <span class="php-quote">'0'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>),
</span><span id="1115" class="l"><a class="l" href="#1115">1115: </a>            <span class="php-quote">'1'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>),
</span><span id="1116" class="l"><a class="l" href="#1116">1116: </a>            <span class="php-quote">'2'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1117" class="l"><a class="l" href="#1117">1117: </a>            <span class="php-quote">'3'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1118" class="l"><a class="l" href="#1118">1118: </a>            <span class="php-quote">'4'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>),
</span><span id="1119" class="l"><a class="l" href="#1119">1119: </a>            <span class="php-quote">'5'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1120" class="l"><a class="l" href="#1120">1120: </a>            <span class="php-quote">'6'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1121" class="l"><a class="l" href="#1121">1121: </a>            <span class="php-quote">'7'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1122" class="l"><a class="l" href="#1122">1122: </a>            <span class="php-quote">'8'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1123" class="l"><a class="l" href="#1123">1123: </a>            <span class="php-quote">'9'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>)
</span><span id="1124" class="l"><a class="l" href="#1124">1124: </a>        );
</span><span id="1125" class="l"><a class="l" href="#1125">1125: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="1126" class="l"><a class="l" href="#1126">1126: </a>        <span class="php-var">$seq</span> = <span class="php-quote">'101'</span>; <span class="php-comment">// left guard bar</span>
</span><span id="1127" class="l"><a class="l" href="#1127">1127: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$upce</span>) {
</span><span id="1128" class="l"><a class="l" href="#1128">1128: </a>            <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$upce_code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1129" class="l"><a class="l" href="#1129">1129: </a>            <span class="php-var">$p</span> = <span class="php-var">$upce_parities</span>[<span class="php-var">$code</span>{<span class="php-num">1</span>}][<span class="php-var">$r</span>];
</span><span id="1130" class="l"><a class="l" href="#1130">1130: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-num">6</span>; ++<span class="php-var">$i</span>) {
</span><span id="1131" class="l"><a class="l" href="#1131">1131: </a>                <span class="php-var">$seq</span> .= <span class="php-var">$codes</span>[<span class="php-var">$p</span>[<span class="php-var">$i</span>]][<span class="php-var">$upce_code</span>{<span class="php-var">$i</span>}];
</span><span id="1132" class="l"><a class="l" href="#1132">1132: </a>            }
</span><span id="1133" class="l"><a class="l" href="#1133">1133: </a>            <span class="php-var">$seq</span> .= <span class="php-quote">'010101'</span>; <span class="php-comment">// right guard bar</span>
</span><span id="1134" class="l"><a class="l" href="#1134">1134: </a>        } <span class="php-keyword1">else</span> {
</span><span id="1135" class="l"><a class="l" href="#1135">1135: </a>            <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1136" class="l"><a class="l" href="#1136">1136: </a>            <span class="php-var">$half_len</span> = <span class="php-keyword2">ceil</span>(<span class="php-var">$len</span> / <span class="php-num">2</span>);
</span><span id="1137" class="l"><a class="l" href="#1137">1137: </a>            <span class="php-keyword1">if</span> (<span class="php-var">$len</span> == <span class="php-num">8</span>) {
</span><span id="1138" class="l"><a class="l" href="#1138">1138: </a>                <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$half_len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1139" class="l"><a class="l" href="#1139">1139: </a>                    <span class="php-var">$seq</span> .= <span class="php-var">$codes</span>[<span class="php-quote">'A'</span>][<span class="php-var">$code</span>{<span class="php-var">$i</span>}];
</span><span id="1140" class="l"><a class="l" href="#1140">1140: </a>                }
</span><span id="1141" class="l"><a class="l" href="#1141">1141: </a>            } <span class="php-keyword1">else</span> {
</span><span id="1142" class="l"><a class="l" href="#1142">1142: </a>                <span class="php-var">$p</span> = <span class="php-var">$parities</span>[<span class="php-var">$code</span>{<span class="php-num">0</span>}];
</span><span id="1143" class="l"><a class="l" href="#1143">1143: </a>                <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">1</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$half_len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1144" class="l"><a class="l" href="#1144">1144: </a>                    <span class="php-var">$seq</span> .= <span class="php-var">$codes</span>[<span class="php-var">$p</span>[<span class="php-var">$i</span>-<span class="php-num">1</span>]][<span class="php-var">$code</span>{<span class="php-var">$i</span>}];
</span><span id="1145" class="l"><a class="l" href="#1145">1145: </a>                }
</span><span id="1146" class="l"><a class="l" href="#1146">1146: </a>            }
</span><span id="1147" class="l"><a class="l" href="#1147">1147: </a>            <span class="php-var">$seq</span> .= <span class="php-quote">'01010'</span>; <span class="php-comment">// center guard bar</span>
</span><span id="1148" class="l"><a class="l" href="#1148">1148: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-var">$half_len</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1149" class="l"><a class="l" href="#1149">1149: </a>                <span class="php-var">$seq</span> .= <span class="php-var">$codes</span>[<span class="php-quote">'C'</span>][<span class="php-var">$code</span>{<span class="php-var">$i</span>}];
</span><span id="1150" class="l"><a class="l" href="#1150">1150: </a>            }
</span><span id="1151" class="l"><a class="l" href="#1151">1151: </a>            <span class="php-var">$seq</span> .= <span class="php-quote">'101'</span>; <span class="php-comment">// right guard bar</span>
</span><span id="1152" class="l"><a class="l" href="#1152">1152: </a>        }
</span><span id="1153" class="l"><a class="l" href="#1153">1153: </a>        <span class="php-var">$clen</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$seq</span>);
</span><span id="1154" class="l"><a class="l" href="#1154">1154: </a>        <span class="php-var">$w</span> = <span class="php-num">0</span>;
</span><span id="1155" class="l"><a class="l" href="#1155">1155: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$clen</span>; ++<span class="php-var">$i</span>) {
</span><span id="1156" class="l"><a class="l" href="#1156">1156: </a>            <span class="php-var">$w</span> += <span class="php-num">1</span>;
</span><span id="1157" class="l"><a class="l" href="#1157">1157: </a>            <span class="php-keyword1">if</span> ((<span class="php-var">$i</span> == (<span class="php-var">$clen</span> - <span class="php-num">1</span>)) <span class="php-keyword1">OR</span> ((<span class="php-var">$i</span> &lt; (<span class="php-var">$clen</span> - <span class="php-num">1</span>)) <span class="php-keyword1">AND</span> (<span class="php-var">$seq</span>{<span class="php-var">$i</span>} != <span class="php-var">$seq</span>{(<span class="php-var">$i</span>+<span class="php-num">1</span>)}))) {
</span><span id="1158" class="l"><a class="l" href="#1158">1158: </a>                <span class="php-keyword1">if</span> (<span class="php-var">$seq</span>{<span class="php-var">$i</span>} == <span class="php-quote">'1'</span>) {
</span><span id="1159" class="l"><a class="l" href="#1159">1159: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">true</span>; <span class="php-comment">// bar</span>
</span><span id="1160" class="l"><a class="l" href="#1160">1160: </a>                } <span class="php-keyword1">else</span> {
</span><span id="1161" class="l"><a class="l" href="#1161">1161: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">false</span>; <span class="php-comment">// space</span>
</span><span id="1162" class="l"><a class="l" href="#1162">1162: </a>                }
</span><span id="1163" class="l"><a class="l" href="#1163">1163: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-var">$t</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-var">$w</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1164" class="l"><a class="l" href="#1164">1164: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-var">$w</span>;
</span><span id="1165" class="l"><a class="l" href="#1165">1165: </a>                ++<span class="php-var">$k</span>;
</span><span id="1166" class="l"><a class="l" href="#1166">1166: </a>                <span class="php-var">$w</span> = <span class="php-num">0</span>;
</span><span id="1167" class="l"><a class="l" href="#1167">1167: </a>            }
</span><span id="1168" class="l"><a class="l" href="#1168">1168: </a>        }
</span><span id="1169" class="l"><a class="l" href="#1169">1169: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="1170" class="l"><a class="l" href="#1170">1170: </a>    }
</span><span id="1171" class="l"><a class="l" href="#1171">1171: </a>
</span><span id="1172" class="l"><a class="l" href="#1172">1172: </a>    <span class="php-comment">/**
</span></span><span id="1173" class="l"><a class="l" href="#1173">1173: </a><span class="php-comment">     * UPC-Based Extentions
</span></span><span id="1174" class="l"><a class="l" href="#1174">1174: </a><span class="php-comment">     * 2-Digit Ext.: Used to indicate magazines and newspaper issue numbers
</span></span><span id="1175" class="l"><a class="l" href="#1175">1175: </a><span class="php-comment">     * 5-Digit Ext.: Used to mark suggested retail price of books
</span></span><span id="1176" class="l"><a class="l" href="#1176">1176: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="1177" class="l"><a class="l" href="#1177">1177: </a><span class="php-comment">     * @param string $len barcode type: 2 = 2-Digit, 5 = 5-Digit
</span></span><span id="1178" class="l"><a class="l" href="#1178">1178: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="1179" class="l"><a class="l" href="#1179">1179: </a><span class="php-comment">     * @access protected
</span></span><span id="1180" class="l"><a class="l" href="#1180">1180: </a><span class="php-comment">     */</span>
</span><span id="1181" class="l"><a class="l" href="#1181">1181: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_eanext" href="#_barcode_eanext">barcode_eanext</a>(<span class="php-var">$code</span>, <span class="php-var">$len</span>=<span class="php-num">5</span>) {
</span><span id="1182" class="l"><a class="l" href="#1182">1182: </a>        <span class="php-comment">//Padding</span>
</span><span id="1183" class="l"><a class="l" href="#1183">1183: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">str_pad</span>(<span class="php-var">$code</span>, <span class="php-var">$len</span>, <span class="php-quote">'0'</span>, STR_PAD_LEFT);
</span><span id="1184" class="l"><a class="l" href="#1184">1184: </a>        <span class="php-comment">// calculate check digit</span>
</span><span id="1185" class="l"><a class="l" href="#1185">1185: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$len</span> == <span class="php-num">2</span>) {
</span><span id="1186" class="l"><a class="l" href="#1186">1186: </a>            <span class="php-var">$r</span> = <span class="php-var">$code</span> % <span class="php-num">4</span>;
</span><span id="1187" class="l"><a class="l" href="#1187">1187: </a>        } <span class="php-keyword1">elseif</span> (<span class="php-var">$len</span> == <span class="php-num">5</span>) {
</span><span id="1188" class="l"><a class="l" href="#1188">1188: </a>            <span class="php-var">$r</span> = (<span class="php-num">3</span> * (<span class="php-var">$code</span>{<span class="php-num">0</span>} + <span class="php-var">$code</span>{<span class="php-num">2</span>} + <span class="php-var">$code</span>{<span class="php-num">4</span>})) + (<span class="php-num">9</span> * (<span class="php-var">$code</span>{<span class="php-num">1</span>} + <span class="php-var">$code</span>{<span class="php-num">3</span>}));
</span><span id="1189" class="l"><a class="l" href="#1189">1189: </a>            <span class="php-var">$r</span> %= <span class="php-num">10</span>;
</span><span id="1190" class="l"><a class="l" href="#1190">1190: </a>        } <span class="php-keyword1">else</span> {
</span><span id="1191" class="l"><a class="l" href="#1191">1191: </a>            <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="1192" class="l"><a class="l" href="#1192">1192: </a>        }
</span><span id="1193" class="l"><a class="l" href="#1193">1193: </a>        <span class="php-comment">//Convert digits to bars</span>
</span><span id="1194" class="l"><a class="l" href="#1194">1194: </a>        <span class="php-var">$codes</span> = <span class="php-keyword1">array</span>(
</span><span id="1195" class="l"><a class="l" href="#1195">1195: </a>            <span class="php-quote">'A'</span>=&gt;<span class="php-keyword1">array</span>( <span class="php-comment">// left odd parity</span>
</span><span id="1196" class="l"><a class="l" href="#1196">1196: </a>                <span class="php-quote">'0'</span>=&gt;<span class="php-quote">'0001101'</span>,
</span><span id="1197" class="l"><a class="l" href="#1197">1197: </a>                <span class="php-quote">'1'</span>=&gt;<span class="php-quote">'0011001'</span>,
</span><span id="1198" class="l"><a class="l" href="#1198">1198: </a>                <span class="php-quote">'2'</span>=&gt;<span class="php-quote">'0010011'</span>,
</span><span id="1199" class="l"><a class="l" href="#1199">1199: </a>                <span class="php-quote">'3'</span>=&gt;<span class="php-quote">'0111101'</span>,
</span><span id="1200" class="l"><a class="l" href="#1200">1200: </a>                <span class="php-quote">'4'</span>=&gt;<span class="php-quote">'0100011'</span>,
</span><span id="1201" class="l"><a class="l" href="#1201">1201: </a>                <span class="php-quote">'5'</span>=&gt;<span class="php-quote">'0110001'</span>,
</span><span id="1202" class="l"><a class="l" href="#1202">1202: </a>                <span class="php-quote">'6'</span>=&gt;<span class="php-quote">'0101111'</span>,
</span><span id="1203" class="l"><a class="l" href="#1203">1203: </a>                <span class="php-quote">'7'</span>=&gt;<span class="php-quote">'0111011'</span>,
</span><span id="1204" class="l"><a class="l" href="#1204">1204: </a>                <span class="php-quote">'8'</span>=&gt;<span class="php-quote">'0110111'</span>,
</span><span id="1205" class="l"><a class="l" href="#1205">1205: </a>                <span class="php-quote">'9'</span>=&gt;<span class="php-quote">'0001011'</span>),
</span><span id="1206" class="l"><a class="l" href="#1206">1206: </a>            <span class="php-quote">'B'</span>=&gt;<span class="php-keyword1">array</span>( <span class="php-comment">// left even parity</span>
</span><span id="1207" class="l"><a class="l" href="#1207">1207: </a>                <span class="php-quote">'0'</span>=&gt;<span class="php-quote">'0100111'</span>,
</span><span id="1208" class="l"><a class="l" href="#1208">1208: </a>                <span class="php-quote">'1'</span>=&gt;<span class="php-quote">'0110011'</span>,
</span><span id="1209" class="l"><a class="l" href="#1209">1209: </a>                <span class="php-quote">'2'</span>=&gt;<span class="php-quote">'0011011'</span>,
</span><span id="1210" class="l"><a class="l" href="#1210">1210: </a>                <span class="php-quote">'3'</span>=&gt;<span class="php-quote">'0100001'</span>,
</span><span id="1211" class="l"><a class="l" href="#1211">1211: </a>                <span class="php-quote">'4'</span>=&gt;<span class="php-quote">'0011101'</span>,
</span><span id="1212" class="l"><a class="l" href="#1212">1212: </a>                <span class="php-quote">'5'</span>=&gt;<span class="php-quote">'0111001'</span>,
</span><span id="1213" class="l"><a class="l" href="#1213">1213: </a>                <span class="php-quote">'6'</span>=&gt;<span class="php-quote">'0000101'</span>,
</span><span id="1214" class="l"><a class="l" href="#1214">1214: </a>                <span class="php-quote">'7'</span>=&gt;<span class="php-quote">'0010001'</span>,
</span><span id="1215" class="l"><a class="l" href="#1215">1215: </a>                <span class="php-quote">'8'</span>=&gt;<span class="php-quote">'0001001'</span>,
</span><span id="1216" class="l"><a class="l" href="#1216">1216: </a>                <span class="php-quote">'9'</span>=&gt;<span class="php-quote">'0010111'</span>)
</span><span id="1217" class="l"><a class="l" href="#1217">1217: </a>        );
</span><span id="1218" class="l"><a class="l" href="#1218">1218: </a>        <span class="php-var">$parities</span> = <span class="php-keyword1">array</span>();
</span><span id="1219" class="l"><a class="l" href="#1219">1219: </a>        <span class="php-var">$parities</span>[<span class="php-num">2</span>] = <span class="php-keyword1">array</span>(
</span><span id="1220" class="l"><a class="l" href="#1220">1220: </a>            <span class="php-quote">'0'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1221" class="l"><a class="l" href="#1221">1221: </a>            <span class="php-quote">'1'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1222" class="l"><a class="l" href="#1222">1222: </a>            <span class="php-quote">'2'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1223" class="l"><a class="l" href="#1223">1223: </a>            <span class="php-quote">'3'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>)
</span><span id="1224" class="l"><a class="l" href="#1224">1224: </a>        );
</span><span id="1225" class="l"><a class="l" href="#1225">1225: </a>        <span class="php-var">$parities</span>[<span class="php-num">5</span>] = <span class="php-keyword1">array</span>(
</span><span id="1226" class="l"><a class="l" href="#1226">1226: </a>            <span class="php-quote">'0'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1227" class="l"><a class="l" href="#1227">1227: </a>            <span class="php-quote">'1'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1228" class="l"><a class="l" href="#1228">1228: </a>            <span class="php-quote">'2'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1229" class="l"><a class="l" href="#1229">1229: </a>            <span class="php-quote">'3'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1230" class="l"><a class="l" href="#1230">1230: </a>            <span class="php-quote">'4'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>),
</span><span id="1231" class="l"><a class="l" href="#1231">1231: </a>            <span class="php-quote">'5'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1232" class="l"><a class="l" href="#1232">1232: </a>            <span class="php-quote">'6'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'B'</span>),
</span><span id="1233" class="l"><a class="l" href="#1233">1233: </a>            <span class="php-quote">'7'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>),
</span><span id="1234" class="l"><a class="l" href="#1234">1234: </a>            <span class="php-quote">'8'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>),
</span><span id="1235" class="l"><a class="l" href="#1235">1235: </a>            <span class="php-quote">'9'</span>=&gt;<span class="php-keyword1">array</span>(<span class="php-quote">'A'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>,<span class="php-quote">'A'</span>,<span class="php-quote">'B'</span>)
</span><span id="1236" class="l"><a class="l" href="#1236">1236: </a>        );
</span><span id="1237" class="l"><a class="l" href="#1237">1237: </a>        <span class="php-var">$p</span> = <span class="php-var">$parities</span>[<span class="php-var">$len</span>][<span class="php-var">$r</span>];
</span><span id="1238" class="l"><a class="l" href="#1238">1238: </a>        <span class="php-var">$seq</span> = <span class="php-quote">'1011'</span>; <span class="php-comment">// left guard bar</span>
</span><span id="1239" class="l"><a class="l" href="#1239">1239: </a>        <span class="php-var">$seq</span> .= <span class="php-var">$codes</span>[<span class="php-var">$p</span>[<span class="php-num">0</span>]][<span class="php-var">$code</span>{<span class="php-num">0</span>}];
</span><span id="1240" class="l"><a class="l" href="#1240">1240: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">1</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1241" class="l"><a class="l" href="#1241">1241: </a>            <span class="php-var">$seq</span> .= <span class="php-quote">'01'</span>; <span class="php-comment">// separator</span>
</span><span id="1242" class="l"><a class="l" href="#1242">1242: </a>            <span class="php-var">$seq</span> .= <span class="php-var">$codes</span>[<span class="php-var">$p</span>[<span class="php-var">$i</span>]][<span class="php-var">$code</span>{<span class="php-var">$i</span>}];
</span><span id="1243" class="l"><a class="l" href="#1243">1243: </a>        }
</span><span id="1244" class="l"><a class="l" href="#1244">1244: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1245" class="l"><a class="l" href="#1245">1245: </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;binseq_to_array(<span class="php-var">$seq</span>, <span class="php-var">$bararray</span>);
</span><span id="1246" class="l"><a class="l" href="#1246">1246: </a>    }
</span><span id="1247" class="l"><a class="l" href="#1247">1247: </a>
</span><span id="1248" class="l"><a class="l" href="#1248">1248: </a>    <span class="php-comment">/**
</span></span><span id="1249" class="l"><a class="l" href="#1249">1249: </a><span class="php-comment">     * POSTNET and PLANET barcodes.
</span></span><span id="1250" class="l"><a class="l" href="#1250">1250: </a><span class="php-comment">     * Used by U.S. Postal Service for automated mail sorting
</span></span><span id="1251" class="l"><a class="l" href="#1251">1251: </a><span class="php-comment">     * @param string $code zip code to represent. Must be a string containing a zip code of the form DDDDD or DDDDD-DDDD.
</span></span><span id="1252" class="l"><a class="l" href="#1252">1252: </a><span class="php-comment">     * @param boolean $planet if true print the PLANET barcode, otherwise print POSTNET
</span></span><span id="1253" class="l"><a class="l" href="#1253">1253: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="1254" class="l"><a class="l" href="#1254">1254: </a><span class="php-comment">     * @access protected
</span></span><span id="1255" class="l"><a class="l" href="#1255">1255: </a><span class="php-comment">     */</span>
</span><span id="1256" class="l"><a class="l" href="#1256">1256: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_postnet" href="#_barcode_postnet">barcode_postnet</a>(<span class="php-var">$code</span>, <span class="php-var">$planet</span>=<span class="php-keyword1">false</span>) {
</span><span id="1257" class="l"><a class="l" href="#1257">1257: </a>        <span class="php-comment">// bar lenght</span>
</span><span id="1258" class="l"><a class="l" href="#1258">1258: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$planet</span>) {
</span><span id="1259" class="l"><a class="l" href="#1259">1259: </a>            <span class="php-var">$barlen</span> = <span class="php-keyword1">Array</span>(
</span><span id="1260" class="l"><a class="l" href="#1260">1260: </a>                <span class="php-num">0</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">2</span>),
</span><span id="1261" class="l"><a class="l" href="#1261">1261: </a>                <span class="php-num">1</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">1</span>),
</span><span id="1262" class="l"><a class="l" href="#1262">1262: </a>                <span class="php-num">2</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">1</span>),
</span><span id="1263" class="l"><a class="l" href="#1263">1263: </a>                <span class="php-num">3</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">2</span>),
</span><span id="1264" class="l"><a class="l" href="#1264">1264: </a>                <span class="php-num">4</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">1</span>),
</span><span id="1265" class="l"><a class="l" href="#1265">1265: </a>                <span class="php-num">5</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">2</span>),
</span><span id="1266" class="l"><a class="l" href="#1266">1266: </a>                <span class="php-num">6</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">2</span>),
</span><span id="1267" class="l"><a class="l" href="#1267">1267: </a>                <span class="php-num">7</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">1</span>),
</span><span id="1268" class="l"><a class="l" href="#1268">1268: </a>                <span class="php-num">8</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">2</span>),
</span><span id="1269" class="l"><a class="l" href="#1269">1269: </a>                <span class="php-num">9</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">2</span>)
</span><span id="1270" class="l"><a class="l" href="#1270">1270: </a>            );
</span><span id="1271" class="l"><a class="l" href="#1271">1271: </a>        } <span class="php-keyword1">else</span> {
</span><span id="1272" class="l"><a class="l" href="#1272">1272: </a>            <span class="php-var">$barlen</span> = <span class="php-keyword1">Array</span>(
</span><span id="1273" class="l"><a class="l" href="#1273">1273: </a>                <span class="php-num">0</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">1</span>),
</span><span id="1274" class="l"><a class="l" href="#1274">1274: </a>                <span class="php-num">1</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">2</span>),
</span><span id="1275" class="l"><a class="l" href="#1275">1275: </a>                <span class="php-num">2</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">2</span>),
</span><span id="1276" class="l"><a class="l" href="#1276">1276: </a>                <span class="php-num">3</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">1</span>),
</span><span id="1277" class="l"><a class="l" href="#1277">1277: </a>                <span class="php-num">4</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">2</span>),
</span><span id="1278" class="l"><a class="l" href="#1278">1278: </a>                <span class="php-num">5</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">1</span>),
</span><span id="1279" class="l"><a class="l" href="#1279">1279: </a>                <span class="php-num">6</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">1</span>),
</span><span id="1280" class="l"><a class="l" href="#1280">1280: </a>                <span class="php-num">7</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">2</span>),
</span><span id="1281" class="l"><a class="l" href="#1281">1281: </a>                <span class="php-num">8</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">1</span>),
</span><span id="1282" class="l"><a class="l" href="#1282">1282: </a>                <span class="php-num">9</span> =&gt; <span class="php-keyword1">Array</span>(<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">1</span>)
</span><span id="1283" class="l"><a class="l" href="#1283">1283: </a>            );
</span><span id="1284" class="l"><a class="l" href="#1284">1284: </a>        }
</span><span id="1285" class="l"><a class="l" href="#1285">1285: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1286" class="l"><a class="l" href="#1286">1286: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="1287" class="l"><a class="l" href="#1287">1287: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">str_replace</span>(<span class="php-quote">'-'</span>, <span class="php-quote">''</span>, <span class="php-var">$code</span>);
</span><span id="1288" class="l"><a class="l" href="#1288">1288: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">str_replace</span>(<span class="php-quote">' '</span>, <span class="php-quote">''</span>, <span class="php-var">$code</span>);
</span><span id="1289" class="l"><a class="l" href="#1289">1289: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="1290" class="l"><a class="l" href="#1290">1290: </a>        <span class="php-comment">// calculate checksum</span>
</span><span id="1291" class="l"><a class="l" href="#1291">1291: </a>        <span class="php-var">$sum</span> = <span class="php-num">0</span>;
</span><span id="1292" class="l"><a class="l" href="#1292">1292: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1293" class="l"><a class="l" href="#1293">1293: </a>            <span class="php-var">$sum</span> += <span class="php-keyword2">intval</span>(<span class="php-var">$code</span>{<span class="php-var">$i</span>});
</span><span id="1294" class="l"><a class="l" href="#1294">1294: </a>        }
</span><span id="1295" class="l"><a class="l" href="#1295">1295: </a>        <span class="php-var">$chkd</span> = (<span class="php-var">$sum</span> % <span class="php-num">10</span>);
</span><span id="1296" class="l"><a class="l" href="#1296">1296: </a>        <span class="php-keyword1">if</span>(<span class="php-var">$chkd</span> &gt; <span class="php-num">0</span>) {
</span><span id="1297" class="l"><a class="l" href="#1297">1297: </a>            <span class="php-var">$chkd</span> = (<span class="php-num">10</span> - <span class="php-var">$chkd</span>);
</span><span id="1298" class="l"><a class="l" href="#1298">1298: </a>        }
</span><span id="1299" class="l"><a class="l" href="#1299">1299: </a>        <span class="php-var">$code</span> .= <span class="php-var">$chkd</span>;
</span><span id="1300" class="l"><a class="l" href="#1300">1300: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="1301" class="l"><a class="l" href="#1301">1301: </a>        <span class="php-comment">// start bar</span>
</span><span id="1302" class="l"><a class="l" href="#1302">1302: </a>        <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1303" class="l"><a class="l" href="#1303">1303: </a>        <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1304" class="l"><a class="l" href="#1304">1304: </a>        <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">2</span>;
</span><span id="1305" class="l"><a class="l" href="#1305">1305: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1306" class="l"><a class="l" href="#1306">1306: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$j</span> = <span class="php-num">0</span>; <span class="php-var">$j</span> &lt; <span class="php-num">5</span>; ++<span class="php-var">$j</span>) {
</span><span id="1307" class="l"><a class="l" href="#1307">1307: </a>                <span class="php-var">$h</span> = <span class="php-var">$barlen</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}][<span class="php-var">$j</span>];
</span><span id="1308" class="l"><a class="l" href="#1308">1308: </a>                <span class="php-var">$p</span> = <span class="php-keyword2">floor</span>(<span class="php-num">1</span> / <span class="php-var">$h</span>);
</span><span id="1309" class="l"><a class="l" href="#1309">1309: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-var">$h</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-var">$p</span>);
</span><span id="1310" class="l"><a class="l" href="#1310">1310: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1311" class="l"><a class="l" href="#1311">1311: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">2</span>;
</span><span id="1312" class="l"><a class="l" href="#1312">1312: </a>            }
</span><span id="1313" class="l"><a class="l" href="#1313">1313: </a>        }
</span><span id="1314" class="l"><a class="l" href="#1314">1314: </a>        <span class="php-comment">// end bar</span>
</span><span id="1315" class="l"><a class="l" href="#1315">1315: </a>        <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1316" class="l"><a class="l" href="#1316">1316: </a>        <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">1</span>;
</span><span id="1317" class="l"><a class="l" href="#1317">1317: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="1318" class="l"><a class="l" href="#1318">1318: </a>    }
</span><span id="1319" class="l"><a class="l" href="#1319">1319: </a>
</span><span id="1320" class="l"><a class="l" href="#1320">1320: </a>    <span class="php-comment">/**
</span></span><span id="1321" class="l"><a class="l" href="#1321">1321: </a><span class="php-comment">     * RMS4CC - CBC - KIX
</span></span><span id="1322" class="l"><a class="l" href="#1322">1322: </a><span class="php-comment">     * RMS4CC (Royal Mail 4-state Customer Code) - CBC (Customer Bar Code) - KIX (Klant index - Customer index)
</span></span><span id="1323" class="l"><a class="l" href="#1323">1323: </a><span class="php-comment">     * RM4SCC is the name of the barcode symbology used by the Royal Mail for its Cleanmail service.
</span></span><span id="1324" class="l"><a class="l" href="#1324">1324: </a><span class="php-comment">     * @param string $code code to print
</span></span><span id="1325" class="l"><a class="l" href="#1325">1325: </a><span class="php-comment">     * @param boolean $kix if true prints the KIX variation (doesn't use the start and end symbols, and the checksum) - in this case the house number must be sufficed with an X and placed at the end of the code.
</span></span><span id="1326" class="l"><a class="l" href="#1326">1326: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="1327" class="l"><a class="l" href="#1327">1327: </a><span class="php-comment">     * @access protected
</span></span><span id="1328" class="l"><a class="l" href="#1328">1328: </a><span class="php-comment">     */</span>
</span><span id="1329" class="l"><a class="l" href="#1329">1329: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_rms4cc" href="#_barcode_rms4cc">barcode_rms4cc</a>(<span class="php-var">$code</span>, <span class="php-var">$kix</span>=<span class="php-keyword1">false</span>) {
</span><span id="1330" class="l"><a class="l" href="#1330">1330: </a>        <span class="php-var">$notkix</span> = !<span class="php-var">$kix</span>;
</span><span id="1331" class="l"><a class="l" href="#1331">1331: </a>        <span class="php-comment">// bar mode</span>
</span><span id="1332" class="l"><a class="l" href="#1332">1332: </a>        <span class="php-comment">// 1 = pos 1, length 2</span>
</span><span id="1333" class="l"><a class="l" href="#1333">1333: </a>        <span class="php-comment">// 2 = pos 1, length 3</span>
</span><span id="1334" class="l"><a class="l" href="#1334">1334: </a>        <span class="php-comment">// 3 = pos 2, length 1</span>
</span><span id="1335" class="l"><a class="l" href="#1335">1335: </a>        <span class="php-comment">// 4 = pos 2, length 2</span>
</span><span id="1336" class="l"><a class="l" href="#1336">1336: </a>        <span class="php-var">$barmode</span> = <span class="php-keyword1">array</span>(
</span><span id="1337" class="l"><a class="l" href="#1337">1337: </a>            <span class="php-quote">'0'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">3</span>,<span class="php-num">2</span>,<span class="php-num">2</span>),
</span><span id="1338" class="l"><a class="l" href="#1338">1338: </a>            <span class="php-quote">'1'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">4</span>,<span class="php-num">1</span>,<span class="php-num">2</span>),
</span><span id="1339" class="l"><a class="l" href="#1339">1339: </a>            <span class="php-quote">'2'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">4</span>,<span class="php-num">2</span>,<span class="php-num">1</span>),
</span><span id="1340" class="l"><a class="l" href="#1340">1340: </a>            <span class="php-quote">'3'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">3</span>,<span class="php-num">1</span>,<span class="php-num">2</span>),
</span><span id="1341" class="l"><a class="l" href="#1341">1341: </a>            <span class="php-quote">'4'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">3</span>,<span class="php-num">2</span>,<span class="php-num">1</span>),
</span><span id="1342" class="l"><a class="l" href="#1342">1342: </a>            <span class="php-quote">'5'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">4</span>,<span class="php-num">1</span>,<span class="php-num">1</span>),
</span><span id="1343" class="l"><a class="l" href="#1343">1343: </a>            <span class="php-quote">'6'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">2</span>),
</span><span id="1344" class="l"><a class="l" href="#1344">1344: </a>            <span class="php-quote">'7'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">2</span>,<span class="php-num">3</span>,<span class="php-num">2</span>),
</span><span id="1345" class="l"><a class="l" href="#1345">1345: </a>            <span class="php-quote">'8'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">2</span>,<span class="php-num">4</span>,<span class="php-num">1</span>),
</span><span id="1346" class="l"><a class="l" href="#1346">1346: </a>            <span class="php-quote">'9'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">1</span>,<span class="php-num">3</span>,<span class="php-num">2</span>),
</span><span id="1347" class="l"><a class="l" href="#1347">1347: </a>            <span class="php-quote">'A'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">1</span>),
</span><span id="1348" class="l"><a class="l" href="#1348">1348: </a>            <span class="php-quote">'B'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">2</span>,<span class="php-num">3</span>,<span class="php-num">1</span>),
</span><span id="1349" class="l"><a class="l" href="#1349">1349: </a>            <span class="php-quote">'C'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">4</span>),
</span><span id="1350" class="l"><a class="l" href="#1350">1350: </a>            <span class="php-quote">'D'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">4</span>),
</span><span id="1351" class="l"><a class="l" href="#1351">1351: </a>            <span class="php-quote">'E'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">3</span>),
</span><span id="1352" class="l"><a class="l" href="#1352">1352: </a>            <span class="php-quote">'F'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">4</span>),
</span><span id="1353" class="l"><a class="l" href="#1353">1353: </a>            <span class="php-quote">'G'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">3</span>),
</span><span id="1354" class="l"><a class="l" href="#1354">1354: </a>            <span class="php-quote">'H'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">3</span>),
</span><span id="1355" class="l"><a class="l" href="#1355">1355: </a>            <span class="php-quote">'I'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">3</span>,<span class="php-num">4</span>,<span class="php-num">2</span>),
</span><span id="1356" class="l"><a class="l" href="#1356">1356: </a>            <span class="php-quote">'J'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">3</span>,<span class="php-num">2</span>),
</span><span id="1357" class="l"><a class="l" href="#1357">1357: </a>            <span class="php-quote">'K'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">4</span>,<span class="php-num">1</span>),
</span><span id="1358" class="l"><a class="l" href="#1358">1358: </a>            <span class="php-quote">'L'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">3</span>,<span class="php-num">3</span>,<span class="php-num">2</span>),
</span><span id="1359" class="l"><a class="l" href="#1359">1359: </a>            <span class="php-quote">'M'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">3</span>,<span class="php-num">4</span>,<span class="php-num">1</span>),
</span><span id="1360" class="l"><a class="l" href="#1360">1360: </a>            <span class="php-quote">'N'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">4</span>,<span class="php-num">3</span>,<span class="php-num">1</span>),
</span><span id="1361" class="l"><a class="l" href="#1361">1361: </a>            <span class="php-quote">'O'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">3</span>,<span class="php-num">2</span>,<span class="php-num">4</span>),
</span><span id="1362" class="l"><a class="l" href="#1362">1362: </a>            <span class="php-quote">'P'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">1</span>,<span class="php-num">4</span>),
</span><span id="1363" class="l"><a class="l" href="#1363">1363: </a>            <span class="php-quote">'Q'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">2</span>,<span class="php-num">3</span>),
</span><span id="1364" class="l"><a class="l" href="#1364">1364: </a>            <span class="php-quote">'R'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">3</span>,<span class="php-num">1</span>,<span class="php-num">4</span>),
</span><span id="1365" class="l"><a class="l" href="#1365">1365: </a>            <span class="php-quote">'S'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">3</span>,<span class="php-num">2</span>,<span class="php-num">3</span>),
</span><span id="1366" class="l"><a class="l" href="#1366">1366: </a>            <span class="php-quote">'T'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">4</span>,<span class="php-num">1</span>,<span class="php-num">3</span>),
</span><span id="1367" class="l"><a class="l" href="#1367">1367: </a>            <span class="php-quote">'U'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">4</span>),
</span><span id="1368" class="l"><a class="l" href="#1368">1368: </a>            <span class="php-quote">'V'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">3</span>,<span class="php-num">4</span>),
</span><span id="1369" class="l"><a class="l" href="#1369">1369: </a>            <span class="php-quote">'W'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">4</span>,<span class="php-num">3</span>),
</span><span id="1370" class="l"><a class="l" href="#1370">1370: </a>            <span class="php-quote">'X'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">3</span>,<span class="php-num">4</span>),
</span><span id="1371" class="l"><a class="l" href="#1371">1371: </a>            <span class="php-quote">'Y'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">3</span>),
</span><span id="1372" class="l"><a class="l" href="#1372">1372: </a>            <span class="php-quote">'Z'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">2</span>,<span class="php-num">3</span>,<span class="php-num">3</span>)
</span><span id="1373" class="l"><a class="l" href="#1373">1373: </a>        );
</span><span id="1374" class="l"><a class="l" href="#1374">1374: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">strtoupper</span>(<span class="php-var">$code</span>);
</span><span id="1375" class="l"><a class="l" href="#1375">1375: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="1376" class="l"><a class="l" href="#1376">1376: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">3</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1377" class="l"><a class="l" href="#1377">1377: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$notkix</span>) {
</span><span id="1378" class="l"><a class="l" href="#1378">1378: </a>            <span class="php-comment">// table for checksum calculation (row,col)</span>
</span><span id="1379" class="l"><a class="l" href="#1379">1379: </a>            <span class="php-var">$checktable</span> = <span class="php-keyword1">array</span>(
</span><span id="1380" class="l"><a class="l" href="#1380">1380: </a>                <span class="php-quote">'0'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">1</span>),
</span><span id="1381" class="l"><a class="l" href="#1381">1381: </a>                <span class="php-quote">'1'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">2</span>),
</span><span id="1382" class="l"><a class="l" href="#1382">1382: </a>                <span class="php-quote">'2'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">3</span>),
</span><span id="1383" class="l"><a class="l" href="#1383">1383: </a>                <span class="php-quote">'3'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">4</span>),
</span><span id="1384" class="l"><a class="l" href="#1384">1384: </a>                <span class="php-quote">'4'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">5</span>),
</span><span id="1385" class="l"><a class="l" href="#1385">1385: </a>                <span class="php-quote">'5'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">1</span>,<span class="php-num">0</span>),
</span><span id="1386" class="l"><a class="l" href="#1386">1386: </a>                <span class="php-quote">'6'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">1</span>),
</span><span id="1387" class="l"><a class="l" href="#1387">1387: </a>                <span class="php-quote">'7'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">2</span>),
</span><span id="1388" class="l"><a class="l" href="#1388">1388: </a>                <span class="php-quote">'8'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">3</span>),
</span><span id="1389" class="l"><a class="l" href="#1389">1389: </a>                <span class="php-quote">'9'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">4</span>),
</span><span id="1390" class="l"><a class="l" href="#1390">1390: </a>                <span class="php-quote">'A'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">5</span>),
</span><span id="1391" class="l"><a class="l" href="#1391">1391: </a>                <span class="php-quote">'B'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">0</span>),
</span><span id="1392" class="l"><a class="l" href="#1392">1392: </a>                <span class="php-quote">'C'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">1</span>),
</span><span id="1393" class="l"><a class="l" href="#1393">1393: </a>                <span class="php-quote">'D'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">2</span>),
</span><span id="1394" class="l"><a class="l" href="#1394">1394: </a>                <span class="php-quote">'E'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">3</span>),
</span><span id="1395" class="l"><a class="l" href="#1395">1395: </a>                <span class="php-quote">'F'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">4</span>),
</span><span id="1396" class="l"><a class="l" href="#1396">1396: </a>                <span class="php-quote">'G'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">5</span>),
</span><span id="1397" class="l"><a class="l" href="#1397">1397: </a>                <span class="php-quote">'H'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">0</span>),
</span><span id="1398" class="l"><a class="l" href="#1398">1398: </a>                <span class="php-quote">'I'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">1</span>),
</span><span id="1399" class="l"><a class="l" href="#1399">1399: </a>                <span class="php-quote">'J'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">2</span>),
</span><span id="1400" class="l"><a class="l" href="#1400">1400: </a>                <span class="php-quote">'K'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">3</span>),
</span><span id="1401" class="l"><a class="l" href="#1401">1401: </a>                <span class="php-quote">'L'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">4</span>),
</span><span id="1402" class="l"><a class="l" href="#1402">1402: </a>                <span class="php-quote">'M'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">5</span>),
</span><span id="1403" class="l"><a class="l" href="#1403">1403: </a>                <span class="php-quote">'N'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">0</span>),
</span><span id="1404" class="l"><a class="l" href="#1404">1404: </a>                <span class="php-quote">'O'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">5</span>,<span class="php-num">1</span>),
</span><span id="1405" class="l"><a class="l" href="#1405">1405: </a>                <span class="php-quote">'P'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">5</span>,<span class="php-num">2</span>),
</span><span id="1406" class="l"><a class="l" href="#1406">1406: </a>                <span class="php-quote">'Q'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">5</span>,<span class="php-num">3</span>),
</span><span id="1407" class="l"><a class="l" href="#1407">1407: </a>                <span class="php-quote">'R'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">5</span>,<span class="php-num">4</span>),
</span><span id="1408" class="l"><a class="l" href="#1408">1408: </a>                <span class="php-quote">'S'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">5</span>,<span class="php-num">5</span>),
</span><span id="1409" class="l"><a class="l" href="#1409">1409: </a>                <span class="php-quote">'T'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">5</span>,<span class="php-num">0</span>),
</span><span id="1410" class="l"><a class="l" href="#1410">1410: </a>                <span class="php-quote">'U'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">0</span>,<span class="php-num">1</span>),
</span><span id="1411" class="l"><a class="l" href="#1411">1411: </a>                <span class="php-quote">'V'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">0</span>,<span class="php-num">2</span>),
</span><span id="1412" class="l"><a class="l" href="#1412">1412: </a>                <span class="php-quote">'W'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">0</span>,<span class="php-num">3</span>),
</span><span id="1413" class="l"><a class="l" href="#1413">1413: </a>                <span class="php-quote">'X'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">0</span>,<span class="php-num">4</span>),
</span><span id="1414" class="l"><a class="l" href="#1414">1414: </a>                <span class="php-quote">'Y'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">0</span>,<span class="php-num">5</span>),
</span><span id="1415" class="l"><a class="l" href="#1415">1415: </a>                <span class="php-quote">'Z'</span> =&gt; <span class="php-keyword1">array</span>(<span class="php-num">0</span>,<span class="php-num">0</span>)
</span><span id="1416" class="l"><a class="l" href="#1416">1416: </a>            );
</span><span id="1417" class="l"><a class="l" href="#1417">1417: </a>            <span class="php-var">$row</span> = <span class="php-num">0</span>;
</span><span id="1418" class="l"><a class="l" href="#1418">1418: </a>            <span class="php-var">$col</span> = <span class="php-num">0</span>;
</span><span id="1419" class="l"><a class="l" href="#1419">1419: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1420" class="l"><a class="l" href="#1420">1420: </a>                <span class="php-var">$row</span> += <span class="php-var">$checktable</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}][<span class="php-num">0</span>];
</span><span id="1421" class="l"><a class="l" href="#1421">1421: </a>                <span class="php-var">$col</span> += <span class="php-var">$checktable</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}][<span class="php-num">1</span>];
</span><span id="1422" class="l"><a class="l" href="#1422">1422: </a>            }
</span><span id="1423" class="l"><a class="l" href="#1423">1423: </a>            <span class="php-var">$row</span> %= <span class="php-num">6</span>;
</span><span id="1424" class="l"><a class="l" href="#1424">1424: </a>            <span class="php-var">$col</span> %= <span class="php-num">6</span>;
</span><span id="1425" class="l"><a class="l" href="#1425">1425: </a>            <span class="php-var">$chk</span> = <span class="php-keyword2">array_keys</span>(<span class="php-var">$checktable</span>, <span class="php-keyword1">array</span>(<span class="php-var">$row</span>,<span class="php-var">$col</span>));
</span><span id="1426" class="l"><a class="l" href="#1426">1426: </a>            <span class="php-var">$code</span> .= <span class="php-var">$chk</span>[<span class="php-num">0</span>];
</span><span id="1427" class="l"><a class="l" href="#1427">1427: </a>            ++<span class="php-var">$len</span>;
</span><span id="1428" class="l"><a class="l" href="#1428">1428: </a>        }
</span><span id="1429" class="l"><a class="l" href="#1429">1429: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="1430" class="l"><a class="l" href="#1430">1430: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$notkix</span>) {
</span><span id="1431" class="l"><a class="l" href="#1431">1431: </a>            <span class="php-comment">// start bar</span>
</span><span id="1432" class="l"><a class="l" href="#1432">1432: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1433" class="l"><a class="l" href="#1433">1433: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1434" class="l"><a class="l" href="#1434">1434: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">2</span>;
</span><span id="1435" class="l"><a class="l" href="#1435">1435: </a>        }
</span><span id="1436" class="l"><a class="l" href="#1436">1436: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1437" class="l"><a class="l" href="#1437">1437: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$j</span> = <span class="php-num">0</span>; <span class="php-var">$j</span> &lt; <span class="php-num">4</span>; ++<span class="php-var">$j</span>) {
</span><span id="1438" class="l"><a class="l" href="#1438">1438: </a>                <span class="php-keyword1">switch</span> (<span class="php-var">$barmode</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}][<span class="php-var">$j</span>]) {
</span><span id="1439" class="l"><a class="l" href="#1439">1439: </a>                    <span class="php-keyword1">case</span> <span class="php-num">1</span>: {
</span><span id="1440" class="l"><a class="l" href="#1440">1440: </a>                        <span class="php-var">$p</span> = <span class="php-num">0</span>;
</span><span id="1441" class="l"><a class="l" href="#1441">1441: </a>                        <span class="php-var">$h</span> = <span class="php-num">2</span>;
</span><span id="1442" class="l"><a class="l" href="#1442">1442: </a>                        <span class="php-keyword1">break</span>;
</span><span id="1443" class="l"><a class="l" href="#1443">1443: </a>                    }
</span><span id="1444" class="l"><a class="l" href="#1444">1444: </a>                    <span class="php-keyword1">case</span> <span class="php-num">2</span>: {
</span><span id="1445" class="l"><a class="l" href="#1445">1445: </a>                        <span class="php-var">$p</span> = <span class="php-num">0</span>;
</span><span id="1446" class="l"><a class="l" href="#1446">1446: </a>                        <span class="php-var">$h</span> = <span class="php-num">3</span>;
</span><span id="1447" class="l"><a class="l" href="#1447">1447: </a>                        <span class="php-keyword1">break</span>;
</span><span id="1448" class="l"><a class="l" href="#1448">1448: </a>                    }
</span><span id="1449" class="l"><a class="l" href="#1449">1449: </a>                    <span class="php-keyword1">case</span> <span class="php-num">3</span>: {
</span><span id="1450" class="l"><a class="l" href="#1450">1450: </a>                        <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="1451" class="l"><a class="l" href="#1451">1451: </a>                        <span class="php-var">$h</span> = <span class="php-num">1</span>;
</span><span id="1452" class="l"><a class="l" href="#1452">1452: </a>                        <span class="php-keyword1">break</span>;
</span><span id="1453" class="l"><a class="l" href="#1453">1453: </a>                    }
</span><span id="1454" class="l"><a class="l" href="#1454">1454: </a>                    <span class="php-keyword1">case</span> <span class="php-num">4</span>: {
</span><span id="1455" class="l"><a class="l" href="#1455">1455: </a>                        <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="1456" class="l"><a class="l" href="#1456">1456: </a>                        <span class="php-var">$h</span> = <span class="php-num">2</span>;
</span><span id="1457" class="l"><a class="l" href="#1457">1457: </a>                        <span class="php-keyword1">break</span>;
</span><span id="1458" class="l"><a class="l" href="#1458">1458: </a>                    }
</span><span id="1459" class="l"><a class="l" href="#1459">1459: </a>                }
</span><span id="1460" class="l"><a class="l" href="#1460">1460: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-var">$h</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-var">$p</span>);
</span><span id="1461" class="l"><a class="l" href="#1461">1461: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1462" class="l"><a class="l" href="#1462">1462: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">2</span>;
</span><span id="1463" class="l"><a class="l" href="#1463">1463: </a>            }
</span><span id="1464" class="l"><a class="l" href="#1464">1464: </a>        }
</span><span id="1465" class="l"><a class="l" href="#1465">1465: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$notkix</span>) {
</span><span id="1466" class="l"><a class="l" href="#1466">1466: </a>            <span class="php-comment">// stop bar</span>
</span><span id="1467" class="l"><a class="l" href="#1467">1467: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">3</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1468" class="l"><a class="l" href="#1468">1468: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">1</span>;
</span><span id="1469" class="l"><a class="l" href="#1469">1469: </a>        }
</span><span id="1470" class="l"><a class="l" href="#1470">1470: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="1471" class="l"><a class="l" href="#1471">1471: </a>    }
</span><span id="1472" class="l"><a class="l" href="#1472">1472: </a>
</span><span id="1473" class="l"><a class="l" href="#1473">1473: </a>    <span class="php-comment">/**
</span></span><span id="1474" class="l"><a class="l" href="#1474">1474: </a><span class="php-comment">     * CODABAR barcodes.
</span></span><span id="1475" class="l"><a class="l" href="#1475">1475: </a><span class="php-comment">     * Older code often used in library systems, sometimes in blood banks
</span></span><span id="1476" class="l"><a class="l" href="#1476">1476: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="1477" class="l"><a class="l" href="#1477">1477: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="1478" class="l"><a class="l" href="#1478">1478: </a><span class="php-comment">     * @access protected
</span></span><span id="1479" class="l"><a class="l" href="#1479">1479: </a><span class="php-comment">     */</span>
</span><span id="1480" class="l"><a class="l" href="#1480">1480: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_codabar" href="#_barcode_codabar">barcode_codabar</a>(<span class="php-var">$code</span>) {
</span><span id="1481" class="l"><a class="l" href="#1481">1481: </a>        <span class="php-var">$chr</span> = <span class="php-keyword1">array</span>(
</span><span id="1482" class="l"><a class="l" href="#1482">1482: </a>            <span class="php-quote">'0'</span> =&gt; <span class="php-quote">'11111221'</span>,
</span><span id="1483" class="l"><a class="l" href="#1483">1483: </a>            <span class="php-quote">'1'</span> =&gt; <span class="php-quote">'11112211'</span>,
</span><span id="1484" class="l"><a class="l" href="#1484">1484: </a>            <span class="php-quote">'2'</span> =&gt; <span class="php-quote">'11121121'</span>,
</span><span id="1485" class="l"><a class="l" href="#1485">1485: </a>            <span class="php-quote">'3'</span> =&gt; <span class="php-quote">'22111111'</span>,
</span><span id="1486" class="l"><a class="l" href="#1486">1486: </a>            <span class="php-quote">'4'</span> =&gt; <span class="php-quote">'11211211'</span>,
</span><span id="1487" class="l"><a class="l" href="#1487">1487: </a>            <span class="php-quote">'5'</span> =&gt; <span class="php-quote">'21111211'</span>,
</span><span id="1488" class="l"><a class="l" href="#1488">1488: </a>            <span class="php-quote">'6'</span> =&gt; <span class="php-quote">'12111121'</span>,
</span><span id="1489" class="l"><a class="l" href="#1489">1489: </a>            <span class="php-quote">'7'</span> =&gt; <span class="php-quote">'12112111'</span>,
</span><span id="1490" class="l"><a class="l" href="#1490">1490: </a>            <span class="php-quote">'8'</span> =&gt; <span class="php-quote">'12211111'</span>,
</span><span id="1491" class="l"><a class="l" href="#1491">1491: </a>            <span class="php-quote">'9'</span> =&gt; <span class="php-quote">'21121111'</span>,
</span><span id="1492" class="l"><a class="l" href="#1492">1492: </a>            <span class="php-quote">'-'</span> =&gt; <span class="php-quote">'11122111'</span>,
</span><span id="1493" class="l"><a class="l" href="#1493">1493: </a>            <span class="php-quote">'$'</span> =&gt; <span class="php-quote">'11221111'</span>,
</span><span id="1494" class="l"><a class="l" href="#1494">1494: </a>            <span class="php-quote">':'</span> =&gt; <span class="php-quote">'21112121'</span>,
</span><span id="1495" class="l"><a class="l" href="#1495">1495: </a>            <span class="php-quote">'/'</span> =&gt; <span class="php-quote">'21211121'</span>,
</span><span id="1496" class="l"><a class="l" href="#1496">1496: </a>            <span class="php-quote">'.'</span> =&gt; <span class="php-quote">'21212111'</span>,
</span><span id="1497" class="l"><a class="l" href="#1497">1497: </a>            <span class="php-quote">'+'</span> =&gt; <span class="php-quote">'11222221'</span>,
</span><span id="1498" class="l"><a class="l" href="#1498">1498: </a>            <span class="php-quote">'A'</span> =&gt; <span class="php-quote">'11221211'</span>,
</span><span id="1499" class="l"><a class="l" href="#1499">1499: </a>            <span class="php-quote">'B'</span> =&gt; <span class="php-quote">'12121121'</span>,
</span><span id="1500" class="l"><a class="l" href="#1500">1500: </a>            <span class="php-quote">'C'</span> =&gt; <span class="php-quote">'11121221'</span>,
</span><span id="1501" class="l"><a class="l" href="#1501">1501: </a>            <span class="php-quote">'D'</span> =&gt; <span class="php-quote">'11122211'</span>
</span><span id="1502" class="l"><a class="l" href="#1502">1502: </a>        );
</span><span id="1503" class="l"><a class="l" href="#1503">1503: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1504" class="l"><a class="l" href="#1504">1504: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="1505" class="l"><a class="l" href="#1505">1505: </a>        <span class="php-var">$w</span> = <span class="php-num">0</span>;
</span><span id="1506" class="l"><a class="l" href="#1506">1506: </a>        <span class="php-var">$seq</span> = <span class="php-quote">''</span>;
</span><span id="1507" class="l"><a class="l" href="#1507">1507: </a>        <span class="php-var">$code</span> = <span class="php-quote">'A'</span>.<span class="php-keyword2">strtoupper</span>(<span class="php-var">$code</span>).<span class="php-quote">'A'</span>;
</span><span id="1508" class="l"><a class="l" href="#1508">1508: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="1509" class="l"><a class="l" href="#1509">1509: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1510" class="l"><a class="l" href="#1510">1510: </a>            <span class="php-keyword1">if</span> (!<span class="php-keyword1">isset</span>(<span class="php-var">$chr</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}])) {
</span><span id="1511" class="l"><a class="l" href="#1511">1511: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="1512" class="l"><a class="l" href="#1512">1512: </a>            }
</span><span id="1513" class="l"><a class="l" href="#1513">1513: </a>            <span class="php-var">$seq</span> = <span class="php-var">$chr</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}];
</span><span id="1514" class="l"><a class="l" href="#1514">1514: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$j</span> = <span class="php-num">0</span>; <span class="php-var">$j</span> &lt; <span class="php-num">8</span>; ++<span class="php-var">$j</span>) {
</span><span id="1515" class="l"><a class="l" href="#1515">1515: </a>                <span class="php-keyword1">if</span> ((<span class="php-var">$j</span> % <span class="php-num">2</span>) == <span class="php-num">0</span>) {
</span><span id="1516" class="l"><a class="l" href="#1516">1516: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">true</span>; <span class="php-comment">// bar</span>
</span><span id="1517" class="l"><a class="l" href="#1517">1517: </a>                } <span class="php-keyword1">else</span> {
</span><span id="1518" class="l"><a class="l" href="#1518">1518: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">false</span>; <span class="php-comment">// space</span>
</span><span id="1519" class="l"><a class="l" href="#1519">1519: </a>                }
</span><span id="1520" class="l"><a class="l" href="#1520">1520: </a>                <span class="php-var">$w</span> = <span class="php-var">$seq</span>{<span class="php-var">$j</span>};
</span><span id="1521" class="l"><a class="l" href="#1521">1521: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-var">$t</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-var">$w</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1522" class="l"><a class="l" href="#1522">1522: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-var">$w</span>;
</span><span id="1523" class="l"><a class="l" href="#1523">1523: </a>                ++<span class="php-var">$k</span>;
</span><span id="1524" class="l"><a class="l" href="#1524">1524: </a>            }
</span><span id="1525" class="l"><a class="l" href="#1525">1525: </a>        }
</span><span id="1526" class="l"><a class="l" href="#1526">1526: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="1527" class="l"><a class="l" href="#1527">1527: </a>    }
</span><span id="1528" class="l"><a class="l" href="#1528">1528: </a>
</span><span id="1529" class="l"><a class="l" href="#1529">1529: </a>    <span class="php-comment">/**
</span></span><span id="1530" class="l"><a class="l" href="#1530">1530: </a><span class="php-comment">     * CODE11 barcodes.
</span></span><span id="1531" class="l"><a class="l" href="#1531">1531: </a><span class="php-comment">     * Used primarily for labeling telecommunications equipment
</span></span><span id="1532" class="l"><a class="l" href="#1532">1532: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="1533" class="l"><a class="l" href="#1533">1533: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="1534" class="l"><a class="l" href="#1534">1534: </a><span class="php-comment">     * @access protected
</span></span><span id="1535" class="l"><a class="l" href="#1535">1535: </a><span class="php-comment">     */</span>
</span><span id="1536" class="l"><a class="l" href="#1536">1536: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_code11" href="#_barcode_code11">barcode_code11</a>(<span class="php-var">$code</span>) {
</span><span id="1537" class="l"><a class="l" href="#1537">1537: </a>        <span class="php-var">$chr</span> = <span class="php-keyword1">array</span>(
</span><span id="1538" class="l"><a class="l" href="#1538">1538: </a>            <span class="php-quote">'0'</span> =&gt; <span class="php-quote">'111121'</span>,
</span><span id="1539" class="l"><a class="l" href="#1539">1539: </a>            <span class="php-quote">'1'</span> =&gt; <span class="php-quote">'211121'</span>,
</span><span id="1540" class="l"><a class="l" href="#1540">1540: </a>            <span class="php-quote">'2'</span> =&gt; <span class="php-quote">'121121'</span>,
</span><span id="1541" class="l"><a class="l" href="#1541">1541: </a>            <span class="php-quote">'3'</span> =&gt; <span class="php-quote">'221111'</span>,
</span><span id="1542" class="l"><a class="l" href="#1542">1542: </a>            <span class="php-quote">'4'</span> =&gt; <span class="php-quote">'112121'</span>,
</span><span id="1543" class="l"><a class="l" href="#1543">1543: </a>            <span class="php-quote">'5'</span> =&gt; <span class="php-quote">'212111'</span>,
</span><span id="1544" class="l"><a class="l" href="#1544">1544: </a>            <span class="php-quote">'6'</span> =&gt; <span class="php-quote">'122111'</span>,
</span><span id="1545" class="l"><a class="l" href="#1545">1545: </a>            <span class="php-quote">'7'</span> =&gt; <span class="php-quote">'111221'</span>,
</span><span id="1546" class="l"><a class="l" href="#1546">1546: </a>            <span class="php-quote">'8'</span> =&gt; <span class="php-quote">'211211'</span>,
</span><span id="1547" class="l"><a class="l" href="#1547">1547: </a>            <span class="php-quote">'9'</span> =&gt; <span class="php-quote">'211111'</span>,
</span><span id="1548" class="l"><a class="l" href="#1548">1548: </a>            <span class="php-quote">'-'</span> =&gt; <span class="php-quote">'112111'</span>,
</span><span id="1549" class="l"><a class="l" href="#1549">1549: </a>            <span class="php-quote">'S'</span> =&gt; <span class="php-quote">'112211'</span>
</span><span id="1550" class="l"><a class="l" href="#1550">1550: </a>        );
</span><span id="1551" class="l"><a class="l" href="#1551">1551: </a>
</span><span id="1552" class="l"><a class="l" href="#1552">1552: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1553" class="l"><a class="l" href="#1553">1553: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="1554" class="l"><a class="l" href="#1554">1554: </a>        <span class="php-var">$w</span> = <span class="php-num">0</span>;
</span><span id="1555" class="l"><a class="l" href="#1555">1555: </a>        <span class="php-var">$seq</span> = <span class="php-quote">''</span>;
</span><span id="1556" class="l"><a class="l" href="#1556">1556: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$code</span>);
</span><span id="1557" class="l"><a class="l" href="#1557">1557: </a>        <span class="php-comment">// calculate check digit C</span>
</span><span id="1558" class="l"><a class="l" href="#1558">1558: </a>        <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="1559" class="l"><a class="l" href="#1559">1559: </a>        <span class="php-var">$check</span> = <span class="php-num">0</span>;
</span><span id="1560" class="l"><a class="l" href="#1560">1560: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = (<span class="php-var">$len</span> - <span class="php-num">1</span>); <span class="php-var">$i</span> &gt;= <span class="php-num">0</span>; --<span class="php-var">$i</span>) {
</span><span id="1561" class="l"><a class="l" href="#1561">1561: </a>            <span class="php-var">$digit</span> = <span class="php-var">$code</span>{<span class="php-var">$i</span>};
</span><span id="1562" class="l"><a class="l" href="#1562">1562: </a>            <span class="php-keyword1">if</span> (<span class="php-var">$digit</span> == <span class="php-quote">'-'</span>) {
</span><span id="1563" class="l"><a class="l" href="#1563">1563: </a>                <span class="php-var">$dval</span> = <span class="php-num">10</span>;
</span><span id="1564" class="l"><a class="l" href="#1564">1564: </a>            } <span class="php-keyword1">else</span> {
</span><span id="1565" class="l"><a class="l" href="#1565">1565: </a>                <span class="php-var">$dval</span> = <span class="php-keyword2">intval</span>(<span class="php-var">$digit</span>);
</span><span id="1566" class="l"><a class="l" href="#1566">1566: </a>            }
</span><span id="1567" class="l"><a class="l" href="#1567">1567: </a>            <span class="php-var">$check</span> += (<span class="php-var">$dval</span> * <span class="php-var">$p</span>);
</span><span id="1568" class="l"><a class="l" href="#1568">1568: </a>            ++<span class="php-var">$p</span>;
</span><span id="1569" class="l"><a class="l" href="#1569">1569: </a>            <span class="php-keyword1">if</span> (<span class="php-var">$p</span> &gt; <span class="php-num">10</span>) {
</span><span id="1570" class="l"><a class="l" href="#1570">1570: </a>                <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="1571" class="l"><a class="l" href="#1571">1571: </a>            }
</span><span id="1572" class="l"><a class="l" href="#1572">1572: </a>        }
</span><span id="1573" class="l"><a class="l" href="#1573">1573: </a>        <span class="php-var">$check</span> %= <span class="php-num">11</span>;
</span><span id="1574" class="l"><a class="l" href="#1574">1574: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$check</span> == <span class="php-num">10</span>) {
</span><span id="1575" class="l"><a class="l" href="#1575">1575: </a>            <span class="php-var">$check</span> = <span class="php-quote">'-'</span>;
</span><span id="1576" class="l"><a class="l" href="#1576">1576: </a>        }
</span><span id="1577" class="l"><a class="l" href="#1577">1577: </a>        <span class="php-var">$code</span> .= <span class="php-var">$check</span>;
</span><span id="1578" class="l"><a class="l" href="#1578">1578: </a>        <span class="php-keyword1">if</span> (<span class="php-var">$len</span> &gt; <span class="php-num">10</span>) {
</span><span id="1579" class="l"><a class="l" href="#1579">1579: </a>            <span class="php-comment">// calculate check digit K</span>
</span><span id="1580" class="l"><a class="l" href="#1580">1580: </a>            <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="1581" class="l"><a class="l" href="#1581">1581: </a>            <span class="php-var">$check</span> = <span class="php-num">0</span>;
</span><span id="1582" class="l"><a class="l" href="#1582">1582: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-var">$len</span>; <span class="php-var">$i</span> &gt;= <span class="php-num">0</span>; --<span class="php-var">$i</span>) {
</span><span id="1583" class="l"><a class="l" href="#1583">1583: </a>                <span class="php-var">$digit</span> = <span class="php-var">$code</span>{<span class="php-var">$i</span>};
</span><span id="1584" class="l"><a class="l" href="#1584">1584: </a>                <span class="php-keyword1">if</span> (<span class="php-var">$digit</span> == <span class="php-quote">'-'</span>) {
</span><span id="1585" class="l"><a class="l" href="#1585">1585: </a>                    <span class="php-var">$dval</span> = <span class="php-num">10</span>;
</span><span id="1586" class="l"><a class="l" href="#1586">1586: </a>                } <span class="php-keyword1">else</span> {
</span><span id="1587" class="l"><a class="l" href="#1587">1587: </a>                    <span class="php-var">$dval</span> = <span class="php-keyword2">intval</span>(<span class="php-var">$digit</span>);
</span><span id="1588" class="l"><a class="l" href="#1588">1588: </a>                }
</span><span id="1589" class="l"><a class="l" href="#1589">1589: </a>                <span class="php-var">$check</span> += (<span class="php-var">$dval</span> * <span class="php-var">$p</span>);
</span><span id="1590" class="l"><a class="l" href="#1590">1590: </a>                ++<span class="php-var">$p</span>;
</span><span id="1591" class="l"><a class="l" href="#1591">1591: </a>                <span class="php-keyword1">if</span> (<span class="php-var">$p</span> &gt; <span class="php-num">9</span>) {
</span><span id="1592" class="l"><a class="l" href="#1592">1592: </a>                    <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="1593" class="l"><a class="l" href="#1593">1593: </a>                }
</span><span id="1594" class="l"><a class="l" href="#1594">1594: </a>            }
</span><span id="1595" class="l"><a class="l" href="#1595">1595: </a>            <span class="php-var">$check</span> %= <span class="php-num">11</span>;
</span><span id="1596" class="l"><a class="l" href="#1596">1596: </a>            <span class="php-var">$code</span> .= <span class="php-var">$check</span>;
</span><span id="1597" class="l"><a class="l" href="#1597">1597: </a>            ++<span class="php-var">$len</span>;
</span><span id="1598" class="l"><a class="l" href="#1598">1598: </a>        }
</span><span id="1599" class="l"><a class="l" href="#1599">1599: </a>        <span class="php-var">$code</span> = <span class="php-quote">'S'</span>.<span class="php-var">$code</span>.<span class="php-quote">'S'</span>;
</span><span id="1600" class="l"><a class="l" href="#1600">1600: </a>        <span class="php-var">$len</span> += <span class="php-num">3</span>;
</span><span id="1601" class="l"><a class="l" href="#1601">1601: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1602" class="l"><a class="l" href="#1602">1602: </a>            <span class="php-keyword1">if</span> (!<span class="php-keyword1">isset</span>(<span class="php-var">$chr</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}])) {
</span><span id="1603" class="l"><a class="l" href="#1603">1603: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="1604" class="l"><a class="l" href="#1604">1604: </a>            }
</span><span id="1605" class="l"><a class="l" href="#1605">1605: </a>            <span class="php-var">$seq</span> = <span class="php-var">$chr</span>[<span class="php-var">$code</span>{<span class="php-var">$i</span>}];
</span><span id="1606" class="l"><a class="l" href="#1606">1606: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$j</span> = <span class="php-num">0</span>; <span class="php-var">$j</span> &lt; <span class="php-num">6</span>; ++<span class="php-var">$j</span>) {
</span><span id="1607" class="l"><a class="l" href="#1607">1607: </a>                <span class="php-keyword1">if</span> ((<span class="php-var">$j</span> % <span class="php-num">2</span>) == <span class="php-num">0</span>) {
</span><span id="1608" class="l"><a class="l" href="#1608">1608: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">true</span>; <span class="php-comment">// bar</span>
</span><span id="1609" class="l"><a class="l" href="#1609">1609: </a>                } <span class="php-keyword1">else</span> {
</span><span id="1610" class="l"><a class="l" href="#1610">1610: </a>                    <span class="php-var">$t</span> = <span class="php-keyword1">false</span>; <span class="php-comment">// space</span>
</span><span id="1611" class="l"><a class="l" href="#1611">1611: </a>                }
</span><span id="1612" class="l"><a class="l" href="#1612">1612: </a>                <span class="php-var">$w</span> = <span class="php-var">$seq</span>{<span class="php-var">$j</span>};
</span><span id="1613" class="l"><a class="l" href="#1613">1613: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-var">$t</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-var">$w</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1614" class="l"><a class="l" href="#1614">1614: </a>                <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-var">$w</span>;
</span><span id="1615" class="l"><a class="l" href="#1615">1615: </a>                ++<span class="php-var">$k</span>;
</span><span id="1616" class="l"><a class="l" href="#1616">1616: </a>            }
</span><span id="1617" class="l"><a class="l" href="#1617">1617: </a>        }
</span><span id="1618" class="l"><a class="l" href="#1618">1618: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="1619" class="l"><a class="l" href="#1619">1619: </a>    }
</span><span id="1620" class="l"><a class="l" href="#1620">1620: </a>
</span><span id="1621" class="l"><a class="l" href="#1621">1621: </a>    <span class="php-comment">/**
</span></span><span id="1622" class="l"><a class="l" href="#1622">1622: </a><span class="php-comment">     * Pharmacode
</span></span><span id="1623" class="l"><a class="l" href="#1623">1623: </a><span class="php-comment">     * Contains digits (0 to 9)
</span></span><span id="1624" class="l"><a class="l" href="#1624">1624: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="1625" class="l"><a class="l" href="#1625">1625: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="1626" class="l"><a class="l" href="#1626">1626: </a><span class="php-comment">     * @access protected
</span></span><span id="1627" class="l"><a class="l" href="#1627">1627: </a><span class="php-comment">     */</span>
</span><span id="1628" class="l"><a class="l" href="#1628">1628: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_pharmacode" href="#_barcode_pharmacode">barcode_pharmacode</a>(<span class="php-var">$code</span>) {
</span><span id="1629" class="l"><a class="l" href="#1629">1629: </a>        <span class="php-var">$seq</span> = <span class="php-quote">''</span>;
</span><span id="1630" class="l"><a class="l" href="#1630">1630: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">intval</span>(<span class="php-var">$code</span>);
</span><span id="1631" class="l"><a class="l" href="#1631">1631: </a>        <span class="php-keyword1">while</span> (<span class="php-var">$code</span> &gt; <span class="php-num">0</span>) {
</span><span id="1632" class="l"><a class="l" href="#1632">1632: </a>            <span class="php-keyword1">if</span> ((<span class="php-var">$code</span> % <span class="php-num">2</span>) == <span class="php-num">0</span>) {
</span><span id="1633" class="l"><a class="l" href="#1633">1633: </a>                <span class="php-var">$seq</span> .= <span class="php-quote">'11100'</span>;
</span><span id="1634" class="l"><a class="l" href="#1634">1634: </a>                <span class="php-var">$code</span> -= <span class="php-num">2</span>;
</span><span id="1635" class="l"><a class="l" href="#1635">1635: </a>            } <span class="php-keyword1">else</span> {
</span><span id="1636" class="l"><a class="l" href="#1636">1636: </a>                <span class="php-var">$seq</span> .= <span class="php-quote">'100'</span>;
</span><span id="1637" class="l"><a class="l" href="#1637">1637: </a>                <span class="php-var">$code</span> -= <span class="php-num">1</span>;
</span><span id="1638" class="l"><a class="l" href="#1638">1638: </a>            }
</span><span id="1639" class="l"><a class="l" href="#1639">1639: </a>            <span class="php-var">$code</span> /= <span class="php-num">2</span>;
</span><span id="1640" class="l"><a class="l" href="#1640">1640: </a>        }
</span><span id="1641" class="l"><a class="l" href="#1641">1641: </a>        <span class="php-var">$seq</span> = <span class="php-keyword2">substr</span>(<span class="php-var">$seq</span>, <span class="php-num">0</span>, -<span class="php-num">2</span>);
</span><span id="1642" class="l"><a class="l" href="#1642">1642: </a>        <span class="php-var">$seq</span> = <span class="php-keyword2">strrev</span>(<span class="php-var">$seq</span>);
</span><span id="1643" class="l"><a class="l" href="#1643">1643: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1644" class="l"><a class="l" href="#1644">1644: </a>        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;binseq_to_array(<span class="php-var">$seq</span>, <span class="php-var">$bararray</span>);
</span><span id="1645" class="l"><a class="l" href="#1645">1645: </a>    }
</span><span id="1646" class="l"><a class="l" href="#1646">1646: </a>
</span><span id="1647" class="l"><a class="l" href="#1647">1647: </a>    <span class="php-comment">/**
</span></span><span id="1648" class="l"><a class="l" href="#1648">1648: </a><span class="php-comment">     * Pharmacode two-track
</span></span><span id="1649" class="l"><a class="l" href="#1649">1649: </a><span class="php-comment">     * Contains digits (0 to 9)
</span></span><span id="1650" class="l"><a class="l" href="#1650">1650: </a><span class="php-comment">     * @param string $code code to represent.
</span></span><span id="1651" class="l"><a class="l" href="#1651">1651: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="1652" class="l"><a class="l" href="#1652">1652: </a><span class="php-comment">     * @access protected
</span></span><span id="1653" class="l"><a class="l" href="#1653">1653: </a><span class="php-comment">     */</span>
</span><span id="1654" class="l"><a class="l" href="#1654">1654: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_pharmacode2t" href="#_barcode_pharmacode2t">barcode_pharmacode2t</a>(<span class="php-var">$code</span>) {
</span><span id="1655" class="l"><a class="l" href="#1655">1655: </a>        <span class="php-var">$seq</span> = <span class="php-quote">''</span>;
</span><span id="1656" class="l"><a class="l" href="#1656">1656: </a>        <span class="php-var">$code</span> = <span class="php-keyword2">intval</span>(<span class="php-var">$code</span>);
</span><span id="1657" class="l"><a class="l" href="#1657">1657: </a>        <span class="php-keyword1">do</span> {
</span><span id="1658" class="l"><a class="l" href="#1658">1658: </a>            <span class="php-keyword1">switch</span> (<span class="php-var">$code</span> % <span class="php-num">3</span>) {
</span><span id="1659" class="l"><a class="l" href="#1659">1659: </a>                <span class="php-keyword1">case</span> <span class="php-num">0</span>: {
</span><span id="1660" class="l"><a class="l" href="#1660">1660: </a>                    <span class="php-var">$seq</span> .= <span class="php-quote">'3'</span>;
</span><span id="1661" class="l"><a class="l" href="#1661">1661: </a>                    <span class="php-var">$code</span> = (<span class="php-var">$code</span> - <span class="php-num">3</span>) / <span class="php-num">3</span>;
</span><span id="1662" class="l"><a class="l" href="#1662">1662: </a>                    <span class="php-keyword1">break</span>;
</span><span id="1663" class="l"><a class="l" href="#1663">1663: </a>                }
</span><span id="1664" class="l"><a class="l" href="#1664">1664: </a>                <span class="php-keyword1">case</span> <span class="php-num">1</span>: {
</span><span id="1665" class="l"><a class="l" href="#1665">1665: </a>                    <span class="php-var">$seq</span> .= <span class="php-quote">'1'</span>;
</span><span id="1666" class="l"><a class="l" href="#1666">1666: </a>                    <span class="php-var">$code</span> = (<span class="php-var">$code</span> - <span class="php-num">1</span>) / <span class="php-num">3</span>;
</span><span id="1667" class="l"><a class="l" href="#1667">1667: </a>                    <span class="php-keyword1">break</span>;
</span><span id="1668" class="l"><a class="l" href="#1668">1668: </a>                }
</span><span id="1669" class="l"><a class="l" href="#1669">1669: </a>                <span class="php-keyword1">case</span> <span class="php-num">2</span>: {
</span><span id="1670" class="l"><a class="l" href="#1670">1670: </a>                    <span class="php-var">$seq</span> .= <span class="php-quote">'2'</span>;
</span><span id="1671" class="l"><a class="l" href="#1671">1671: </a>                    <span class="php-var">$code</span> = (<span class="php-var">$code</span> - <span class="php-num">2</span>) / <span class="php-num">3</span>;
</span><span id="1672" class="l"><a class="l" href="#1672">1672: </a>                    <span class="php-keyword1">break</span>;
</span><span id="1673" class="l"><a class="l" href="#1673">1673: </a>                }
</span><span id="1674" class="l"><a class="l" href="#1674">1674: </a>            }
</span><span id="1675" class="l"><a class="l" href="#1675">1675: </a>        } <span class="php-keyword1">while</span>(<span class="php-var">$code</span> != <span class="php-num">0</span>);
</span><span id="1676" class="l"><a class="l" href="#1676">1676: </a>        <span class="php-var">$seq</span> = <span class="php-keyword2">strrev</span>(<span class="php-var">$seq</span>);
</span><span id="1677" class="l"><a class="l" href="#1677">1677: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="1678" class="l"><a class="l" href="#1678">1678: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1679" class="l"><a class="l" href="#1679">1679: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$seq</span>);
</span><span id="1680" class="l"><a class="l" href="#1680">1680: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-var">$len</span>; ++<span class="php-var">$i</span>) {
</span><span id="1681" class="l"><a class="l" href="#1681">1681: </a>            <span class="php-keyword1">switch</span> (<span class="php-var">$seq</span>{<span class="php-var">$i</span>}) {
</span><span id="1682" class="l"><a class="l" href="#1682">1682: </a>                <span class="php-keyword1">case</span> <span class="php-quote">'1'</span>: {
</span><span id="1683" class="l"><a class="l" href="#1683">1683: </a>                    <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="1684" class="l"><a class="l" href="#1684">1684: </a>                    <span class="php-var">$h</span> = <span class="php-num">1</span>;
</span><span id="1685" class="l"><a class="l" href="#1685">1685: </a>                    <span class="php-keyword1">break</span>;
</span><span id="1686" class="l"><a class="l" href="#1686">1686: </a>                }
</span><span id="1687" class="l"><a class="l" href="#1687">1687: </a>                <span class="php-keyword1">case</span> <span class="php-quote">'2'</span>: {
</span><span id="1688" class="l"><a class="l" href="#1688">1688: </a>                    <span class="php-var">$p</span> = <span class="php-num">0</span>;
</span><span id="1689" class="l"><a class="l" href="#1689">1689: </a>                    <span class="php-var">$h</span> = <span class="php-num">1</span>;
</span><span id="1690" class="l"><a class="l" href="#1690">1690: </a>                    <span class="php-keyword1">break</span>;
</span><span id="1691" class="l"><a class="l" href="#1691">1691: </a>                }
</span><span id="1692" class="l"><a class="l" href="#1692">1692: </a>                <span class="php-keyword1">case</span> <span class="php-quote">'3'</span>: {
</span><span id="1693" class="l"><a class="l" href="#1693">1693: </a>                    <span class="php-var">$p</span> = <span class="php-num">0</span>;
</span><span id="1694" class="l"><a class="l" href="#1694">1694: </a>                    <span class="php-var">$h</span> = <span class="php-num">2</span>;
</span><span id="1695" class="l"><a class="l" href="#1695">1695: </a>                    <span class="php-keyword1">break</span>;
</span><span id="1696" class="l"><a class="l" href="#1696">1696: </a>                }
</span><span id="1697" class="l"><a class="l" href="#1697">1697: </a>            }
</span><span id="1698" class="l"><a class="l" href="#1698">1698: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-var">$h</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-var">$p</span>);
</span><span id="1699" class="l"><a class="l" href="#1699">1699: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1700" class="l"><a class="l" href="#1700">1700: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">2</span>;
</span><span id="1701" class="l"><a class="l" href="#1701">1701: </a>        }
</span><span id="1702" class="l"><a class="l" href="#1702">1702: </a>        <span class="php-keyword1">unset</span>(<span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][(<span class="php-var">$k</span> - <span class="php-num">1</span>)]);
</span><span id="1703" class="l"><a class="l" href="#1703">1703: </a>        --<span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>];
</span><span id="1704" class="l"><a class="l" href="#1704">1704: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="1705" class="l"><a class="l" href="#1705">1705: </a>    }
</span><span id="1706" class="l"><a class="l" href="#1706">1706: </a>
</span><span id="1707" class="l"><a class="l" href="#1707">1707: </a>
</span><span id="1708" class="l"><a class="l" href="#1708">1708: </a>    <span class="php-comment">/**
</span></span><span id="1709" class="l"><a class="l" href="#1709">1709: </a><span class="php-comment">     * IMB - Intelligent Mail Barcode - Onecode - USPS-B-3200
</span></span><span id="1710" class="l"><a class="l" href="#1710">1710: </a><span class="php-comment">     * (requires PHP bcmath extension)
</span></span><span id="1711" class="l"><a class="l" href="#1711">1711: </a><span class="php-comment">     * Intelligent Mail barcode is a 65-bar code for use on mail in the United States.
</span></span><span id="1712" class="l"><a class="l" href="#1712">1712: </a><span class="php-comment">     * The fields are described as follows:&lt;ul&gt;&lt;li&gt;The Barcode Identifier shall be assigned by USPS to encode the presort identification that is currently printed in human readable form on the optional endorsement line (OEL) as well as for future USPS use. This shall be two digits, with the second digit in the range of 04. The allowable encoding ranges shall be 0004, 1014, 2024, 3034, 4044, 5054, 6064, 7074, 8084, and 9094.&lt;/li&gt;&lt;li&gt;The Service Type Identifier shall be assigned by USPS for any combination of services requested on the mailpiece. The allowable encoding range shall be 000http://it2.php.net/manual/en/function.dechex.php999. Each 3-digit value shall correspond to a particular mail class with a particular combination of service(s). Each service program, such as OneCode Confirm and OneCode ACS, shall provide the list of Service Type Identifier values.&lt;/li&gt;&lt;li&gt;The Mailer or Customer Identifier shall be assigned by USPS as a unique, 6 or 9 digit number that identifies a business entity. The allowable encoding range for the 6 digit Mailer ID shall be 000000- 899999, while the allowable encoding range for the 9 digit Mailer ID shall be 900000000-999999999.&lt;/li&gt;&lt;li&gt;The Serial or Sequence Number shall be assigned by the mailer for uniquely identifying and tracking mailpieces. The allowable encoding range shall be 000000000999999999 when used with a 6 digit Mailer ID and 000000-999999 when used with a 9 digit Mailer ID. e. The Delivery Point ZIP Code shall be assigned by the mailer for routing the mailpiece. This shall replace POSTNET for routing the mailpiece to its final delivery point. The length may be 0, 5, 9, or 11 digits. The allowable encoding ranges shall be no ZIP Code, 0000099999,  000000000999999999, and 0000000000099999999999.&lt;/li&gt;&lt;/ul&gt;
</span></span><span id="1713" class="l"><a class="l" href="#1713">1713: </a><span class="php-comment">     * @param string $code code to print, separate the ZIP (routing code) from the rest using a minus char '-' (BarcodeID_ServiceTypeID_MailerID_SerialNumber-RoutingCode)
</span></span><span id="1714" class="l"><a class="l" href="#1714">1714: </a><span class="php-comment">     * @return array barcode representation.
</span></span><span id="1715" class="l"><a class="l" href="#1715">1715: </a><span class="php-comment">     * @access protected
</span></span><span id="1716" class="l"><a class="l" href="#1716">1716: </a><span class="php-comment">     */</span>
</span><span id="1717" class="l"><a class="l" href="#1717">1717: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_barcode_imb" href="#_barcode_imb">barcode_imb</a>(<span class="php-var">$code</span>) {
</span><span id="1718" class="l"><a class="l" href="#1718">1718: </a>        <span class="php-var">$asc_chr</span> = <span class="php-keyword1">array</span>(<span class="php-num">4</span>,<span class="php-num">0</span>,<span class="php-num">2</span>,<span class="php-num">6</span>,<span class="php-num">3</span>,<span class="php-num">5</span>,<span class="php-num">1</span>,<span class="php-num">9</span>,<span class="php-num">8</span>,<span class="php-num">7</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">0</span>,<span class="php-num">6</span>,<span class="php-num">4</span>,<span class="php-num">8</span>,<span class="php-num">2</span>,<span class="php-num">9</span>,<span class="php-num">5</span>,<span class="php-num">3</span>,<span class="php-num">0</span>,<span class="php-num">1</span>,<span class="php-num">3</span>,<span class="php-num">7</span>,<span class="php-num">4</span>,<span class="php-num">6</span>,<span class="php-num">8</span>,<span class="php-num">9</span>,<span class="php-num">2</span>,<span class="php-num">0</span>,<span class="php-num">5</span>,<span class="php-num">1</span>,<span class="php-num">9</span>,<span class="php-num">4</span>,<span class="php-num">3</span>,<span class="php-num">8</span>,<span class="php-num">6</span>,<span class="php-num">7</span>,<span class="php-num">1</span>,<span class="php-num">2</span>,<span class="php-num">4</span>,<span class="php-num">3</span>,<span class="php-num">9</span>,<span class="php-num">5</span>,<span class="php-num">7</span>,<span class="php-num">8</span>,<span class="php-num">3</span>,<span class="php-num">0</span>,<span class="php-num">2</span>,<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">0</span>,<span class="php-num">9</span>,<span class="php-num">1</span>,<span class="php-num">7</span>,<span class="php-num">0</span>,<span class="php-num">2</span>,<span class="php-num">4</span>,<span class="php-num">6</span>,<span class="php-num">3</span>,<span class="php-num">7</span>,<span class="php-num">1</span>,<span class="php-num">9</span>,<span class="php-num">5</span>,<span class="php-num">8</span>);
</span><span id="1719" class="l"><a class="l" href="#1719">1719: </a>        <span class="php-var">$dsc_chr</span> = <span class="php-keyword1">array</span>(<span class="php-num">7</span>,<span class="php-num">1</span>,<span class="php-num">9</span>,<span class="php-num">5</span>,<span class="php-num">8</span>,<span class="php-num">0</span>,<span class="php-num">2</span>,<span class="php-num">4</span>,<span class="php-num">6</span>,<span class="php-num">3</span>,<span class="php-num">5</span>,<span class="php-num">8</span>,<span class="php-num">9</span>,<span class="php-num">7</span>,<span class="php-num">3</span>,<span class="php-num">0</span>,<span class="php-num">6</span>,<span class="php-num">1</span>,<span class="php-num">7</span>,<span class="php-num">4</span>,<span class="php-num">6</span>,<span class="php-num">8</span>,<span class="php-num">9</span>,<span class="php-num">2</span>,<span class="php-num">5</span>,<span class="php-num">1</span>,<span class="php-num">7</span>,<span class="php-num">5</span>,<span class="php-num">4</span>,<span class="php-num">3</span>,<span class="php-num">8</span>,<span class="php-num">7</span>,<span class="php-num">6</span>,<span class="php-num">0</span>,<span class="php-num">2</span>,<span class="php-num">5</span>,<span class="php-num">4</span>,<span class="php-num">9</span>,<span class="php-num">3</span>,<span class="php-num">0</span>,<span class="php-num">1</span>,<span class="php-num">6</span>,<span class="php-num">8</span>,<span class="php-num">2</span>,<span class="php-num">0</span>,<span class="php-num">4</span>,<span class="php-num">5</span>,<span class="php-num">9</span>,<span class="php-num">6</span>,<span class="php-num">7</span>,<span class="php-num">5</span>,<span class="php-num">2</span>,<span class="php-num">6</span>,<span class="php-num">3</span>,<span class="php-num">8</span>,<span class="php-num">5</span>,<span class="php-num">1</span>,<span class="php-num">9</span>,<span class="php-num">8</span>,<span class="php-num">7</span>,<span class="php-num">4</span>,<span class="php-num">0</span>,<span class="php-num">2</span>,<span class="php-num">6</span>,<span class="php-num">3</span>);
</span><span id="1720" class="l"><a class="l" href="#1720">1720: </a>        <span class="php-var">$asc_pos</span> = <span class="php-keyword1">array</span>(<span class="php-num">3</span>,<span class="php-num">0</span>,<span class="php-num">8</span>,<span class="php-num">11</span>,<span class="php-num">1</span>,<span class="php-num">12</span>,<span class="php-num">8</span>,<span class="php-num">11</span>,<span class="php-num">10</span>,<span class="php-num">6</span>,<span class="php-num">4</span>,<span class="php-num">12</span>,<span class="php-num">2</span>,<span class="php-num">7</span>,<span class="php-num">9</span>,<span class="php-num">6</span>,<span class="php-num">7</span>,<span class="php-num">9</span>,<span class="php-num">2</span>,<span class="php-num">8</span>,<span class="php-num">4</span>,<span class="php-num">0</span>,<span class="php-num">12</span>,<span class="php-num">7</span>,<span class="php-num">10</span>,<span class="php-num">9</span>,<span class="php-num">0</span>,<span class="php-num">7</span>,<span class="php-num">10</span>,<span class="php-num">5</span>,<span class="php-num">7</span>,<span class="php-num">9</span>,<span class="php-num">6</span>,<span class="php-num">8</span>,<span class="php-num">2</span>,<span class="php-num">12</span>,<span class="php-num">1</span>,<span class="php-num">4</span>,<span class="php-num">2</span>,<span class="php-num">0</span>,<span class="php-num">1</span>,<span class="php-num">5</span>,<span class="php-num">4</span>,<span class="php-num">6</span>,<span class="php-num">12</span>,<span class="php-num">1</span>,<span class="php-num">0</span>,<span class="php-num">9</span>,<span class="php-num">4</span>,<span class="php-num">7</span>,<span class="php-num">5</span>,<span class="php-num">10</span>,<span class="php-num">2</span>,<span class="php-num">6</span>,<span class="php-num">9</span>,<span class="php-num">11</span>,<span class="php-num">2</span>,<span class="php-num">12</span>,<span class="php-num">6</span>,<span class="php-num">7</span>,<span class="php-num">5</span>,<span class="php-num">11</span>,<span class="php-num">0</span>,<span class="php-num">3</span>,<span class="php-num">2</span>);
</span><span id="1721" class="l"><a class="l" href="#1721">1721: </a>        <span class="php-var">$dsc_pos</span> = <span class="php-keyword1">array</span>(<span class="php-num">2</span>,<span class="php-num">10</span>,<span class="php-num">12</span>,<span class="php-num">5</span>,<span class="php-num">9</span>,<span class="php-num">1</span>,<span class="php-num">5</span>,<span class="php-num">4</span>,<span class="php-num">3</span>,<span class="php-num">9</span>,<span class="php-num">11</span>,<span class="php-num">5</span>,<span class="php-num">10</span>,<span class="php-num">1</span>,<span class="php-num">6</span>,<span class="php-num">3</span>,<span class="php-num">4</span>,<span class="php-num">1</span>,<span class="php-num">10</span>,<span class="php-num">0</span>,<span class="php-num">2</span>,<span class="php-num">11</span>,<span class="php-num">8</span>,<span class="php-num">6</span>,<span class="php-num">1</span>,<span class="php-num">12</span>,<span class="php-num">3</span>,<span class="php-num">8</span>,<span class="php-num">6</span>,<span class="php-num">4</span>,<span class="php-num">4</span>,<span class="php-num">11</span>,<span class="php-num">0</span>,<span class="php-num">6</span>,<span class="php-num">1</span>,<span class="php-num">9</span>,<span class="php-num">11</span>,<span class="php-num">5</span>,<span class="php-num">3</span>,<span class="php-num">7</span>,<span class="php-num">3</span>,<span class="php-num">10</span>,<span class="php-num">7</span>,<span class="php-num">11</span>,<span class="php-num">8</span>,<span class="php-num">2</span>,<span class="php-num">10</span>,<span class="php-num">3</span>,<span class="php-num">5</span>,<span class="php-num">8</span>,<span class="php-num">0</span>,<span class="php-num">3</span>,<span class="php-num">12</span>,<span class="php-num">11</span>,<span class="php-num">8</span>,<span class="php-num">4</span>,<span class="php-num">5</span>,<span class="php-num">1</span>,<span class="php-num">3</span>,<span class="php-num">0</span>,<span class="php-num">7</span>,<span class="php-num">12</span>,<span class="php-num">9</span>,<span class="php-num">8</span>,<span class="php-num">10</span>);
</span><span id="1722" class="l"><a class="l" href="#1722">1722: </a>        <span class="php-var">$code_arr</span> = <span class="php-keyword2">explode</span>(<span class="php-quote">'-'</span>, <span class="php-var">$code</span>);
</span><span id="1723" class="l"><a class="l" href="#1723">1723: </a>        <span class="php-var">$tracking_number</span> = <span class="php-var">$code_arr</span>[<span class="php-num">0</span>];
</span><span id="1724" class="l"><a class="l" href="#1724">1724: </a>        <span class="php-keyword1">if</span> (<span class="php-keyword1">isset</span>(<span class="php-var">$code_arr</span>[<span class="php-num">1</span>])) {
</span><span id="1725" class="l"><a class="l" href="#1725">1725: </a>            <span class="php-var">$routing_code</span> = <span class="php-var">$code_arr</span>[<span class="php-num">1</span>];
</span><span id="1726" class="l"><a class="l" href="#1726">1726: </a>        } <span class="php-keyword1">else</span> {
</span><span id="1727" class="l"><a class="l" href="#1727">1727: </a>            <span class="php-var">$routing_code</span> = <span class="php-quote">''</span>;
</span><span id="1728" class="l"><a class="l" href="#1728">1728: </a>        }
</span><span id="1729" class="l"><a class="l" href="#1729">1729: </a>        <span class="php-comment">// Conversion of Routing Code</span>
</span><span id="1730" class="l"><a class="l" href="#1730">1730: </a>        <span class="php-keyword1">switch</span> (<span class="php-keyword2">strlen</span>(<span class="php-var">$routing_code</span>)) {
</span><span id="1731" class="l"><a class="l" href="#1731">1731: </a>            <span class="php-keyword1">case</span> <span class="php-num">0</span>: {
</span><span id="1732" class="l"><a class="l" href="#1732">1732: </a>                <span class="php-var">$binary_code</span> = <span class="php-num">0</span>;
</span><span id="1733" class="l"><a class="l" href="#1733">1733: </a>                <span class="php-keyword1">break</span>;
</span><span id="1734" class="l"><a class="l" href="#1734">1734: </a>            }
</span><span id="1735" class="l"><a class="l" href="#1735">1735: </a>            <span class="php-keyword1">case</span> <span class="php-num">5</span>: {
</span><span id="1736" class="l"><a class="l" href="#1736">1736: </a>                <span class="php-var">$binary_code</span> = <span class="php-keyword2">bcadd</span>(<span class="php-var">$routing_code</span>, <span class="php-quote">'1'</span>);
</span><span id="1737" class="l"><a class="l" href="#1737">1737: </a>                <span class="php-keyword1">break</span>;
</span><span id="1738" class="l"><a class="l" href="#1738">1738: </a>            }
</span><span id="1739" class="l"><a class="l" href="#1739">1739: </a>            <span class="php-keyword1">case</span> <span class="php-num">9</span>: {
</span><span id="1740" class="l"><a class="l" href="#1740">1740: </a>                <span class="php-var">$binary_code</span> = <span class="php-keyword2">bcadd</span>(<span class="php-var">$routing_code</span>, <span class="php-quote">'100001'</span>);
</span><span id="1741" class="l"><a class="l" href="#1741">1741: </a>                <span class="php-keyword1">break</span>;
</span><span id="1742" class="l"><a class="l" href="#1742">1742: </a>            }
</span><span id="1743" class="l"><a class="l" href="#1743">1743: </a>            <span class="php-keyword1">case</span> <span class="php-num">11</span>: {
</span><span id="1744" class="l"><a class="l" href="#1744">1744: </a>                <span class="php-var">$binary_code</span> = <span class="php-keyword2">bcadd</span>(<span class="php-var">$routing_code</span>, <span class="php-quote">'1000100001'</span>);
</span><span id="1745" class="l"><a class="l" href="#1745">1745: </a>                <span class="php-keyword1">break</span>;
</span><span id="1746" class="l"><a class="l" href="#1746">1746: </a>            }
</span><span id="1747" class="l"><a class="l" href="#1747">1747: </a>            <span class="php-keyword1">default</span>: {
</span><span id="1748" class="l"><a class="l" href="#1748">1748: </a>                <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="1749" class="l"><a class="l" href="#1749">1749: </a>                <span class="php-keyword1">break</span>;
</span><span id="1750" class="l"><a class="l" href="#1750">1750: </a>            }
</span><span id="1751" class="l"><a class="l" href="#1751">1751: </a>        }
</span><span id="1752" class="l"><a class="l" href="#1752">1752: </a>        <span class="php-var">$binary_code</span> = <span class="php-keyword2">bcmul</span>(<span class="php-var">$binary_code</span>, <span class="php-num">10</span>);
</span><span id="1753" class="l"><a class="l" href="#1753">1753: </a>        <span class="php-var">$binary_code</span> = <span class="php-keyword2">bcadd</span>(<span class="php-var">$binary_code</span>, <span class="php-var">$tracking_number</span>{<span class="php-num">0</span>});
</span><span id="1754" class="l"><a class="l" href="#1754">1754: </a>        <span class="php-var">$binary_code</span> = <span class="php-keyword2">bcmul</span>(<span class="php-var">$binary_code</span>, <span class="php-num">5</span>);
</span><span id="1755" class="l"><a class="l" href="#1755">1755: </a>        <span class="php-var">$binary_code</span> = <span class="php-keyword2">bcadd</span>(<span class="php-var">$binary_code</span>, <span class="php-var">$tracking_number</span>{<span class="php-num">1</span>});
</span><span id="1756" class="l"><a class="l" href="#1756">1756: </a>        <span class="php-var">$binary_code</span> .= <span class="php-keyword2">substr</span>(<span class="php-var">$tracking_number</span>, <span class="php-num">2</span>, <span class="php-num">18</span>);
</span><span id="1757" class="l"><a class="l" href="#1757">1757: </a>        <span class="php-comment">// convert to hexadecimal</span>
</span><span id="1758" class="l"><a class="l" href="#1758">1758: </a>        <span class="php-var">$binary_code</span> = <span class="php-var">$this</span>-&gt;dec_to_hex(<span class="php-var">$binary_code</span>);
</span><span id="1759" class="l"><a class="l" href="#1759">1759: </a>        <span class="php-comment">// pad to get 13 bytes</span>
</span><span id="1760" class="l"><a class="l" href="#1760">1760: </a>        <span class="php-var">$binary_code</span> = <span class="php-keyword2">str_pad</span>(<span class="php-var">$binary_code</span>, <span class="php-num">26</span>, <span class="php-quote">'0'</span>, STR_PAD_LEFT);
</span><span id="1761" class="l"><a class="l" href="#1761">1761: </a>        <span class="php-comment">// convert string to array of bytes</span>
</span><span id="1762" class="l"><a class="l" href="#1762">1762: </a>        <span class="php-var">$binary_code_arr</span> = <span class="php-keyword2">chunk_split</span>(<span class="php-var">$binary_code</span>, <span class="php-num">2</span>, <span class="php-quote">&quot;\r&quot;</span>);
</span><span id="1763" class="l"><a class="l" href="#1763">1763: </a>        <span class="php-var">$binary_code_arr</span> = <span class="php-keyword2">substr</span>(<span class="php-var">$binary_code_arr</span>, <span class="php-num">0</span>, -<span class="php-num">1</span>);
</span><span id="1764" class="l"><a class="l" href="#1764">1764: </a>        <span class="php-var">$binary_code_arr</span> = <span class="php-keyword2">explode</span>(<span class="php-quote">&quot;\r&quot;</span>, <span class="php-var">$binary_code_arr</span>);
</span><span id="1765" class="l"><a class="l" href="#1765">1765: </a>        <span class="php-comment">// calculate frame check sequence</span>
</span><span id="1766" class="l"><a class="l" href="#1766">1766: </a>        <span class="php-var">$fcs</span> = <span class="php-var">$this</span>-&gt;imb_crc11fcs(<span class="php-var">$binary_code_arr</span>);
</span><span id="1767" class="l"><a class="l" href="#1767">1767: </a>        <span class="php-comment">// exclude first 2 bits from first byte</span>
</span><span id="1768" class="l"><a class="l" href="#1768">1768: </a>        <span class="php-var">$first_byte</span> = <span class="php-keyword2">sprintf</span>(<span class="php-quote">'%2s'</span>, <span class="php-keyword2">dechex</span>((<span class="php-keyword2">hexdec</span>(<span class="php-var">$binary_code_arr</span>[<span class="php-num">0</span>]) &lt;&lt; <span class="php-num">2</span>) &gt;&gt; <span class="php-num">2</span>));
</span><span id="1769" class="l"><a class="l" href="#1769">1769: </a>        <span class="php-var">$binary_code_102bit</span> = <span class="php-var">$first_byte</span>.<span class="php-keyword2">substr</span>(<span class="php-var">$binary_code</span>, <span class="php-num">2</span>);
</span><span id="1770" class="l"><a class="l" href="#1770">1770: </a>        <span class="php-comment">// convert binary data to codewords</span>
</span><span id="1771" class="l"><a class="l" href="#1771">1771: </a>        <span class="php-var">$codewords</span> = <span class="php-keyword1">array</span>();
</span><span id="1772" class="l"><a class="l" href="#1772">1772: </a>        <span class="php-var">$data</span> = <span class="php-var">$this</span>-&gt;hex_to_dec(<span class="php-var">$binary_code_102bit</span>);
</span><span id="1773" class="l"><a class="l" href="#1773">1773: </a>        <span class="php-var">$codewords</span>[<span class="php-num">0</span>] = <span class="php-keyword2">bcmod</span>(<span class="php-var">$data</span>, <span class="php-num">636</span>) * <span class="php-num">2</span>;
</span><span id="1774" class="l"><a class="l" href="#1774">1774: </a>        <span class="php-var">$data</span> = <span class="php-keyword2">bcdiv</span>(<span class="php-var">$data</span>, <span class="php-num">636</span>);
</span><span id="1775" class="l"><a class="l" href="#1775">1775: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">1</span>; <span class="php-var">$i</span> &lt; <span class="php-num">9</span>; ++<span class="php-var">$i</span>) {
</span><span id="1776" class="l"><a class="l" href="#1776">1776: </a>            <span class="php-var">$codewords</span>[<span class="php-var">$i</span>] = <span class="php-keyword2">bcmod</span>(<span class="php-var">$data</span>, <span class="php-num">1365</span>);
</span><span id="1777" class="l"><a class="l" href="#1777">1777: </a>            <span class="php-var">$data</span> = <span class="php-keyword2">bcdiv</span>(<span class="php-var">$data</span>, <span class="php-num">1365</span>);
</span><span id="1778" class="l"><a class="l" href="#1778">1778: </a>        }
</span><span id="1779" class="l"><a class="l" href="#1779">1779: </a>        <span class="php-var">$codewords</span>[<span class="php-num">9</span>] = <span class="php-var">$data</span>;
</span><span id="1780" class="l"><a class="l" href="#1780">1780: </a>        <span class="php-keyword1">if</span> ((<span class="php-var">$fcs</span> &gt;&gt; <span class="php-num">10</span>) == <span class="php-num">1</span>) {
</span><span id="1781" class="l"><a class="l" href="#1781">1781: </a>            <span class="php-var">$codewords</span>[<span class="php-num">9</span>] += <span class="php-num">659</span>;
</span><span id="1782" class="l"><a class="l" href="#1782">1782: </a>        }
</span><span id="1783" class="l"><a class="l" href="#1783">1783: </a>        <span class="php-comment">// generate lookup tables</span>
</span><span id="1784" class="l"><a class="l" href="#1784">1784: </a>        <span class="php-var">$table2of13</span> = <span class="php-var">$this</span>-&gt;imb_tables(<span class="php-num">2</span>, <span class="php-num">78</span>);
</span><span id="1785" class="l"><a class="l" href="#1785">1785: </a>        <span class="php-var">$table5of13</span> = <span class="php-var">$this</span>-&gt;imb_tables(<span class="php-num">5</span>, <span class="php-num">1287</span>);
</span><span id="1786" class="l"><a class="l" href="#1786">1786: </a>        <span class="php-comment">// convert codewords to characters</span>
</span><span id="1787" class="l"><a class="l" href="#1787">1787: </a>        <span class="php-var">$characters</span> = <span class="php-keyword1">array</span>();
</span><span id="1788" class="l"><a class="l" href="#1788">1788: </a>        <span class="php-var">$bitmask</span> = <span class="php-num">512</span>;
</span><span id="1789" class="l"><a class="l" href="#1789">1789: </a>        <span class="php-keyword1">foreach</span>(<span class="php-var">$codewords</span> <span class="php-keyword1">as</span> <span class="php-var">$k</span> =&gt; <span class="php-var">$val</span>) {
</span><span id="1790" class="l"><a class="l" href="#1790">1790: </a>            <span class="php-keyword1">if</span> (<span class="php-var">$val</span> &lt;= <span class="php-num">1286</span>) {
</span><span id="1791" class="l"><a class="l" href="#1791">1791: </a>                <span class="php-var">$chrcode</span> = <span class="php-var">$table5of13</span>[<span class="php-var">$val</span>];
</span><span id="1792" class="l"><a class="l" href="#1792">1792: </a>            } <span class="php-keyword1">else</span> {
</span><span id="1793" class="l"><a class="l" href="#1793">1793: </a>                <span class="php-var">$chrcode</span> = <span class="php-var">$table2of13</span>[(<span class="php-var">$val</span> - <span class="php-num">1287</span>)];
</span><span id="1794" class="l"><a class="l" href="#1794">1794: </a>            }
</span><span id="1795" class="l"><a class="l" href="#1795">1795: </a>            <span class="php-keyword1">if</span> ((<span class="php-var">$fcs</span> &amp; <span class="php-var">$bitmask</span>) &gt; <span class="php-num">0</span>) {
</span><span id="1796" class="l"><a class="l" href="#1796">1796: </a>                <span class="php-comment">// bitwise invert</span>
</span><span id="1797" class="l"><a class="l" href="#1797">1797: </a>                <span class="php-var">$chrcode</span> = ((~<span class="php-var">$chrcode</span>) &amp; <span class="php-num">8191</span>);
</span><span id="1798" class="l"><a class="l" href="#1798">1798: </a>            }
</span><span id="1799" class="l"><a class="l" href="#1799">1799: </a>            <span class="php-var">$characters</span>[] = <span class="php-var">$chrcode</span>;
</span><span id="1800" class="l"><a class="l" href="#1800">1800: </a>            <span class="php-var">$bitmask</span> /= <span class="php-num">2</span>;
</span><span id="1801" class="l"><a class="l" href="#1801">1801: </a>        }
</span><span id="1802" class="l"><a class="l" href="#1802">1802: </a>        <span class="php-var">$characters</span> = <span class="php-keyword2">array_reverse</span>(<span class="php-var">$characters</span>);
</span><span id="1803" class="l"><a class="l" href="#1803">1803: </a>        <span class="php-comment">// build bars</span>
</span><span id="1804" class="l"><a class="l" href="#1804">1804: </a>        <span class="php-var">$k</span> = <span class="php-num">0</span>;
</span><span id="1805" class="l"><a class="l" href="#1805">1805: </a>        <span class="php-var">$bararray</span> = <span class="php-keyword1">array</span>(<span class="php-quote">'code'</span> =&gt; <span class="php-var">$code</span>, <span class="php-quote">'maxw'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'maxh'</span> =&gt; <span class="php-num">3</span>, <span class="php-quote">'bcode'</span> =&gt; <span class="php-keyword1">array</span>());
</span><span id="1806" class="l"><a class="l" href="#1806">1806: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-num">65</span>; ++<span class="php-var">$i</span>) {
</span><span id="1807" class="l"><a class="l" href="#1807">1807: </a>            <span class="php-var">$asc</span> = ((<span class="php-var">$characters</span>[<span class="php-var">$asc_chr</span>[<span class="php-var">$i</span>]] &amp; <span class="php-keyword2">pow</span>(<span class="php-num">2</span>, <span class="php-var">$asc_pos</span>[<span class="php-var">$i</span>])) &gt; <span class="php-num">0</span>);
</span><span id="1808" class="l"><a class="l" href="#1808">1808: </a>            <span class="php-var">$dsc</span> = ((<span class="php-var">$characters</span>[<span class="php-var">$dsc_chr</span>[<span class="php-var">$i</span>]] &amp; <span class="php-keyword2">pow</span>(<span class="php-num">2</span>, <span class="php-var">$dsc_pos</span>[<span class="php-var">$i</span>])) &gt; <span class="php-num">0</span>);
</span><span id="1809" class="l"><a class="l" href="#1809">1809: </a>            <span class="php-keyword1">if</span> (<span class="php-var">$asc</span> <span class="php-keyword1">AND</span> <span class="php-var">$dsc</span>) {
</span><span id="1810" class="l"><a class="l" href="#1810">1810: </a>                <span class="php-comment">// full bar (F)</span>
</span><span id="1811" class="l"><a class="l" href="#1811">1811: </a>                <span class="php-var">$p</span> = <span class="php-num">0</span>;
</span><span id="1812" class="l"><a class="l" href="#1812">1812: </a>                <span class="php-var">$h</span> = <span class="php-num">3</span>;
</span><span id="1813" class="l"><a class="l" href="#1813">1813: </a>            } <span class="php-keyword1">elseif</span> (<span class="php-var">$asc</span>) {
</span><span id="1814" class="l"><a class="l" href="#1814">1814: </a>                <span class="php-comment">// ascender (A)</span>
</span><span id="1815" class="l"><a class="l" href="#1815">1815: </a>                <span class="php-var">$p</span> = <span class="php-num">0</span>;
</span><span id="1816" class="l"><a class="l" href="#1816">1816: </a>                <span class="php-var">$h</span> = <span class="php-num">2</span>;
</span><span id="1817" class="l"><a class="l" href="#1817">1817: </a>            } <span class="php-keyword1">elseif</span> (<span class="php-var">$dsc</span>) {
</span><span id="1818" class="l"><a class="l" href="#1818">1818: </a>                <span class="php-comment">// descender (D)</span>
</span><span id="1819" class="l"><a class="l" href="#1819">1819: </a>                <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="1820" class="l"><a class="l" href="#1820">1820: </a>                <span class="php-var">$h</span> = <span class="php-num">2</span>;
</span><span id="1821" class="l"><a class="l" href="#1821">1821: </a>            } <span class="php-keyword1">else</span> {
</span><span id="1822" class="l"><a class="l" href="#1822">1822: </a>                <span class="php-comment">// tracker (T)</span>
</span><span id="1823" class="l"><a class="l" href="#1823">1823: </a>                <span class="php-var">$p</span> = <span class="php-num">1</span>;
</span><span id="1824" class="l"><a class="l" href="#1824">1824: </a>                <span class="php-var">$h</span> = <span class="php-num">1</span>;
</span><span id="1825" class="l"><a class="l" href="#1825">1825: </a>            }
</span><span id="1826" class="l"><a class="l" href="#1826">1826: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-var">$h</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-var">$p</span>);
</span><span id="1827" class="l"><a class="l" href="#1827">1827: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][<span class="php-var">$k</span>++] = <span class="php-keyword1">array</span>(<span class="php-quote">'t'</span> =&gt; <span class="php-num">0</span>, <span class="php-quote">'w'</span> =&gt; <span class="php-num">1</span>, <span class="php-quote">'h'</span> =&gt; <span class="php-num">2</span>, <span class="php-quote">'p'</span> =&gt; <span class="php-num">0</span>);
</span><span id="1828" class="l"><a class="l" href="#1828">1828: </a>            <span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>] += <span class="php-num">2</span>;
</span><span id="1829" class="l"><a class="l" href="#1829">1829: </a>        }
</span><span id="1830" class="l"><a class="l" href="#1830">1830: </a>        <span class="php-keyword1">unset</span>(<span class="php-var">$bararray</span>[<span class="php-quote">'bcode'</span>][(<span class="php-var">$k</span> - <span class="php-num">1</span>)]);
</span><span id="1831" class="l"><a class="l" href="#1831">1831: </a>        --<span class="php-var">$bararray</span>[<span class="php-quote">'maxw'</span>];
</span><span id="1832" class="l"><a class="l" href="#1832">1832: </a>        <span class="php-keyword1">return</span> <span class="php-var">$bararray</span>;
</span><span id="1833" class="l"><a class="l" href="#1833">1833: </a>    }
</span><span id="1834" class="l"><a class="l" href="#1834">1834: </a>
</span><span id="1835" class="l"><a class="l" href="#1835">1835: </a>    <span class="php-comment">/**
</span></span><span id="1836" class="l"><a class="l" href="#1836">1836: </a><span class="php-comment">     * Convert large integer number to hexadecimal representation.
</span></span><span id="1837" class="l"><a class="l" href="#1837">1837: </a><span class="php-comment">     * (requires PHP bcmath extension)
</span></span><span id="1838" class="l"><a class="l" href="#1838">1838: </a><span class="php-comment">     * @param string $number number to convert specified as a string
</span></span><span id="1839" class="l"><a class="l" href="#1839">1839: </a><span class="php-comment">     * @return string hexadecimal representation
</span></span><span id="1840" class="l"><a class="l" href="#1840">1840: </a><span class="php-comment">     */</span>
</span><span id="1841" class="l"><a class="l" href="#1841">1841: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_dec_to_hex" href="#_dec_to_hex">dec_to_hex</a>(<span class="php-var">$number</span>) {
</span><span id="1842" class="l"><a class="l" href="#1842">1842: </a>        <span class="php-var">$i</span> = <span class="php-num">0</span>;
</span><span id="1843" class="l"><a class="l" href="#1843">1843: </a>        <span class="php-var">$hex</span> = <span class="php-keyword1">array</span>();
</span><span id="1844" class="l"><a class="l" href="#1844">1844: </a>        <span class="php-keyword1">if</span>(<span class="php-var">$number</span> == <span class="php-num">0</span>) {
</span><span id="1845" class="l"><a class="l" href="#1845">1845: </a>            <span class="php-keyword1">return</span> <span class="php-quote">'00'</span>;
</span><span id="1846" class="l"><a class="l" href="#1846">1846: </a>        }
</span><span id="1847" class="l"><a class="l" href="#1847">1847: </a>        <span class="php-keyword1">while</span>(<span class="php-var">$number</span> &gt; <span class="php-num">0</span>) {
</span><span id="1848" class="l"><a class="l" href="#1848">1848: </a>            <span class="php-keyword1">if</span>(<span class="php-var">$number</span> == <span class="php-num">0</span>) {
</span><span id="1849" class="l"><a class="l" href="#1849">1849: </a>                <span class="php-keyword2">array_push</span>(<span class="php-var">$hex</span>, <span class="php-quote">'0'</span>);
</span><span id="1850" class="l"><a class="l" href="#1850">1850: </a>            } <span class="php-keyword1">else</span> {
</span><span id="1851" class="l"><a class="l" href="#1851">1851: </a>                <span class="php-keyword2">array_push</span>(<span class="php-var">$hex</span>, <span class="php-keyword2">strtoupper</span>(<span class="php-keyword2">dechex</span>(<span class="php-keyword2">bcmod</span>(<span class="php-var">$number</span>, <span class="php-quote">'16'</span>))));
</span><span id="1852" class="l"><a class="l" href="#1852">1852: </a>                <span class="php-var">$number</span> = <span class="php-keyword2">bcdiv</span>(<span class="php-var">$number</span>, <span class="php-quote">'16'</span>, <span class="php-num">0</span>);
</span><span id="1853" class="l"><a class="l" href="#1853">1853: </a>            }
</span><span id="1854" class="l"><a class="l" href="#1854">1854: </a>        }
</span><span id="1855" class="l"><a class="l" href="#1855">1855: </a>        <span class="php-var">$hex</span> = <span class="php-keyword2">array_reverse</span>(<span class="php-var">$hex</span>);
</span><span id="1856" class="l"><a class="l" href="#1856">1856: </a>        <span class="php-keyword1">return</span> <span class="php-keyword2">implode</span>(<span class="php-var">$hex</span>);
</span><span id="1857" class="l"><a class="l" href="#1857">1857: </a>    }
</span><span id="1858" class="l"><a class="l" href="#1858">1858: </a>
</span><span id="1859" class="l"><a class="l" href="#1859">1859: </a>    <span class="php-comment">/**
</span></span><span id="1860" class="l"><a class="l" href="#1860">1860: </a><span class="php-comment">     * Convert large hexadecimal number to decimal representation (string).
</span></span><span id="1861" class="l"><a class="l" href="#1861">1861: </a><span class="php-comment">     * (requires PHP bcmath extension)
</span></span><span id="1862" class="l"><a class="l" href="#1862">1862: </a><span class="php-comment">     * @param string $hex hexadecimal number to convert specified as a string
</span></span><span id="1863" class="l"><a class="l" href="#1863">1863: </a><span class="php-comment">     * @return string hexadecimal representation
</span></span><span id="1864" class="l"><a class="l" href="#1864">1864: </a><span class="php-comment">     */</span>
</span><span id="1865" class="l"><a class="l" href="#1865">1865: </a>    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> <a id="_hex_to_dec" href="#_hex_to_dec">hex_to_dec</a>(<span class="php-var">$hex</span>) {
</span><span id="1866" class="l"><a class="l" href="#1866">1866: </a>        <span class="php-var">$dec</span> = <span class="php-num">0</span>;
</span><span id="1867" class="l"><a class="l" href="#1867">1867: </a>        <span class="php-var">$bitval</span> = <span class="php-num">1</span>;
</span><span id="1868" class="l"><a class="l" href="#1868">1868: </a>        <span class="php-var">$len</span> = <span class="php-keyword2">strlen</span>(<span class="php-var">$hex</span>);
</span><span id="1869" class="l"><a class="l" href="#1869">1869: </a>        <span class="php-keyword1">for</span>(<span class="php-var">$pos</span> = (<span class="php-var">$len</span> - <span class="php-num">1</span>); <span class="php-var">$pos</span> &gt;= <span class="php-num">0</span>; --<span class="php-var">$pos</span>) {
</span><span id="1870" class="l"><a class="l" href="#1870">1870: </a>            <span class="php-var">$dec</span> = <span class="php-keyword2">bcadd</span>(<span class="php-var">$dec</span>, <span class="php-keyword2">bcmul</span>(<span class="php-keyword2">hexdec</span>(<span class="php-var">$hex</span>{<span class="php-var">$pos</span>}), <span class="php-var">$bitval</span>));
</span><span id="1871" class="l"><a class="l" href="#1871">1871: </a>            <span class="php-var">$bitval</span> = <span class="php-keyword2">bcmul</span>(<span class="php-var">$bitval</span>, <span class="php-num">16</span>);
</span><span id="1872" class="l"><a class="l" href="#1872">1872: </a>        }
</span><span id="1873" class="l"><a class="l" href="#1873">1873: </a>        <span class="php-keyword1">return</span> <span class="php-var">$dec</span>;
</span><span id="1874" class="l"><a class="l" href="#1874">1874: </a>    }
</span><span id="1875" class="l"><a class="l" href="#1875">1875: </a>
</span><span id="1876" class="l"><a class="l" href="#1876">1876: </a>    <span class="php-comment">/**
</span></span><span id="1877" class="l"><a class="l" href="#1877">1877: </a><span class="php-comment">     * Intelligent Mail Barcode calculation of Frame Check Sequence
</span></span><span id="1878" class="l"><a class="l" href="#1878">1878: </a><span class="php-comment">     * @param string $code_arr array of hexadecimal values (13 bytes holding 102 bits right justified).
</span></span><span id="1879" class="l"><a class="l" href="#1879">1879: </a><span class="php-comment">     * @return int 11 bit Frame Check Sequence as integer (decimal base)
</span></span><span id="1880" class="l"><a class="l" href="#1880">1880: </a><span class="php-comment">     * @access protected
</span></span><span id="1881" class="l"><a class="l" href="#1881">1881: </a><span class="php-comment">     */</span>
</span><span id="1882" class="l"><a class="l" href="#1882">1882: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_imb_crc11fcs" href="#_imb_crc11fcs">imb_crc11fcs</a>(<span class="php-var">$code_arr</span>) {
</span><span id="1883" class="l"><a class="l" href="#1883">1883: </a>        <span class="php-var">$genpoly</span> = <span class="php-num">0x0F35</span>; <span class="php-comment">// generator polynomial</span>
</span><span id="1884" class="l"><a class="l" href="#1884">1884: </a>        <span class="php-var">$fcs</span> = <span class="php-num">0x07FF</span>; <span class="php-comment">// Frame Check Sequence</span>
</span><span id="1885" class="l"><a class="l" href="#1885">1885: </a>        <span class="php-comment">// do most significant byte skipping the 2 most significant bits</span>
</span><span id="1886" class="l"><a class="l" href="#1886">1886: </a>        <span class="php-var">$data</span> = <span class="php-keyword2">hexdec</span>(<span class="php-var">$code_arr</span>[<span class="php-num">0</span>]) &lt;&lt; <span class="php-num">5</span>;
</span><span id="1887" class="l"><a class="l" href="#1887">1887: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$bit</span> = <span class="php-num">2</span>; <span class="php-var">$bit</span> &lt; <span class="php-num">8</span>; ++<span class="php-var">$bit</span>) {
</span><span id="1888" class="l"><a class="l" href="#1888">1888: </a>            <span class="php-keyword1">if</span> ((<span class="php-var">$fcs</span> ^ <span class="php-var">$data</span>) &amp; <span class="php-num">0x400</span>) {
</span><span id="1889" class="l"><a class="l" href="#1889">1889: </a>                <span class="php-var">$fcs</span> = (<span class="php-var">$fcs</span> &lt;&lt; <span class="php-num">1</span>) ^ <span class="php-var">$genpoly</span>;
</span><span id="1890" class="l"><a class="l" href="#1890">1890: </a>            } <span class="php-keyword1">else</span> {
</span><span id="1891" class="l"><a class="l" href="#1891">1891: </a>                <span class="php-var">$fcs</span> = (<span class="php-var">$fcs</span> &lt;&lt; <span class="php-num">1</span>);
</span><span id="1892" class="l"><a class="l" href="#1892">1892: </a>            }
</span><span id="1893" class="l"><a class="l" href="#1893">1893: </a>            <span class="php-var">$fcs</span> &amp;= <span class="php-num">0x7FF</span>;
</span><span id="1894" class="l"><a class="l" href="#1894">1894: </a>            <span class="php-var">$data</span> &lt;&lt;= <span class="php-num">1</span>;
</span><span id="1895" class="l"><a class="l" href="#1895">1895: </a>        }
</span><span id="1896" class="l"><a class="l" href="#1896">1896: </a>        <span class="php-comment">// do rest of bytes</span>
</span><span id="1897" class="l"><a class="l" href="#1897">1897: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$byte</span> = <span class="php-num">1</span>; <span class="php-var">$byte</span> &lt; <span class="php-num">13</span>; ++<span class="php-var">$byte</span>) {
</span><span id="1898" class="l"><a class="l" href="#1898">1898: </a>            <span class="php-var">$data</span> = <span class="php-keyword2">hexdec</span>(<span class="php-var">$code_arr</span>[<span class="php-var">$byte</span>]) &lt;&lt; <span class="php-num">3</span>;
</span><span id="1899" class="l"><a class="l" href="#1899">1899: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$bit</span> = <span class="php-num">0</span>; <span class="php-var">$bit</span> &lt; <span class="php-num">8</span>; ++<span class="php-var">$bit</span>) {
</span><span id="1900" class="l"><a class="l" href="#1900">1900: </a>                <span class="php-keyword1">if</span> ((<span class="php-var">$fcs</span> ^ <span class="php-var">$data</span>) &amp; <span class="php-num">0x400</span>) {
</span><span id="1901" class="l"><a class="l" href="#1901">1901: </a>                    <span class="php-var">$fcs</span> = (<span class="php-var">$fcs</span> &lt;&lt; <span class="php-num">1</span>) ^ <span class="php-var">$genpoly</span>;
</span><span id="1902" class="l"><a class="l" href="#1902">1902: </a>                } <span class="php-keyword1">else</span> {
</span><span id="1903" class="l"><a class="l" href="#1903">1903: </a>                    <span class="php-var">$fcs</span> = (<span class="php-var">$fcs</span> &lt;&lt; <span class="php-num">1</span>);
</span><span id="1904" class="l"><a class="l" href="#1904">1904: </a>                }
</span><span id="1905" class="l"><a class="l" href="#1905">1905: </a>                <span class="php-var">$fcs</span> &amp;= <span class="php-num">0x7FF</span>;
</span><span id="1906" class="l"><a class="l" href="#1906">1906: </a>                <span class="php-var">$data</span> &lt;&lt;= <span class="php-num">1</span>;
</span><span id="1907" class="l"><a class="l" href="#1907">1907: </a>            }
</span><span id="1908" class="l"><a class="l" href="#1908">1908: </a>        }
</span><span id="1909" class="l"><a class="l" href="#1909">1909: </a>        <span class="php-keyword1">return</span> <span class="php-var">$fcs</span>;
</span><span id="1910" class="l"><a class="l" href="#1910">1910: </a>    }
</span><span id="1911" class="l"><a class="l" href="#1911">1911: </a>
</span><span id="1912" class="l"><a class="l" href="#1912">1912: </a>    <span class="php-comment">/**
</span></span><span id="1913" class="l"><a class="l" href="#1913">1913: </a><span class="php-comment">     * Reverse unsigned short value
</span></span><span id="1914" class="l"><a class="l" href="#1914">1914: </a><span class="php-comment">     * @param int $num value to reversr
</span></span><span id="1915" class="l"><a class="l" href="#1915">1915: </a><span class="php-comment">     * @return int reversed value
</span></span><span id="1916" class="l"><a class="l" href="#1916">1916: </a><span class="php-comment">     * @access protected
</span></span><span id="1917" class="l"><a class="l" href="#1917">1917: </a><span class="php-comment">     */</span>
</span><span id="1918" class="l"><a class="l" href="#1918">1918: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_imb_reverse_us" href="#_imb_reverse_us">imb_reverse_us</a>(<span class="php-var">$num</span>) {
</span><span id="1919" class="l"><a class="l" href="#1919">1919: </a>        <span class="php-var">$rev</span> = <span class="php-num">0</span>;
</span><span id="1920" class="l"><a class="l" href="#1920">1920: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$i</span> = <span class="php-num">0</span>; <span class="php-var">$i</span> &lt; <span class="php-num">16</span>; ++<span class="php-var">$i</span>) {
</span><span id="1921" class="l"><a class="l" href="#1921">1921: </a>            <span class="php-var">$rev</span> &lt;&lt;= <span class="php-num">1</span>;
</span><span id="1922" class="l"><a class="l" href="#1922">1922: </a>            <span class="php-var">$rev</span> |= (<span class="php-var">$num</span> &amp; <span class="php-num">1</span>);
</span><span id="1923" class="l"><a class="l" href="#1923">1923: </a>            <span class="php-var">$num</span> &gt;&gt;= <span class="php-num">1</span>;
</span><span id="1924" class="l"><a class="l" href="#1924">1924: </a>        }
</span><span id="1925" class="l"><a class="l" href="#1925">1925: </a>        <span class="php-keyword1">return</span> <span class="php-var">$rev</span>;
</span><span id="1926" class="l"><a class="l" href="#1926">1926: </a>    }
</span><span id="1927" class="l"><a class="l" href="#1927">1927: </a>
</span><span id="1928" class="l"><a class="l" href="#1928">1928: </a>    <span class="php-comment">/**
</span></span><span id="1929" class="l"><a class="l" href="#1929">1929: </a><span class="php-comment">     * generate Nof13 tables used for Intelligent Mail Barcode
</span></span><span id="1930" class="l"><a class="l" href="#1930">1930: </a><span class="php-comment">     * @param int $n is the type of table: 2 for 2of13 table, 5 for 5of13table
</span></span><span id="1931" class="l"><a class="l" href="#1931">1931: </a><span class="php-comment">     * @param int $size size of table (78 for n=2 and 1287 for n=5)
</span></span><span id="1932" class="l"><a class="l" href="#1932">1932: </a><span class="php-comment">     * @return array requested table
</span></span><span id="1933" class="l"><a class="l" href="#1933">1933: </a><span class="php-comment">     * @access protected
</span></span><span id="1934" class="l"><a class="l" href="#1934">1934: </a><span class="php-comment">     */</span>
</span><span id="1935" class="l"><a class="l" href="#1935">1935: </a>    <span class="php-keyword1">protected</span> <span class="php-keyword1">function</span> <a id="_imb_tables" href="#_imb_tables">imb_tables</a>(<span class="php-var">$n</span>, <span class="php-var">$size</span>) {
</span><span id="1936" class="l"><a class="l" href="#1936">1936: </a>        <span class="php-var">$table</span> = <span class="php-keyword1">array</span>();
</span><span id="1937" class="l"><a class="l" href="#1937">1937: </a>        <span class="php-var">$lli</span> = <span class="php-num">0</span>; <span class="php-comment">// LUT lower index</span>
</span><span id="1938" class="l"><a class="l" href="#1938">1938: </a>        <span class="php-var">$lui</span> = <span class="php-var">$size</span> - <span class="php-num">1</span>; <span class="php-comment">// LUT upper index</span>
</span><span id="1939" class="l"><a class="l" href="#1939">1939: </a>        <span class="php-keyword1">for</span> (<span class="php-var">$count</span> = <span class="php-num">0</span>; <span class="php-var">$count</span> &lt; <span class="php-num">8192</span>; ++<span class="php-var">$count</span>) {
</span><span id="1940" class="l"><a class="l" href="#1940">1940: </a>            <span class="php-var">$bit_count</span> = <span class="php-num">0</span>;
</span><span id="1941" class="l"><a class="l" href="#1941">1941: </a>            <span class="php-keyword1">for</span> (<span class="php-var">$bit_index</span> = <span class="php-num">0</span>; <span class="php-var">$bit_index</span> &lt; <span class="php-num">13</span>; ++<span class="php-var">$bit_index</span>) {
</span><span id="1942" class="l"><a class="l" href="#1942">1942: </a>                <span class="php-var">$bit_count</span> += <span class="php-keyword2">intval</span>((<span class="php-var">$count</span> &amp; (<span class="php-num">1</span> &lt;&lt; <span class="php-var">$bit_index</span>)) != <span class="php-num">0</span>);
</span><span id="1943" class="l"><a class="l" href="#1943">1943: </a>            }
</span><span id="1944" class="l"><a class="l" href="#1944">1944: </a>            <span class="php-comment">// if we don't have the right number of bits on, go on to the next value</span>
</span><span id="1945" class="l"><a class="l" href="#1945">1945: </a>            <span class="php-keyword1">if</span> (<span class="php-var">$bit_count</span> == <span class="php-var">$n</span>) {
</span><span id="1946" class="l"><a class="l" href="#1946">1946: </a>                <span class="php-var">$reverse</span> = (<span class="php-var">$this</span>-&gt;imb_reverse_us(<span class="php-var">$count</span>) &gt;&gt; <span class="php-num">3</span>);
</span><span id="1947" class="l"><a class="l" href="#1947">1947: </a>                <span class="php-comment">// if the reverse is less than count, we have already visited this pair before</span>
</span><span id="1948" class="l"><a class="l" href="#1948">1948: </a>                <span class="php-keyword1">if</span> (<span class="php-var">$reverse</span> &gt;= <span class="php-var">$count</span>) {
</span><span id="1949" class="l"><a class="l" href="#1949">1949: </a>                    <span class="php-comment">// If count is symmetric, place it at the first free slot from the end of the list.</span>
</span><span id="1950" class="l"><a class="l" href="#1950">1950: </a>                    <span class="php-comment">// Otherwise, place it at the first free slot from the beginning of the list AND place $reverse ath the next free slot from the beginning of the list</span>
</span><span id="1951" class="l"><a class="l" href="#1951">1951: </a>                    <span class="php-keyword1">if</span> (<span class="php-var">$reverse</span> == <span class="php-var">$count</span>) {
</span><span id="1952" class="l"><a class="l" href="#1952">1952: </a>                        <span class="php-var">$table</span>[<span class="php-var">$lui</span>] = <span class="php-var">$count</span>;
</span><span id="1953" class="l"><a class="l" href="#1953">1953: </a>                        --<span class="php-var">$lui</span>;
</span><span id="1954" class="l"><a class="l" href="#1954">1954: </a>                    } <span class="php-keyword1">else</span> {
</span><span id="1955" class="l"><a class="l" href="#1955">1955: </a>                        <span class="php-var">$table</span>[<span class="php-var">$lli</span>] = <span class="php-var">$count</span>;
</span><span id="1956" class="l"><a class="l" href="#1956">1956: </a>                        ++<span class="php-var">$lli</span>;
</span><span id="1957" class="l"><a class="l" href="#1957">1957: </a>                        <span class="php-var">$table</span>[<span class="php-var">$lli</span>] = <span class="php-var">$reverse</span>;
</span><span id="1958" class="l"><a class="l" href="#1958">1958: </a>                        ++<span class="php-var">$lli</span>;
</span><span id="1959" class="l"><a class="l" href="#1959">1959: </a>                    }
</span><span id="1960" class="l"><a class="l" href="#1960">1960: </a>                }
</span><span id="1961" class="l"><a class="l" href="#1961">1961: </a>            }
</span><span id="1962" class="l"><a class="l" href="#1962">1962: </a>        }
</span><span id="1963" class="l"><a class="l" href="#1963">1963: </a>        <span class="php-keyword1">return</span> <span class="php-var">$table</span>;
</span><span id="1964" class="l"><a class="l" href="#1964">1964: </a>    }
</span><span id="1965" class="l"><a class="l" href="#1965">1965: </a>
</span><span id="1966" class="l"><a class="l" href="#1966">1966: </a>} <span class="php-comment">// end of class</span>
</span><span id="1967" class="l"><a class="l" href="#1967">1967: </a><span class="php-comment">//============================================================+</span>
</span><span id="1968" class="l"><a class="l" href="#1968">1968: </a><span class="php-comment">// END OF FILE</span>
</span><span id="1969" class="l"><a class="l" href="#1969">1969: </a><span class="php-comment">//============================================================+</span>
</span><span id="1970" class="l"><a class="l" href="#1970">1970: </a></span></code></pre>

	<div id="footer">
		 API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</div>
</body>
</html>
